<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>C++ | ğŸ­â€‹ä½ è¦ä¿¡æˆ‘å•Šã®åšå®¢â€‹</title><meta name="author" content="ryf"><meta name="copyright" content="ryf"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å‚è€ƒé“¾æ¥C++å­¦ä¹ ç½‘ â€“ ä¸–ç•Œä¸Šæœ€å¥½çš„ä¸­æ–‡C++å­¦ä¹ ç½‘ç«™ (studycpp.cn) C++ è¯­è¨€ - cppreference.cn - C++å‚è€ƒæ‰‹å†Œ æ•°æ®ç±»å‹vectorå¢åŠ æ•°æ®åœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨std::vectoræ¥åŠ¨æ€ç®¡ç†æ•°æ®ã€‚è¦å‘std::vectorä¸­å¢åŠ æ•°æ®ï¼Œæœ‰å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š  ä½¿ç”¨push_backæ–¹æ³•ï¼šå‘vectorçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚  1myVector.push_b">
<meta property="og:type" content="article">
<meta property="og:title" content="C++">
<meta property="og:url" content="https://youshouldtrustme.github.io/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C++/index.html">
<meta property="og:site_name" content="ğŸ­â€‹ä½ è¦ä¿¡æˆ‘å•Šã®åšå®¢â€‹">
<meta property="og:description" content="å‚è€ƒé“¾æ¥C++å­¦ä¹ ç½‘ â€“ ä¸–ç•Œä¸Šæœ€å¥½çš„ä¸­æ–‡C++å­¦ä¹ ç½‘ç«™ (studycpp.cn) C++ è¯­è¨€ - cppreference.cn - C++å‚è€ƒæ‰‹å†Œ æ•°æ®ç±»å‹vectorå¢åŠ æ•°æ®åœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨std::vectoræ¥åŠ¨æ€ç®¡ç†æ•°æ®ã€‚è¦å‘std::vectorä¸­å¢åŠ æ•°æ®ï¼Œæœ‰å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š  ä½¿ç”¨push_backæ–¹æ³•ï¼šå‘vectorçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚  1myVector.push_b">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://youshouldtrustme.github.io/img/RandomCoverImage/random_12.jpg">
<meta property="article:published_time" content="2026-01-21T02:07:02.610Z">
<meta property="article:modified_time" content="2026-01-21T02:07:02.611Z">
<meta property="article:author" content="ryf">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://youshouldtrustme.github.io/img/RandomCoverImage/random_12.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "C++",
  "url": "https://youshouldtrustme.github.io/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C++/",
  "image": "https://youshouldtrustme.github.io/img/RandomCoverImage/random_12.jpg",
  "datePublished": "2026-01-21T02:07:02.610Z",
  "dateModified": "2026-01-21T02:07:02.611Z",
  "author": [
    {
      "@type": "Person",
      "name": "ryf",
      "url": "https://youshouldtrustme.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://youshouldtrustme.github.io/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C++/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C++',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/index.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">86</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-a-jiafangzijianzhu"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-a-folderyellow"></use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei-"></use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-a-07biaoqian"></use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guanyuwomen"></use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/friends/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie"></use></svg><span class="menu_word" style="font-size:17px"> å‹é“¾</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/RandomCoverImage/random_12.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ğŸ­â€‹ä½ è¦ä¿¡æˆ‘å•Šã®åšå®¢â€‹</span></a><a class="nav-page-title" href="/"><span class="site-name">C++</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-a-jiafangzijianzhu"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-a-folderyellow"></use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei-"></use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-a-07biaoqian"></use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guanyuwomen"></use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/friends/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie"></use></svg><span class="menu_word" style="font-size:17px"> å‹é“¾</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">C++</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2026-01-21T02:07:02.610Z" title="å‘è¡¨äº 2026-01-21 02:07:02">2026-01-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2026-01-21T02:07:02.611Z" title="æ›´æ–°äº 2026-01-21 02:07:02">2026-01-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">ç¼–ç¨‹è¯­è¨€</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">13.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>47åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a target="_blank" rel="noopener" href="https://www.studycpp.cn/">C++å­¦ä¹ ç½‘ â€“ ä¸–ç•Œä¸Šæœ€å¥½çš„ä¸­æ–‡C++å­¦ä¹ ç½‘ç«™ (studycpp.cn)</a></p>
<p><a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language">C++ è¯­è¨€ - cppreference.cn - C++å‚è€ƒæ‰‹å†Œ</a></p>
<h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><h2 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h2><h3 id="å¢åŠ æ•°æ®"><a href="#å¢åŠ æ•°æ®" class="headerlink" title="å¢åŠ æ•°æ®"></a>å¢åŠ æ•°æ®</h3><p>åœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>std::vector</code>æ¥åŠ¨æ€ç®¡ç†æ•°æ®ã€‚è¦å‘<code>std::vector</code>ä¸­å¢åŠ æ•°æ®ï¼Œæœ‰å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<ol>
<li><p><strong>ä½¿ç”¨<code>push_back</code>æ–¹æ³•</strong>ï¼šå‘<code>vector</code>çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myVector.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>ä½¿ç”¨<code>emplace_back</code>æ–¹æ³•</strong>ï¼šåœ¨<code>vector</code>çš„æœ«å°¾åŸåœ°æ„é€ ä¸€ä¸ªå…ƒç´ ã€‚è¿™é€šå¸¸æ¯”<code>push_back</code>æ›´é«˜æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚å¯¹è±¡æ—¶ã€‚</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myVector.<span class="built_in">emplace_back</span>(<span class="number">30</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨<code>insert</code>æ–¹æ³•</strong>ï¼šåœ¨<code>vector</code>çš„æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myVector.<span class="built_in">insert</span>(myVector.<span class="built_in">begin</span>() + <span class="number">1</span>, <span class="number">40</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨<code>resize</code>æ–¹æ³•</strong>ï¼šè°ƒæ•´<code>vector</code>çš„å¤§å°ï¼Œå¹¶å¯¹æ–°å¢åŠ çš„å…ƒç´ è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// å°†vectorå¤§å°è°ƒæ•´ä¸º5ï¼Œå¹¶ç”¨0åˆå§‹åŒ–æ–°å¢çš„å…ƒç´ </span></span><br><span class="line">myVector.<span class="built_in">resize</span>(<span class="number">5</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨<code>assign</code>æ–¹æ³•</strong>ï¼šç»™<code>vector</code>åˆ†é…æ–°çš„å†…å®¹ï¼Œæ›¿æ¢å…¶å½“å‰å†…å®¹ã€‚</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myVector.<span class="built_in">assign</span>(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="hash-map"><a href="#hash-map" class="headerlink" title="hash map"></a>hash map</h2><h3 id="å¼•å…¥å¤´æ–‡ä»¶"><a href="#å¼•å…¥å¤´æ–‡ä»¶" class="headerlink" title="å¼•å…¥å¤´æ–‡ä»¶"></a>å¼•å…¥å¤´æ–‡ä»¶</h3><p>é¦–å…ˆéœ€è¦åŒ…å« <code>unordered_map</code> å¤´æ–‡ä»¶ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><ol>
<li><p><strong>å®šä¹‰ä¸€ä¸ª <code>unordered_map</code>ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::unordered_map&lt;<span class="type">int</span>, std::string&gt; myMap;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª <code>unordered_map</code>ï¼Œé”®æ˜¯ <code>int</code> ç±»å‹ï¼Œå€¼æ˜¯ <code>std::string</code> ç±»å‹ã€‚</p>
</li>
<li><p><strong>æ’å…¥å…ƒç´ ï¼š</strong></p>
<p>å¯ä»¥é€šè¿‡ <code>[]</code> è¿ç®—ç¬¦æˆ– <code>insert</code> å‡½æ•°æ¥æ’å…¥å…ƒç´ ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">myMap[<span class="number">1</span>] = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">myMap[<span class="number">2</span>] = <span class="string">&quot;World&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ insert å‡½æ•°</span></span><br><span class="line">myMap.<span class="built_in">insert</span>(&#123;<span class="number">3</span>, <span class="string">&quot;C++&quot;</span>&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>è®¿é—®å…ƒç´ ï¼š</strong></p>
<p>å¯ä»¥ä½¿ç”¨é”®è®¿é—®å…ƒç´ ï¼Œå¦‚æœé”®ä¸å­˜åœ¨åˆ™ä¼šæ’å…¥ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::string value = myMap[<span class="number">1</span>]; <span class="comment">// &quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸ç¡®å®šé”®æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>at</code> æ–¹æ³•ï¼Œè¿™æ ·åœ¨é”®ä¸å­˜åœ¨æ—¶ä¼šæŠ›å‡º <code>std::out_of_range</code> å¼‚å¸¸ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    std::string value = myMap.<span class="built_in">at</span>(<span class="number">4</span>); <span class="comment">// ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">&#125; <span class="built_in">catch</span> (<span class="type">const</span> std::out_of_range&amp; e) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Key not found&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æŸ¥æ‰¾å…ƒç´ ï¼š</strong></p>
<p>å¯ä»¥ä½¿ç”¨ <code>find</code> å‡½æ•°æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> it = myMap.<span class="built_in">find</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (it != myMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Found: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl; <span class="comment">// è¾“å‡º &quot;Found: World&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Not found&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>éå† <code>unordered_map</code>ï¼š</strong></p>
<p>å¯ä»¥ä½¿ç”¨èŒƒå›´ <code>for</code> å¾ªç¯æˆ–è¿­ä»£å™¨æ¥éå†æ‰€æœ‰é”®å€¼å¯¹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; pair : myMap) &#123;</span><br><span class="line">    std::cout &lt;&lt; pair.first &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; pair.second &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åˆ é™¤å…ƒç´ ï¼š</strong></p>
<p>å¯ä»¥ä½¿ç”¨ <code>erase</code> æ–¹æ³•åˆ é™¤æŸä¸ªé”®å€¼å¯¹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myMap.<span class="built_in">erase</span>(<span class="number">1</span>); <span class="comment">// åˆ é™¤é”®ä¸º 1 çš„å…ƒç´ </span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>è·å–å¤§å°å’Œæ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::cout &lt;&lt; <span class="string">&quot;Size: &quot;</span> &lt;&lt; myMap.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"><span class="keyword">if</span> (myMap.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Map is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h1><h2 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h2><blockquote>
<p><strong>OOP æ˜¯ä¸€ç§ä»¥â€œå¯¹è±¡â€ä¸ºæ ¸å¿ƒçš„ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œå¯¹è±¡æŠŠâ€œæ•°æ®ï¼ˆå±æ€§ï¼‰â€å’Œâ€œæ“ä½œè¿™äº›æ•°æ®çš„è¡Œä¸ºï¼ˆå‡½æ•°ï¼‰â€å°è£…åœ¨ä¸€èµ·ã€‚</strong></p>
</blockquote>
<p>å®ƒè§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•ç®¡ç†å¤æ‚ç³»ç»Ÿä¸­çš„æ•°æ®ä¸è¡Œä¸ºçš„å…³ç³»ã€‚</strong></p>
<p>å®é™…æœ‰ä¸¤ç§ç¼–ç¨‹æ–¹å¼ï¼š</p>
<ol>
<li><p>è¿‡ç¨‹å¼ç¼–ç¨‹ï¼ˆProcedural Programmingï¼‰</p>
<ul>
<li>å…³æ³¨ç‚¹ï¼š<strong>è¿‡ç¨‹ &#x2F; å‡½æ•°</strong></li>
<li>æ•°æ®ä¸è¡Œä¸ºåˆ†ç¦»</li>
<li>å‡½æ•°â€œä½œç”¨â€åœ¨æ•°æ®ä¹‹ä¸Š</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eat</span>(you, apple);</span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å‡½æ•°æ˜¯ä¸»è§’</li>
<li>æ•°æ®æ˜¯è¢«åŠ¨çš„</li>
<li>ç¨‹åºå‘˜è´Ÿè´£â€œæ­£ç¡®åœ°æŠŠå‡½æ•°å’Œæ•°æ®é…å¯¹â€</li>
</ul>
</li>
<li><p>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programmingï¼‰</p>
<ul>
<li>å…³æ³¨ç‚¹ï¼š<strong>å¯¹è±¡</strong></li>
<li>æ•°æ®å’Œè¡Œä¸ºç»‘å®š</li>
<li>è¡Œä¸ºæ˜¯å¯¹è±¡â€œåšçš„äº‹â€</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you.<span class="built_in">eat</span>(apple);</span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯¹è±¡æ˜¯ä¸»è§’</li>
<li>å¯¹è±¡è‡ªå·±ç®¡ç†è‡ªå·±çš„æ•°æ®</li>
<li>ä»£ç ç»“æ„æ›´æ¥è¿‘ç°å®ä¸–ç•Œçš„å»ºæ¨¡æ–¹å¼</li>
</ul>
</li>
</ol>
<hr>
<p> OOP ä¸­å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ</p>
<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>ç±»ï¼ˆClassï¼‰</td>
<td>å¯¹ä¸€ç±»å¯¹è±¡çš„æŠ½è±¡æè¿°</td>
</tr>
<tr>
<td>å¯¹è±¡ï¼ˆObjectï¼‰</td>
<td>ç±»çš„ä¸€ä¸ªå®ä¾‹</td>
</tr>
<tr>
<td>å±æ€§</td>
<td>å¯¹è±¡å†…éƒ¨çš„æ•°æ®</td>
</tr>
<tr>
<td>è¡Œä¸º</td>
<td>å¯¹è±¡å¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼ˆæˆå‘˜å‡½æ•°ï¼‰</td>
</tr>
</tbody></table>
<p>OOPå¸¦æ¥äº†å››å¤§ç‰¹æ€§ï¼š</p>
<ol>
<li><p>å°è£…ï¼ˆEncapsulationï¼‰ï¼š<strong>æŠŠæ•°æ®å’Œæ“ä½œè¿™äº›æ•°æ®çš„å‡½æ•°æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶é™åˆ¶å¤–éƒ¨ç›´æ¥è®¿é—®å†…éƒ¨ç»†èŠ‚ã€‚</strong></p>
<ul>
<li><code>class</code></li>
<li><code>public / protected / private</code></li>
<li>æ¥å£ä¸å®ç°åˆ†ç¦»</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">login</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string password;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li>é˜²æ­¢è¯¯ç”¨</li>
<li>é™ä½è€¦åˆ</li>
<li>æé«˜æ¨¡å—åŒ–ç¨‹åº¦</li>
</ul>
</li>
<li><p>ç»§æ‰¿ï¼ˆInheritanceï¼‰ï¼š<strong>åœ¨å·²æœ‰ç±»å‹çš„åŸºç¡€ä¸Šæ´¾ç”Ÿå‡ºæ–°ç±»å‹ï¼Œå®ç°ä»£ç å¤ç”¨å’Œå±‚æ¬¡å»ºæ¨¡ã€‚</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">bark</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç»§æ‰¿çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹å¼</th>
<th>è¯­ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>public</code></td>
<td>is-a</td>
</tr>
<tr>
<td><code>protected</code></td>
<td>ä»…å¯¹ç»§æ‰¿ä½“ç³»å¼€æ”¾</td>
</tr>
<tr>
<td><code>private</code></td>
<td>å®ç°å¤ç”¨</td>
</tr>
</tbody></table>
</li>
<li><p>å¤šæ€ï¼ˆPolymorphismï¼‰ï¼š<strong>åŒä¸€æ¥å£ï¼Œä¸åŒå¯¹è±¡ï¼Œè¡¨ç°å‡ºä¸åŒè¡Œä¸ºã€‚</strong></p>
<ul>
<li>è™šå‡½æ•°ï¼ˆ<code>virtual</code>ï¼‰</li>
<li>åŸºç±»æŒ‡é’ˆ &#x2F; å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line">Animal* a = <span class="keyword">new</span> Dog;</span><br><span class="line">a-&gt;<span class="built_in">speak</span>(); <span class="comment">// è°ƒç”¨ Dog::speak</span></span><br></pre></td></tr></table></figure>

<p>è§£å†³çš„é—®é¢˜</p>
<ul>
<li>æ¶ˆé™¤å¤§é‡ <code>if/else</code></li>
<li>æ”¯æŒè¿è¡Œæ—¶è¡Œä¸ºæ‰©å±•</li>
</ul>
</li>
<li><p>æŠ½è±¡ï¼ˆAbstractionï¼‰ï¼š<strong>åªæš´éœ²â€œåšä»€ä¹ˆâ€ï¼Œä¸æš´éœ²â€œæ€ä¹ˆåšâ€ã€‚</strong></p>
<ul>
<li>çº¯è™šå‡½æ•°</li>
<li>æŠ½è±¡åŸºç±»ï¼ˆæ¥å£ï¼‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">area</span><span class="params">()</span> <span class="type">const</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h2><p>$$<br>ç±»å£°æ˜ &#x3D; å®šä¹‰ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ + åŒæ—¶å®šä¹‰å…¶ä½œç”¨åŸŸã€æˆå‘˜ã€è®¿é—®è§„åˆ™å’Œç»§æ‰¿å…³ç³»<br>$$</p>
<p>åœ¨ C++ ä¸­ï¼Œ<code>class / struct / union</code> å¹¶ä¸åªæ˜¯â€œæ•°æ®ç»“æ„â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ç±»å‹å®šä¹‰</li>
<li>åå­—ç©ºé—´ï¼ˆä½œç”¨åŸŸï¼‰</li>
<li>è®¿é—®æ§åˆ¶å•å…ƒ</li>
<li>é¢å‘å¯¹è±¡è¯­ä¹‰çš„è½½ä½“</li>
</ul>
<blockquote>
<p>[!tip]</p>
<p>class &#x2F; struct &#x2F; union çš„æœ¬è´¨åŒºåˆ«ï¼ˆä¸æ˜¯â€œæœ‰æ²¡æœ‰æ„é€ å‡½æ•°â€ï¼‰</p>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>é»˜è®¤æˆå‘˜è®¿é—®</th>
<th>é»˜è®¤ç»§æ‰¿æ–¹å¼</th>
<th>æœ¬è´¨åŒºåˆ«</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>private</td>
<td>private</td>
<td>å¼ºè°ƒå°è£…</td>
</tr>
<tr>
<td>struct</td>
<td>public</td>
<td>public</td>
<td>å¼ºè°ƒæ•°æ®èšåˆ</td>
</tr>
<tr>
<td>union</td>
<td>public</td>
<td>public</td>
<td><strong>å…±äº«å†…å­˜å¸ƒå±€</strong></td>
</tr>
</tbody></table>
<p>âš ï¸ <strong>é™¤äº†é»˜è®¤è®¿é—®æƒé™ï¼Œclass å’Œ struct åœ¨è¯­è¨€å±‚é¢å®Œå…¨ç­‰ä»·</strong></p>
</blockquote>
<h3 id="å£°æ˜è¯­æ³•"><a href="#å£°æ˜è¯­æ³•" class="headerlink" title="å£°æ˜è¯­æ³•"></a>å£°æ˜è¯­æ³•</h3><p>å£°æ˜è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span>-key</span><br><span class="line">[attributes]</span><br><span class="line">[<span class="keyword">class</span>-name]</span><br><span class="line">[<span class="keyword">class</span>-property-specs]</span><br><span class="line">[base-clause]</span><br><span class="line">&#123;</span><br><span class="line">    member-specification</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é€šä¿—çš„å°†ä¸€ä¸ªç±»çš„å£°æ˜ç†è§£ä¸ºï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªç±»å‹</span><br><span class="line">â”œâ”€ å®ƒå«ä»€ä¹ˆ</span><br><span class="line">â”œâ”€ èƒ½ä¸èƒ½è¢«ç»§æ‰¿ / ä¼˜åŒ–å±æ€§</span><br><span class="line">â”œâ”€ ç»§æ‰¿äº†è°ã€æ€ä¹ˆç»§æ‰¿</span><br><span class="line">â””â”€ é‡Œé¢æœ‰ä»€ä¹ˆæˆå‘˜ã€è°èƒ½è®¿é—®</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­æ¯ä¸ªç¬¦å·çš„è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ol>
<li><p><code>class-key</code></p>
<p>å…¶ä¸­ä¹‹ä¸€æ˜¯ <a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/keyword/class"><code>class</code></a>ã€<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/keyword/struct"><code>struct</code></a> å’Œ <a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/keyword/union"><code>union</code></a>ã€‚å…³é”®å­— class å’Œ struct é™¤äº†é»˜è®¤<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/access">æˆå‘˜è®¿é—®æƒé™</a>å’Œé»˜è®¤<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/derived_class">åŸºç±»è®¿é—®æƒé™</a>å¤–æ˜¯ç›¸åŒçš„ã€‚å¦‚æœå®ƒæ˜¯ unionï¼Œåˆ™æ­¤å£°æ˜å¼•å…¥ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/union">è”åˆç±»å‹</a>ã€‚</p>
</li>
<li><p><code>attr</code></p>
<p>ä»»æ„æ•°é‡çš„<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/attributes">å±æ€§</a>ï¼Œå¯ä»¥åŒ…å« <a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/alignas"><code>alignas</code></a> è¯´æ˜ç¬¦</p>
</li>
<li><p><code>class-head-name</code></p>
<p>æ­£åœ¨å®šä¹‰çš„ç±»çš„åç§°ï¼Œå¯é€‰<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/identifiers#Qualified_identifiers">é™å®šç¬¦</a></p>
</li>
<li><p><code>class-property-specs</code></p>
<p>ä»¥ä¸‹è¯´æ˜ç¬¦çš„åˆ—è¡¨ï¼Œæ¯ä¸ªè¯´æ˜ç¬¦åœ¨æ¯ä¸ªåºåˆ—ä¸­æœ€å¤šå…è®¸å‡ºç°ä¸€æ¬¡ã€‚</p>
<table>
<thead>
<tr>
<th>è¯´æ˜ç¬¦</th>
<th>æ•ˆæœ</th>
</tr>
</thead>
<tbody><tr>
<td>final</td>
<td>æŒ‡å®š <a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/virtual">è™šå‡½æ•°</a> ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­è¢«è¦†ç›–ï¼ŒæŒ‡å®šç±»<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/final">ä¸èƒ½è¢«æ´¾ç”Ÿ</a></td>
</tr>
<tr>
<td>trivially_relocatable_if_eligible</td>
<td>å¦‚æœç¬¦åˆæ¡ä»¶ï¼Œå°†ç±»æ ‡è®°ä¸ºå¯å¹³å‡¡é‡å®šä½</td>
</tr>
<tr>
<td>replaceable_if_eligible</td>
<td>å¦‚æœç¬¦åˆæ¡ä»¶ï¼Œå°†ç±»æ ‡è®°ä¸ºå¯æ›¿æ¢</td>
</tr>
</tbody></table>
<ul>
<li><p><code>final</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> <span class="keyword">final</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ç¦æ­¢ä»»ä½•ç»§æ‰¿</strong></li>
<li>ç¼–è¯‘å™¨å¯è¿›è¡Œæ›´æ¿€è¿›çš„ä¼˜åŒ–ï¼ˆå¦‚ devirtualizationï¼‰</li>
</ul>
<p>ğŸ“Œ å¸¸ç”¨äºï¼š</p>
<ul>
<li>æ¥å£å®ç°çš„æœ€ç»ˆç‰ˆæœ¬</li>
<li>ä¸å¸Œæœ›è¢«æ»¥ç”¨ç»§æ‰¿çš„ç±»</li>
</ul>
</li>
<li><p>å…¶ä»–çš„ä¸¤ä¸ªå‚æ•°åŸºæœ¬ä¸ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸åšèµ˜è¿°</p>
</li>
</ul>
</li>
<li><p><code>base-clause</code></p>
<p>ä¸€ä¸ªæˆ–å¤šä¸ªåŸºç±»çš„åˆ—è¡¨ï¼Œä»¥åŠæ¯ä¸ªåŸºç±»ä½¿ç”¨çš„ç»§æ‰¿æ¨¡å‹ï¼ˆå‚è§<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/derived_class">æ´¾ç”Ÿç±»</a>ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B1, <span class="keyword">private</span> B2 &#123;&#125;;</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>ç»§æ‰¿çš„æ˜¯â€œå­å¯¹è±¡â€ï¼Œä¸æ˜¯æ‹·è´ä»£ç </strong></li>
<li>è®¿é—®æ–¹å¼ï¼ˆpublic &#x2F; protected &#x2F; privateï¼‰ï¼š<ul>
<li>æ§åˆ¶ <strong>å¤–éƒ¨æ˜¯å¦èƒ½é€šè¿‡ D å½“æˆ B ä½¿ç”¨</strong></li>
</ul>
</li>
<li>æ˜¯å¦ <code>virtual</code>ï¼š<ul>
<li>å†³å®šæ˜¯å¦å…±äº«åŸºç±»å­å¯¹è±¡</li>
<li>ç›´æ¥å½±å“ <strong>å¯¹è±¡å¸ƒå±€ + æ„é€ &#x2F;ææ„é¡ºåº</strong></li>
</ul>
</li>
</ol>
</li>
<li><p><code>member-specification</code></p>
<p>è®¿é—®è¯´æ˜ç¬¦ã€æˆå‘˜å¯¹è±¡å’Œæˆå‘˜å‡½æ•°å£°æ˜å’Œå®šä¹‰çš„åˆ—è¡¨</p>
</li>
</ol>
<p>ä¸‹é¢ä½¿ç”¨å‡ ä¸ªä¾‹å­æ¥å±•ç¤ºç”³æ˜ä¸€ä¸ªç±»çš„å†™æ³•ï¼š</p>
<ol>
<li><p><strong>åŸºæœ¬å‘½åç±»ï¼ˆ<code>class</code> å’Œ <code>struct</code> å¯¹æ¯”ï¼‰</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ classï¼ˆé»˜è®¤æˆå‘˜è®¿é—®æƒé™ä¸º privateï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;          <span class="comment">// é»˜è®¤ private</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(<span class="type">int</span> v)</span> </span>&#123; x = v; &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ structï¼ˆé»˜è®¤æˆå‘˜è®¿é—®æƒé™ä¸º publicï¼‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">int</span> x, y;       <span class="comment">// é»˜è®¤ public</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">(<span class="type">int</span> dx, <span class="type">int</span> dy)</span> </span>&#123; x += dx; y += dy; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>class</code> å’Œ <code>struct</code> çš„å”¯ä¸€åŒºåˆ«æ˜¯é»˜è®¤è®¿é—®æƒé™ã€‚</p>
</li>
<li><p><strong>å¸¦å±æ€§å’Œ <code>final</code> çš„ç±»</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ alignas å’Œ final</span></span><br><span class="line"><span class="function"><span class="keyword">class</span> <span class="title">alignas</span><span class="params">(<span class="number">16</span>)</span> Immutable <span class="keyword">final</span> </span>&#123;  <span class="comment">// 16 å­—èŠ‚å¯¹é½ï¼Œä¸”ä¸å¯ç»§æ‰¿</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> value;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Immutable</span>(<span class="type">int</span> v) : <span class="built_in">value</span>(v) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> value; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°è¯•ç»§æ‰¿ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// class Derived : Immutable &#123;&#125;;  // é”™è¯¯ï¼šImmutable æ˜¯ final</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åŒ¿åç±»ï¼ˆé€šå¸¸ç”¨äºåµŒå¥—æˆ–è”åˆï¼‰</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åç±»ï¼ˆå¸¸ç”¨äºè”åˆæˆ–åµŒå¥—åœºæ™¯ï¼‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">struct</span> &#123;        <span class="comment">// åŒ¿ååµŒå¥—ç±»</span></span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">    &#125; inner;        <span class="comment">// ç›´æ¥å£°æ˜å¯¹è±¡ inner</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Outer o;</span><br><span class="line">o.inner.a = <span class="number">42</span>;     <span class="comment">// è®¿é—®åŒ¿åç±»çš„æˆå‘˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¿åè”åˆ</span></span><br><span class="line"><span class="keyword">union</span> &#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">float</span> f;</span><br><span class="line">&#125; data;</span><br><span class="line">data.i = <span class="number">42</span>;        <span class="comment">// é€šè¿‡è”åˆæˆå‘˜è®¿é—®</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç»§æ‰¿å’ŒåŸºç±»åˆ—è¡¨</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;  <span class="comment">// å…¬æœ‰ç»§æ‰¿</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;&#125;     <span class="comment">// è¦†ç›–è™šå‡½æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šé‡ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123; <span class="type">int</span> a; &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">B</span> &#123; <span class="type">int</span> b; &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">C</span> : A, B &#123; <span class="type">int</span> c; &#125;;   <span class="comment">// ç»§æ‰¿ A å’Œ B</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¦é™å®šåç§°çš„ç±»ï¼ˆåµŒå¥—æˆ–å‘½åç©ºé—´å†…ï¼‰</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> N &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;  <span class="comment">// é™å®šåç§°ä¸º N::Inner</span></span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Outer</span>::Nested &#123;  <span class="comment">// å‰ç½®å£°æ˜éœ€å­˜åœ¨ class Outer &#123; class Nested; &#125;;</span></span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="æˆå‘˜è§„èŒƒ"><a href="#æˆå‘˜è§„èŒƒ" class="headerlink" title="æˆå‘˜è§„èŒƒ"></a>æˆå‘˜è§„èŒƒ</h3><ol>
<li><p>æ•°æ®æˆå‘˜ï¼ˆçŠ¶æ€ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> y;</span><br><span class="line"><span class="type">int</span> a[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>éé™æ€æˆå‘˜ â†’ å±äºå¯¹è±¡</li>
<li>é™æ€æˆå‘˜ â†’ å±äºç±»</li>
<li>é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ â‰  æ„é€ å‡½æ•°åˆå§‹åŒ–</li>
</ul>
</li>
<li><p>æˆå‘˜å‡½æ•°ï¼ˆè¡Œä¸ºï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">g</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç±»å†…å®šä¹‰ â†’ è‡ªåŠ¨ inline</li>
<li><code>virtual</code> å½±å“ <strong>åŠ¨æ€ç»‘å®š</strong></li>
<li>çº¯è™šå‡½æ•° â†’ æŠ½è±¡ç±»</li>
</ul>
</li>
<li><p>ç±»å‹æˆå‘˜ï¼ˆç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> value_type = T;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span>* pointer;</span><br><span class="line"><span class="keyword">enum</span> &#123; A, B &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Nested</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>ğŸ“Œ è¿™ä½¿å¾—ï¼š</p>
<ul>
<li>ç±»æœ¬èº«æˆä¸ºä¸€ä¸ª <strong>å°å‹ç±»å‹å‘½åç©ºé—´</strong></li>
<li>æ”¯æ’‘ STL é£æ ¼çš„æ³›å‹è®¾è®¡</li>
</ul>
</li>
<li><p>è®¿é—®æ§åˆ¶ä¸è¯­è¨€å·¥å…·</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="keyword">using</span> Base::member;</span><br><span class="line"><span class="built_in">static_assert</span>(...);</span><br></pre></td></tr></table></figure>

<p>è¿™äº›<strong>ä¸äº§ç”Ÿå¯¹è±¡æˆå‘˜</strong>ï¼Œä½†<strong>å¼ºçƒˆå½±å“è¯­ä¹‰</strong></p>
</li>
</ol>
<h3 id="å‰å‘å£°æ˜"><a href="#å‰å‘å£°æ˜" class="headerlink" title="å‰å‘å£°æ˜"></a>å‰å‘å£°æ˜</h3><p>å‰å‘å£°æ˜å®é™…ä¸Šæ˜¯ä¸ºäº†<strong>æ‰“ç ´ç±»å‹ä¹‹é—´çš„ç¼–è¯‘ä¾èµ–ç¯</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;   <span class="comment">// ä¸å®Œæ•´ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    B* p;  <span class="comment">// OK</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»å‹çš„æ”¯æŒç¨‹åº¦å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å¯ä»¥</th>
<th>ä¸å¯ä»¥</th>
</tr>
</thead>
<tbody><tr>
<td>æŒ‡é’ˆ &#x2F; å¼•ç”¨</td>
<td>æˆå‘˜å¯¹è±¡</td>
</tr>
<tr>
<td>å‡½æ•°å‚æ•°</td>
<td>sizeof</td>
</tr>
<tr>
<td>è¿”å›ç±»å‹ï¼ˆæŒ‡é’ˆï¼‰</td>
<td>è®¿é—®æˆå‘˜</td>
</tr>
</tbody></table>
<p>æˆ‘ä»¬å¯ä»¥å…ˆç”³æ˜ç±»ï¼Œå†å»å†™ç±»çš„å®šä¹‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span>-key attr identifierï¼›</span><br></pre></td></tr></table></figure>

<p>å£°æ˜äº†ä¸€ä¸ªå°†åœ¨è¯¥ä½œç”¨åŸŸä¸­ç¨åå®šä¹‰çš„ç±»ç±»å‹ã€‚åœ¨å®šä¹‰å‡ºç°ä¹‹å‰ï¼Œæ­¤ç±»åå…·æœ‰<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/incomplete_type">ä¸å®Œæ•´ç±»å‹</a>ã€‚è¿™å…è®¸ç±»ä¹‹é—´ç›¸äº’å¼•ç”¨</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>; <span class="comment">// å‰å‘ç”³æ˜</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Matrix</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">friend</span> Vector <span class="keyword">operator</span>*(<span class="type">const</span> Matrix&amp;, <span class="type">const</span> Vector&amp;);	<span class="comment">//è¿™é‡Œå°±å·²ç»åœ¨ç”¨å‰å‘ç”³æ˜çš„ç±»äº†</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">friend</span> Vector <span class="keyword">operator</span>*(<span class="type">const</span> Matrix&amp;, <span class="type">const</span> Vector&amp;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå‰å‘å£°æ˜å‡ºç°åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­ï¼Œå®ƒä¼š<em>éšè—</em>ä¹‹å‰å£°æ˜çš„ç±»ã€å˜é‡ã€å‡½æ•°ä»¥åŠåœ¨å°é—­ä½œç”¨åŸŸä¸­å¯èƒ½å‡ºç°çš„åŒåæ‰€æœ‰å…¶ä»–å£°æ˜ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">s</span> &#123; <span class="type">int</span> a; &#125;; <span class="comment">// å®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„ç»“æ„ä½“sï¼ŒåŒ…å«ä¸€ä¸ªintæˆå‘˜a</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s</span>; <span class="comment">// è¿™åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä»€ä¹ˆéƒ½ä¸åšï¼Œå› ä¸ºså·²ç»è¢«å®šä¹‰äº†</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">s</span>; <span class="comment">// å‰å‘å£°æ˜ä¸€ä¸ªæ–°çš„ã€å±€éƒ¨çš„ç»“æ„ä½“sï¼Œè¿™ä¼šéšè—å…¨å±€çš„ç»“æ„ä½“sï¼Œç›´åˆ°è¿™ä¸ªå—ç»“æŸ</span></span><br><span class="line">    </span><br><span class="line">    s* p; <span class="comment">// è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å±€éƒ¨å£°æ˜çš„ç»“æ„ä½“sï¼Œä¸æ˜¯å…¨å±€çš„é‚£ä¸ª</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">s</span> &#123; <span class="type">char</span>* p; &#125;; <span class="comment">// å®šä¹‰å±€éƒ¨ç»“æ„ä½“sçš„å…·ä½“å†…å®¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œæ–°çš„ç±»åä¹Ÿå¯ä»¥é€šè¿‡ä½œä¸ºå¦ä¸€ä¸ªå£°æ˜çš„ä¸€éƒ¨åˆ†å‡ºç°çš„<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/elaborated_type_specifier">è¯¦ç»†ç±»å‹è¯´æ˜ç¬¦</a>å¼•å…¥ï¼Œä½†å‰ææ˜¯<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/lookup">åç§°æŸ¥æ‰¾</a>æ— æ³•æ‰¾åˆ°ä¹‹å‰å£°æ˜çš„åŒåç±»ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">U</span>;<span class="comment">// å‰å‘å£°æ˜å…¨å±€ç±»Uï¼Œä½†å°šæœªå®šä¹‰å®ƒçš„æˆå‘˜ã€‚æ­¤æ—¶ U æ˜¯ä¸€ä¸ªä¸å®Œå…¨ç±»å‹ï¼Œåªèƒ½ç”¨äºå£°æ˜æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> ns</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">class</span> Y <span class="title">f</span><span class="params">(<span class="keyword">class</span> T p)</span></span>; <span class="comment">// class Y å’Œ class T æ˜¯è¯¦ç»†ç±»å‹è¯´æ˜ç¬¦ã€‚ç”±äº ns::Y å’Œ ns::T åœ¨å‘½åç©ºé—´ ns ä¸­å°šæœªå£°æ˜ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å‰å‘å£°æ˜å®ƒä»¬ã€‚</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">class</span> U <span class="title">f</span><span class="params">()</span></span>; <span class="comment">//è¿™é‡Œçš„ class U ä¼šè§¦å‘åç§°æŸ¥æ‰¾ï¼Œç¼–è¯‘å™¨å…ˆåœ¨ ns ä¸­æŸ¥æ‰¾ Uï¼Œæ²¡æ‰¾åˆ°ã€‚æ¥ç€åœ¨å¤–éƒ¨ä½œç”¨åŸŸï¼ˆå…¨å±€ï¼‰æŸ¥æ‰¾ï¼Œæ‰¾åˆ° ::Uã€‚å› æ­¤ï¼Œè¿™é‡Œçš„ U å¼•ç”¨çš„æ˜¯å…¨å±€çš„ ::Uï¼Œä¸ä¼šéšå¼å£°æ˜æ–°çš„ ns::Uã€‚</span></span><br><span class="line"> </span><br><span class="line">    Y* p;	<span class="comment">//æ­¤æ—¶Yå¹¶ä¸æ˜¯ä¸€ä¸ªä¸å®Œæ•´ç±»å‹ï¼Œè¿˜æ˜¯ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ã€‚</span></span><br><span class="line">    T* q;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å±€éƒ¨ç±»"><a href="#å±€éƒ¨ç±»" class="headerlink" title="å±€éƒ¨ç±»"></a>å±€éƒ¨ç±»</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Local</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¾è®¡ç›®çš„åªæœ‰ä¸€ä¸ªï¼š<strong>ä½œä¸ºâ€œä¸´æ—¶ç­–ç•¥ &#x2F; ä»¿å‡½æ•° &#x2F; å®ç°ç»†èŠ‚â€å­˜åœ¨</strong></p>
<p>å› æ­¤å®ƒï¼š</p>
<ul>
<li>âŒ ä¸èƒ½æœ‰é™æ€æˆå‘˜</li>
<li>âŒ ä¸èƒ½å½“æ¨¡æ¿å‚æ•°</li>
<li>âŒ æ²¡æœ‰é“¾æ¥æ€§</li>
<li>âœ… èƒ½è®¿é—®å¤–å±‚ä½œç”¨åŸŸåå­—</li>
</ul>
<p>ğŸ“Œ STL ç®—æ³•é‡Œçš„ä»¿å‡½æ•°å°±æ˜¯å…¸å‹åº”ç”¨</p>
<h2 id="æˆå‘˜"><a href="#æˆå‘˜" class="headerlink" title="æˆå‘˜"></a>æˆå‘˜</h2><h3 id="éé™æ€æ•°æ®æˆå‘˜"><a href="#éé™æ€æ•°æ®æˆå‘˜" class="headerlink" title="éé™æ€æ•°æ®æˆå‘˜"></a>éé™æ€æ•°æ®æˆå‘˜</h3><h4 id="å£°æ˜-1"><a href="#å£°æ˜-1" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h4><p>åŸºæœ¬çš„ç”³æ˜è§„åˆ™ä¸ºï¼š</p>
<ol>
<li><p><strong>åˆæ³•å£°æ˜å½¢å¼</strong>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> &#123;</span><br><span class="line">    <span class="type">int</span> value;                  <span class="comment">// åŸºç¡€ç±»å‹</span></span><br><span class="line">    std::string name&#123;<span class="string">&quot;default&quot;</span>&#125;;<span class="comment">// å¸¦é»˜è®¤å€¼</span></span><br><span class="line">    <span class="type">double</span>* ptr;                <span class="comment">// æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">int</span>&amp; ref = value;           <span class="comment">// å¼•ç”¨ï¼ˆå¿…é¡»åˆå§‹åŒ–ï¼‰</span></span><br><span class="line">    <span class="type">int</span> arr[<span class="number">3</span>]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;          <span class="comment">// æ•°ç»„</span></span><br><span class="line">    <span class="keyword">struct</span> &#123; <span class="type">int</span> x,y; &#125; point;  <span class="comment">// åŒ¿åç»“æ„ä½“æˆå‘˜</span></span><br><span class="line">    <span class="type">unsigned</span> bits : <span class="number">4</span>;          <span class="comment">// ä½åŸŸ</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


</li>
<li><p><strong>ç¦æ­¢çš„å£°æ˜</strong>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Invalid</span> &#123;</span><br><span class="line">    <span class="keyword">extern</span> <span class="type">int</span> x;       <span class="comment">// âŒ ä¸å…è®¸extern</span></span><br><span class="line">    <span class="keyword">register</span> <span class="type">int</span> y;     <span class="comment">// âŒ ä¸å…è®¸register</span></span><br><span class="line">    <span class="keyword">thread_local</span> <span class="type">int</span> z; <span class="comment">// âŒ éé™æ€æˆå‘˜ä¸èƒ½ç”¨thread_local</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Incomplete</span>;   <span class="comment">// âŒ ä¸èƒ½æœ‰ä¸å®Œæ•´ç±»å‹æˆå‘˜</span></span><br><span class="line">    Invalid self;       <span class="comment">// âŒ ä¸èƒ½åŒ…å«è‡ªèº«ç±»å‹ï¼ˆæŒ‡é’ˆ/å¼•ç”¨å¯ä»¥ï¼‰</span></span><br><span class="line">    <span class="keyword">auto</span> unknown;       <span class="comment">// âŒ ä¸èƒ½ç”¨autoæ¨å¯¼ç±»å‹</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<p>å¯¹äºç‰¹æ®Šçš„æˆå‘˜ä¼šæœ‰ä¸€äº›å¤„ç†ï¼š</p>
<ol>
<li><p><strong>å¼•ç”¨æˆå‘˜</strong>ï¼š</p>
<ul>
<li><p>å¿…é¡»é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–</p>
</li>
<li><p>å¯èƒ½ä¸å ç”¨å­˜å‚¨ç©ºé—´ï¼ˆå®ç°å®šä¹‰ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RefHolder</span> &#123;</span><br><span class="line">      <span class="type">int</span>&amp; ref;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">      <span class="built_in">RefHolder</span>(<span class="type">int</span>&amp; v) : <span class="built_in">ref</span>(v) &#123;&#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>ä½åŸŸæˆå‘˜</strong>ï¼š</p>
<ol>
<li><p>æŒ‡å®šæ¯”ç‰¹ä½æ•°èŠ‚çœç©ºé—´</p>
</li>
<li><p>å®é™…å¸ƒå±€å–å†³äºå®ç°</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Packet</span> &#123;</span><br><span class="line">       <span class="type">unsigned</span> type : <span class="number">4</span>;  <span class="comment">// 4ä½</span></span><br><span class="line">       <span class="type">unsigned</span> flag : <span class="number">1</span>;  <span class="comment">// 1ä½</span></span><br><span class="line">       <span class="type">unsigned</span> : <span class="number">3</span>;       <span class="comment">// æœªå‘½åå¡«å……ä½</span></span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<hr>
<p>å†…å­˜å¸ƒå±€æœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p>
<ol>
<li><p><strong>C++23å‰</strong>ï¼š</p>
<ul>
<li><p>ç›¸åŒè®¿é—®æƒé™çš„æˆå‘˜æŒ‰å£°æ˜é¡ºåºæ’åˆ—</p>
</li>
<li><p>ä¸åŒè®¿é—®æƒé™çš„æˆå‘˜é¡ºåºæœªæŒ‡å®š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pre23</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="type">int</span> a;    <span class="comment">// å¯èƒ½åœ°å€æœ€ä½</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="type">int</span> b;    <span class="comment">// å¯èƒ½è¢«é‡æ–°æ’åˆ—</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="type">int</span> c;    <span class="comment">// ä¿è¯åœ¨aä¹‹å</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>C++23èµ·</strong>ï¼š</p>
<ol>
<li><p>å¼ºåˆ¶æ‰€æœ‰æˆå‘˜æŒ‰å£°æ˜é¡ºåºæ’åˆ—</p>
</li>
<li><p>ä»å…è®¸ä¸åŒè®¿é—®æƒé™çš„æˆå‘˜é—´æ’å…¥å¡«å……</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Post23</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="type">int</span> a;    <span class="comment">// åœ°å€æœ€ä½</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="type">int</span> b;    <span class="comment">// å¿…é¡»åœ¨aå</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="type">int</span> c;    <span class="comment">// å¿…é¡»åœ¨bå</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h4 id="æˆå‘˜åˆå§‹åŒ–"><a href="#æˆå‘˜åˆå§‹åŒ–" class="headerlink" title="æˆå‘˜åˆå§‹åŒ–"></a>æˆå‘˜åˆå§‹åŒ–</h4><p>éé™æ€æ•°æ®æˆå‘˜å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€è¿›è¡Œåˆå§‹åŒ–ï¼š</p>
<ol>
<li><p>åœ¨æ„é€ å‡½æ•°çš„<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/constructor">æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</a>ä¸­ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    std::string s;</span><br><span class="line">    <span class="built_in">S</span>() : <span class="built_in">n</span>(<span class="number">7</span>) &#123;&#125; <span class="comment">//ç›´æ¥åˆå§‹åŒ–nä¸º7ï¼Œé»˜è®¤åˆå§‹åŒ–s</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡<strong>é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨</strong>ï¼Œå®ƒæ˜¯åœ¨æˆå‘˜å£°æ˜ä¸­åŒ…å«çš„å¤§æ‹¬å·æˆ–ç­‰å·<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/initialization">åˆå§‹åŒ–å™¨</a>ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°çš„æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­çœç•¥è¯¥æˆå‘˜æ—¶ä½¿ç”¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">7</span>;	<span class="comment">// ç­‰å·åˆå§‹åŒ–å™¨</span></span><br><span class="line">    std::string s&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;	<span class="comment">// æ‹¬å·åˆå§‹åŒ–å™¨</span></span><br><span class="line">    <span class="built_in">S</span>() &#123;&#125; <span class="comment">// åœ¨æ­¤æ„é€ å‡½æ•°ä¸­ä¼šè‡ªåŠ¨å¤åˆ¶nå’Œså˜é‡åˆ°å®ä½“ä¸­</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å¦‚æœæˆå‘˜å…·æœ‰é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨å¹¶ä¸”ä¹Ÿå‡ºç°åœ¨æ„é€ å‡½æ•°çš„æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œåˆ™è¯¥æ„é€ å‡½æ•°çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨å°†è¢«å¿½ç•¥ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n = ++x;</span><br><span class="line">    <span class="built_in">S</span>() &#123;&#125;                 <span class="comment">// ä½¿ç”¨é»˜è®¤å˜é‡</span></span><br><span class="line">    <span class="built_in">S</span>(<span class="type">int</span> arg) : <span class="built_in">n</span>(arg) &#123;&#125; <span class="comment">// æˆå‘˜åˆå§‹åŒ–</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// æ‰“å°0</span></span><br><span class="line">    S s1;                   <span class="comment">// ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">    std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// æ‰“å°1</span></span><br><span class="line">    <span class="function">S <span class="title">s2</span><span class="params">(<span class="number">7</span>)</span></span>;                <span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰æ„é€ å‡½æ•°</span></span><br><span class="line">    std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; <span class="comment">// æ‰“å°1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½åŸŸæˆå‘˜ä¸å…è®¸ä½¿ç”¨é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ã€‚</p>
</li>
<li><p>æ•°ç»„ç±»å‹çš„æˆå‘˜ä¸èƒ½ä»æˆå‘˜åˆå§‹åŒ–å™¨ä¸­æ¨æ–­å…¶å¤§å°</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">X</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;  <span class="comment">// error</span></span><br><span class="line">    <span class="type">int</span> b[<span class="number">3</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// OK</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ä¸å…è®¸å¯¼è‡´éšå¼å®šä¹‰å°é—­ç±»çš„é»˜è®¤<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/default_constructor">é»˜è®¤æ„é€ å‡½æ•°</a>æˆ–è¯¥æ„é€ å‡½æ•°çš„å¼‚å¸¸è§„èŒƒã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span></span><br><span class="line">&#123;</span><br><span class="line">    node* p = <span class="keyword">new</span> node; <span class="comment">// é”™è¯¯ï¼šä½¿ç”¨äº†éšå¼æˆ–é»˜è®¤çš„ node::node()</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¼šå¯¼è‡´å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼šæˆå‘˜ <code>p</code> çš„åˆå§‹åŒ–éœ€è¦å…ˆæ„é€  <code>node</code> å¯¹è±¡ï¼Œæ„é€  <code>node</code> å¯¹è±¡åˆéœ€è¦å…ˆåˆå§‹åŒ– <code>p</code> æˆå‘˜ï¼Œå½¢æˆæ— é™é€’å½’çš„æ„é€ å¾ªç¯ã€‚</p>
</li>
<li><p>å¼•ç”¨æˆå‘˜ä¸èƒ½åœ¨é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ä¸­ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡ï¼ˆæ³¨æ„ï¼š<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/constructor#Explanation">æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</a>ä¹Ÿå­˜åœ¨ç›¸åŒçš„è§„åˆ™ï¼‰ï¼Œ<strong>å¼•ç”¨æˆå‘˜åˆå§‹åŒ–åŸºæœ¬è§„åˆ™</strong>æ˜¯å¿…é¡»<strong>åœ¨æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–</strong>ï¼Œ<strong>ä¸èƒ½</strong>ä»…é é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ï¼ˆç±»å†…åˆå§‹åŒ–ï¼‰ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">A</span>() = <span class="keyword">default</span>;     <span class="comment">// é»˜è®¤æ„é€ å‡½æ•° OK</span></span><br><span class="line">    <span class="built_in">A</span>(<span class="type">int</span> v) : <span class="built_in">v</span>(v) &#123;&#125; <span class="comment">// å¸¦å‚æ„é€ å‡½æ•° OK</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span>&amp; v = <span class="number">42</span>; <span class="comment">// é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ï¼ˆå±é™©ï¼ï¼‰  OK</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">A a1;   <span class="comment">// é”™è¯¯ï¼šå°è¯•å°†å¼•ç”¨vç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡42</span></span><br><span class="line">		<span class="comment">// ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•° A()</span></span><br><span class="line">		<span class="comment">// æ²¡æœ‰åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ– v</span></span><br><span class="line">		<span class="comment">// å›é€€åˆ°é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ = 42</span></span><br><span class="line">		<span class="comment">// å‡ºé”™ï¼Œå°†å¼•ç”¨ç»‘å®šåˆ°ä¸´æ—¶æ•´æ•°å­—é¢é‡ï¼ˆå³å€¼42ï¼‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">A <span class="title">a2</span><span class="params">(<span class="number">1</span>)</span></span>; 	<span class="comment">// ç¼–è¯‘é€šè¿‡ä½†äº§ç”Ÿæ‚¬å‚å¼•ç”¨</span></span><br><span class="line">         	<span class="comment">// ä½¿ç”¨ A(int) æ„é€ å‡½æ•°</span></span><br><span class="line">			<span class="comment">// åˆå§‹åŒ–åˆ—è¡¨ : v(v) å°†å¼•ç”¨ç»‘å®šåˆ°å‚æ•° vï¼ˆå±€éƒ¨å˜é‡ï¼‰</span></span><br><span class="line">			<span class="comment">// é—®é¢˜ï¼šæ„é€ å‡½æ•°ç»“æŸåå‚æ•° v è¢«é”€æ¯ï¼Œæˆå‘˜ v æˆä¸ºæ‚¬å‚å¼•ç”¨</span></span><br><span class="line">			<span class="comment">// é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ = 42 è¢«å¿½ç•¥ï¼ˆå› ä¸º v å·²åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­å‡ºç°ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœå¼•ç”¨æˆå‘˜ç”±å…¶é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨åˆå§‹åŒ–æˆå‘˜å…·æœ‰é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨å¹¶ä¸”å…¶ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/expressions#Potentially-evaluated_expressions">æ½œåœ¨æ±‚å€¼</a>å­è¡¨è¾¾å¼æ˜¯ä¼šä½¿ç”¨è¯¥é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨çš„<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/aggregate_initialization">èšåˆåˆå§‹åŒ–</a>ï¼Œåˆ™ç¨‹åºæ ¼å¼é”™è¯¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span>;</span><br><span class="line"><span class="keyword">extern</span> A a;	<span class="comment">// å‰å‘å£°æ˜å’Œå¤–éƒ¨å£°æ˜</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> A&amp; a1&#123;A&#123;a, a&#125;&#125;; <span class="comment">// åˆæ³•</span></span><br><span class="line">    <span class="type">const</span> A&amp; a2&#123;A&#123;&#125;&#125;;     <span class="comment">// éæ³•</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">A a&#123;a, a&#125;;                <span class="comment">// åˆæ³•</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å½“å¼•ç”¨æˆå‘˜é€šè¿‡é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨åˆå§‹åŒ–æ—¶</li>
<li>å¦‚æœè¯¥åˆå§‹åŒ–æ¶‰åŠèšåˆåˆå§‹åŒ–</li>
<li>ä¸”èšåˆåˆå§‹åŒ–ä¼šç›´æ¥æˆ–é—´æ¥ä½¿ç”¨è¿™ä¸ªé»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨</li>
<li>åˆ™ç¨‹åºæ ¼å¼é”™è¯¯ï¼ˆill-formedï¼‰</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><p>éé™æ€æ•°æ®æˆå‘˜æˆ–éé™æ€æˆå‘˜å‡½æ•°çš„åç§°åªèƒ½å‡ºç°åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µä¸­ï¼š</p>
<ol>
<li><p>ä½œä¸ºç±»æˆå‘˜è®¿é—®è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­è¯¥ç±»å…·æœ‰æ­¤æˆå‘˜æˆ–æ´¾ç”Ÿè‡ªå…·æœ‰æ­¤æˆå‘˜çš„ç±»ï¼ŒåŒ…æ‹¬å½“éé™æ€æˆå‘˜åç§°åœ¨å…è®¸<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/this"><code>this</code></a>çš„ä»»ä½•ä¸Šä¸‹æ–‡ä¸­ï¼ˆåœ¨æˆå‘˜å‡½æ•°ä½“å†…éƒ¨ã€åœ¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­ã€åœ¨ç±»å†…é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ä¸­ï¼‰ä½¿ç”¨æ—¶å‡ºç°çš„éšå¼this-&gt;æˆå‘˜è®¿é—®è¡¨è¾¾å¼ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span> x = m;  <span class="comment">// âœ… é»˜è®¤åˆå§‹åŒ–å™¨ä¸­ä½¿ç”¨æˆå‘˜å˜é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">S</span>(<span class="type">int</span> i) : <span class="built_in">m</span>(i), <span class="built_in">n</span>(m)  <span class="comment">// âœ… åˆå§‹åŒ–åˆ—è¡¨ä¸­ä½¿ç”¨æˆå‘˜</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">f</span>();  <span class="comment">// âœ… æ˜¾å¼æˆå‘˜è®¿é—®</span></span><br><span class="line">        <span class="built_in">f</span>();        <span class="comment">// âœ… éšå¼æˆå‘˜è®¿é—®</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”¨äºå½¢æˆ<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/pointer">æŒ‡å‘éé™æ€æˆå‘˜çš„æŒ‡é’ˆ</a>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="type">int</span> m;       <span class="comment">// æ•°æ®æˆå‘˜</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;    <span class="comment">// æˆå‘˜å‡½æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®æˆå‘˜æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> S::*p = &amp;S::m;       <span class="comment">// p æ˜¯æŒ‡å‘ S çš„ int ç±»å‹æˆå‘˜çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆå‘˜å‡½æ•°æŒ‡é’ˆ</span></span><br><span class="line"><span class="built_in">void</span> (S::*fp)() = &amp;S::f; <span class="comment">// fp æ˜¯æŒ‡å‘ S çš„æ— å‚æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ï¼ˆä»…é™æ•°æ®æˆå‘˜ï¼Œä¸åŒ…æ‹¬æˆå‘˜å‡½æ•°ï¼‰åœ¨<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/expressions#Unevaluated_expressions">æœªæ±‚å€¼æ“ä½œæ•°</a>ä¸­ä½¿ç”¨æ—¶ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> std::<span class="type">size_t</span> sz = <span class="keyword">sizeof</span> m; <span class="comment">// OK: m in unevaluated operand</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">std::<span class="type">size_t</span> j = <span class="built_in">sizeof</span>(S::m + <span class="number">42</span>); <span class="comment">// OK: even though there is no &quot;this&quot; object for m</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="éé™æ€æˆå‘˜å‡½æ•°"><a href="#éé™æ€æˆå‘˜å‡½æ•°" class="headerlink" title="éé™æ€æˆå‘˜å‡½æ•°"></a>éé™æ€æˆå‘˜å‡½æ•°</h3><p>ç®€å•æ¥è¯´ï¼Œéé™æ€æˆå‘˜å‡½æ•°å°±æ˜¯<strong>å±äºå¯¹è±¡çš„å‡½æ•°</strong>ã€‚</p>
<ul>
<li><strong>å¯¹æ¯”é™æ€å‡½æ•°ï¼š</strong> é™æ€å‡½æ•°ï¼ˆ<code>static</code>ï¼‰å±äºâ€œç±»â€æœ¬èº«ï¼Œåƒæ˜¯ä¸ªå…¨å±€å·¥å…·ï¼›è€Œéé™æ€å‡½æ•°å¿…é¡»é€šè¿‡â€œå¯¹è±¡â€æ¥è°ƒç”¨ï¼Œå› ä¸ºå®ƒè¦æ“ä½œå…·ä½“å¯¹è±¡çš„æ•°æ®ã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong> æ¯ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªéšè—çš„å®ç‰©â€”â€”<code>this</code> æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘å½“å‰æ­£åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ã€‚</li>
</ul>
<p>å…¶ä¸­æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ol>
<li><p><code>this</code> æŒ‡é’ˆçš„éšå¼è½¬æ¢</p>
<p>å½“ä½ ç¼–å†™ <code>n = 1;</code> æ—¶ï¼Œç¼–è¯‘å™¨åœ¨å¹•åå…¶å®æŠŠå®ƒå˜æˆäº† <code>this-&gt;n = 1;</code>ï¼Œè¿™ç¡®ä¿å‡½æ•°çŸ¥é“å®ƒç°åœ¨æ”¹çš„æ˜¯å“ªä¸ªå¯¹è±¡çš„æ•°æ®ã€‚</p>
</li>
<li><p>CV é™å®šç¬¦ï¼ˆconst å’Œ volatileï¼‰</p>
<ul>
<li><p><strong><code>const</code> æˆå‘˜å‡½æ•°ï¼š</strong> æ‰¿è¯ºâ€œæˆ‘åªè¯»ï¼Œä¸æ”¹å¯¹è±¡çš„æ•°æ®â€ã€‚</p>
</li>
<li><p><strong>é‡è½½ï¼š</strong> ä½ å¯ä»¥åŒæ—¶å®šä¹‰ä¸€ä¸ª <code>const</code> ç‰ˆæœ¬å’Œä¸€ä¸ªé <code>const</code> ç‰ˆæœ¬çš„åŒåå‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Array</span> &#123;</span><br><span class="line">    <span class="type">int</span> data[<span class="number">10</span>];</span><br><span class="line">    <span class="type">int</span> <span class="keyword">operator</span>[](<span class="type">int</span> i) <span class="type">const</span> &#123; <span class="keyword">return</span> data[i]; &#125; <span class="comment">// å¸¸é‡å¯¹è±¡è°ƒç”¨ï¼Œåªè¯»</span></span><br><span class="line">    <span class="type">int</span>&amp; <span class="keyword">operator</span>[](<span class="type">int</span> i) &#123; <span class="keyword">return</span> data[i]; &#125;      <span class="comment">// éå¸¸é‡å¯¹è±¡è°ƒç”¨ï¼Œå¯æ”¹</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å¼•ç”¨é™å®šç¬¦ (Ref-qualifiers) <code>&amp;</code> å’Œ <code>&amp;&amp;</code></p>
<p>è¿™æ˜¯ C++11 å¼•å…¥çš„ï¼Œç”¨æ¥é™åˆ¶å‡½æ•°åªèƒ½ç”±â€œå·¦å€¼â€æˆ–â€œå³å€¼â€è°ƒç”¨ã€‚</p>
<ul>
<li><p><code>void f() &amp;</code> : åªèƒ½ç”±æœ‰åå­—çš„å˜é‡ï¼ˆå·¦å€¼ï¼‰è°ƒç”¨ã€‚</p>
</li>
<li><p><code>void f() &amp;&amp;</code> : åªèƒ½ç”±ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰è°ƒç”¨ã€‚</p>
</li>
<li><p>é˜²æ­¢ä½ æ„å¤–ç»™ä¸€ä¸ªé©¬ä¸Šå°±è¦é”€æ¯çš„ä¸´æ—¶å¯¹è±¡èµ‹å€¼ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> &amp;  </span>&#123; std::cout &lt;&lt; <span class="string">&quot;æˆ‘åœ¨ä¸ºæŒä¹…çš„å˜é‡æœåŠ¡ (Lvalue)\n&quot;</span>; &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> &amp;&amp; </span>&#123; std::cout &lt;&lt; <span class="string">&quot;æˆ‘åœ¨ä¸ºä¸´æ—¶çš„å¯¹è±¡æœåŠ¡ (Rvalue)\n&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    S s;</span><br><span class="line">    s.<span class="built_in">f</span>();            <span class="comment">// s æœ‰åå­—ï¼Œè°ƒç”¨ &amp; ç‰ˆæœ¬</span></span><br><span class="line">    <span class="built_in">S</span>().<span class="built_in">f</span>();          <span class="comment">// S() æ˜¯ä¸´æ—¶äº§ç”Ÿçš„ï¼Œè°ƒç”¨ &amp;&amp; ç‰ˆæœ¬</span></span><br><span class="line">    std::<span class="built_in">move</span>(s).<span class="built_in">f</span>(); <span class="comment">// æŠŠ s å¼ºåˆ¶å½“æˆä¸´æ—¶å¯¹è±¡ï¼Œè°ƒç”¨ &amp;&amp; ç‰ˆæœ¬</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th><strong>ç‰¹æ€§åˆ†ç±»</strong></th>
<th><strong>è¯­æ³•ç¤ºä¾‹</strong></th>
<th><strong>æ ¸å¿ƒç›®çš„</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>åŸºç¡€è°ƒç”¨</strong></td>
<td><code>obj.func()</code></td>
<td>æ“ä½œç‰¹å®šå®ä¾‹çš„æ•°æ®</td>
</tr>
<tr>
<td><strong>Const é™å®š</strong></td>
<td><code>void f() const</code></td>
<td>ä¿è¯ä¸ä¿®æ”¹å¯¹è±¡æˆå‘˜ï¼Œå¢åŠ ä»£ç å®‰å…¨æ€§</td>
</tr>
<tr>
<td><strong>è™šå‡½æ•°</strong></td>
<td><code>virtual void f()</code></td>
<td>å®ç°å¤šæ€ï¼ˆå­ç±»å¯ä»¥é‡å†™çˆ¶ç±»è¡Œä¸ºï¼‰</td>
</tr>
<tr>
<td><strong>å¼•ç”¨é™å®š</strong></td>
<td><code>void f() &amp;&amp;</code></td>
<td>åŒºåˆ†ä¸´æ—¶å¯¹è±¡å’ŒæŒä¹…å¯¹è±¡ï¼Œä¼˜åŒ–æ€§èƒ½</td>
</tr>
<tr>
<td><strong>æ˜¾å¼å¯¹è±¡(C++23)</strong></td>
<td><code>void f(this X self)</code></td>
<td>ç®€åŒ–æ¨¡æ¿ç¼–å†™ï¼Œè®©æˆå‘˜å‡½æ•°åƒæ™®é€šå‡½æ•°ä¸€æ ·å·¥ä½œ</td>
</tr>
</tbody></table>
<blockquote>
<p>[!note]</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ol>
<li><strong>æœªå®šä¹‰è¡Œä¸ºï¼š</strong> æ°¸è¿œä¸è¦åœ¨ç©ºæŒ‡é’ˆï¼ˆ<code>nullptr</code>ï¼‰ä¸Šè°ƒç”¨éé™æ€æˆå‘˜å‡½æ•°ã€‚è™½ç„¶æœ‰æ—¶çœ‹èµ·æ¥èƒ½è·‘ï¼Œä½†è¿™æ˜¯æåº¦å±é™©çš„è¿è§„æ“ä½œã€‚</li>
<li><strong>æ„é€ &#x2F;ææ„å‡½æ•°ï¼š</strong> è™½ç„¶å®ƒä»¬ä¹Ÿæ˜¯æˆå‘˜å‡½æ•°ï¼Œä½†å®ƒä»¬æœ‰ç‰¹æ®Šçš„è¯­æ³•ï¼ˆæ²¡æœ‰è¿”å›å€¼ï¼‰ï¼Œä¸éµå¾ªæ™®é€šçš„éé™æ€æˆå‘˜å‡½æ•°æŸ¥æ‰¾è§„åˆ™ã€‚</li>
<li><strong>å†…è”å®šä¹‰ï¼š</strong> åœ¨ç±»å†…éƒ¨ç›´æ¥å†™å‡ºå‡½æ•°ä½“çš„ï¼ˆå¦‚ <code>int f() &#123; return 1; &#125;</code>ï¼‰è‡ªåŠ¨è¢«è§†ä¸º <code>inline</code>ï¼Œæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚</li>
</ol>
</blockquote>
<h3 id="é™æ€æˆå‘˜"><a href="#é™æ€æˆå‘˜" class="headerlink" title="é™æ€æˆå‘˜"></a>é™æ€æˆå‘˜</h3><ol>
<li><p>é™æ€æˆå‘˜çš„åŸºæœ¬ç‰¹ç‚¹</p>
<ol>
<li><strong>ä¸å±äºå•ä¸ªå¯¹è±¡</strong>ï¼š<ul>
<li>æ™®é€šæˆå‘˜ï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å‰¯æœ¬ï¼Œæ¯ä¸ªå¯¹è±¡ç‹¬æœ‰ï¼ˆå¦‚äººçš„å§“åï¼‰</li>
<li>é™æ€æˆå‘˜ï¼šæ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‰¯æœ¬ï¼Œæ‰€æœ‰å¯¹è±¡å…±äº«ï¼ˆå¦‚äººçš„æ€»äººå£æ•°ï¼‰</li>
</ul>
</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š<ul>
<li>åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œç¨‹åºç»“æŸæ—¶é”€æ¯</li>
<li>ä¸ç±»çš„å¯¹è±¡æ˜¯å¦å­˜åœ¨æ— å…³</li>
</ul>
</li>
<li><strong>è®¿é—®æ–¹å¼</strong>ï¼š<ul>
<li>å¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼ˆ<code>ç±»å::é™æ€æˆå‘˜</code>ï¼‰</li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®ï¼ˆ<code>å¯¹è±¡.é™æ€æˆå‘˜</code>ï¼‰</li>
</ul>
</li>
</ol>
</li>
<li><p>é™æ€æ•°æ®æˆå‘˜</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count;  <span class="comment">// å£°æ˜é™æ€æˆå‘˜</span></span><br><span class="line">    <span class="built_in">Counter</span>() &#123; count++; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Counter::count = <span class="number">0</span>;  <span class="comment">// å®šä¹‰å¹¶åˆå§‹åŒ–ï¼ˆå¿…é¡»åœ¨ç±»å¤–ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Counter c1, c2, c3;</span><br><span class="line">    cout &lt;&lt; Counter::count;  <span class="comment">// è¾“å‡º3ï¼ˆå…±äº«è®¡æ•°ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç±»å†…å£°æ˜ï¼Œç±»å¤–å®šä¹‰ï¼ˆéœ€è¦ç±»å‹å’Œç±»åé™å®šï¼‰</li>
<li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªcount</li>
<li>å¸¸ç”¨äºç»Ÿè®¡å¯¹è±¡æ•°é‡ã€å…±äº«é…ç½®ç­‰åœºæ™¯</li>
</ul>
</li>
<li><p>é™æ€æˆå‘˜å‡½æ•°</p>
</li>
</ol>
   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MathUtils</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;  <span class="comment">// é™æ€æˆå‘˜å‡½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; MathUtils::<span class="built_in">add</span>(<span class="number">2</span>, <span class="number">3</span>);  <span class="comment">// æ— éœ€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ï¼ˆå› ä¸ºæ²¡æœ‰thisæŒ‡é’ˆï¼‰</li>
<li>ä¸èƒ½ä½¿ç”¨const&#x2F;volatile&#x2F;virtual&#x2F;å¼•ç”¨ç±»å‹é™å®š</li>
<li>å¸¸ç”¨äºå·¥å…·ç±»å‡½æ•°</li>
</ul>
<ol start="4">
<li><p>é™æ€æˆå‘˜çš„åˆå§‹åŒ–</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> x = <span class="number">10</span>;  <span class="comment">// åªæœ‰consté™æ€æ•´å‹å¯ä»¥ç±»å†…åˆå§‹åŒ–</span></span><br><span class="line">    <span class="type">static</span> <span class="type">double</span> y;          <span class="comment">// å…¶ä»–ç±»å‹å¿…é¡»ç±»å¤–å®šä¹‰</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> MyClass::y = <span class="number">3.14</span>;     <span class="comment">// æ­£ç¡®åˆå§‹åŒ–æ–¹å¼</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="è®¿é—®è¯´æ˜ç¬¦"><a href="#è®¿é—®è¯´æ˜ç¬¦" class="headerlink" title="è®¿é—®è¯´æ˜ç¬¦"></a>è®¿é—®è¯´æ˜ç¬¦</h2><p>è®¿é—®è¯´æ˜ç¬¦<strong>ç”¨äºæ§åˆ¶ï¼šè°å¯ä»¥è®¿é—®ç±»ä¸­çš„å“ªäº›æˆå‘˜ã€‚</strong></p>
<p>C++ ä¸­æœ‰ä¸‰ç§è®¿é—®è¯´æ˜ç¬¦ï¼š</p>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>public</code></td>
<td>å…¬æœ‰ï¼šä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®</td>
</tr>
<tr>
<td><code>protected</code></td>
<td>å—ä¿æŠ¤ï¼šæ´¾ç”Ÿç±»å¯ä»¥è®¿é—®</td>
</tr>
<tr>
<td><code>private</code></td>
<td>ç§æœ‰ï¼šåªèƒ½ç±»è‡ªå·±è®¿é—®</td>
</tr>
</tbody></table>
<p>å®ƒä»¬ä¸»è¦å‡ºç°åœ¨ <strong>ä¸¤ä¸ªä½ç½®</strong>ï¼š</p>
<ol>
<li><strong>ç±» &#x2F; ç»“æ„ä½“ &#x2F; è”åˆä½“çš„æˆå‘˜åŒº</strong></li>
<li><strong>æ´¾ç”Ÿç±»å£°æ˜ä¸­çš„åŸºç±»åˆ—è¡¨ï¼ˆç»§æ‰¿æ–¹å¼ï¼‰</strong></li>
</ol>
<p>æˆå‘˜åŒºçš„åŸºæœ¬è¯­æ³•ä¸º</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> x;      <span class="comment">// å…¬æœ‰æˆå‘˜</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> y;      <span class="comment">// ä¿æŠ¤æˆå‘˜</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> z;      <span class="comment">// ç§æœ‰æˆå‘˜</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>è§„åˆ™</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªè®¿é—®è¯´æ˜ç¬¦<strong>å½±å“å®ƒåé¢å‡ºç°çš„æ‰€æœ‰æˆå‘˜</strong></li>
<li>å¯ä»¥å‡ºç°<strong>ä»»æ„æ¬¡ã€ä»»æ„é¡ºåº</strong></li>
<li>åªå½±å“â€œè®¿é—®æƒé™â€ï¼Œä¸å½±å“â€œæ˜¯å¦å­˜åœ¨â€</li>
</ul>
<hr>
<ol>
<li><p><code>public</code> æˆå‘˜ â€”â€” å¯¹å¤–æ¥å£</p>
<ol>
<li><p><strong>ä»»ä½•åœ°æ–¹</strong>éƒ½å¯ä»¥è®¿é—®</p>
</li>
<li><p>æ„æˆç±»çš„â€œå…¬å…± APIâ€</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">S s;</span><br><span class="line">s.n = <span class="number">1</span>;     <span class="comment">// OK</span></span><br><span class="line">s.<span class="built_in">f</span>();       <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>[!tip]</p>
<p><strong>è®¾è®¡å«ä¹‰</strong>ï¼šâ€œè¿™æ˜¯æˆ‘å¸Œæœ›ç±»çš„ä½¿ç”¨è€…çœ‹åˆ°å’Œä½¿ç”¨çš„ä¸œè¥¿ã€‚â€</p>
</blockquote>
</li>
</ol>
</li>
<li><p><code>protected</code> æˆå‘˜ â€”â€” ç»™å­ç±»ç”¨</p>
<ol>
<li><p>æœ¬ç±»çš„æˆå‘˜å‡½æ•° &#x2F; å‹å…ƒå¯ä»¥è®¿é—®</p>
</li>
<li><p><strong>æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•° &#x2F; å‹å…ƒ</strong>ï¼Œä½†<strong>åªèƒ½é€šè¿‡æ´¾ç”Ÿç±»å¯¹è±¡è®¿é—®</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(Derived&amp; d, Base&amp; b)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ++i;     <span class="comment">// OKï¼ˆthis æ˜¯ Derivedï¼‰</span></span><br><span class="line">        ++d.i;   <span class="comment">// OKï¼ˆd æ˜¯ Derivedï¼‰</span></span><br><span class="line">        <span class="comment">// ++b.i; // âŒ é”™è¯¯ï¼ˆb æ˜¯ Baseï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>[!tip]</p>
<p>æ´¾ç”Ÿç±»åªèƒ½é€šè¿‡ <strong>â€œæ´¾ç”Ÿç±»å¯¹è±¡â€</strong> è®¿é—®åŸºç±»çš„ protected æˆå‘˜ï¼ŒâŒ ä¸èƒ½é€šè¿‡ Base ç±»å‹å¯¹è±¡è®¿é—®ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢â€œè¶Šæƒä¿®æ”¹å…¶ä»–æ´¾ç”Ÿç±»çš„å†…éƒ¨çŠ¶æ€â€ã€‚</p>
</blockquote>
</li>
</ol>
</li>
<li><p><code>private</code> æˆå‘˜ â€”â€” å®Œå…¨å°è£…</p>
<ol>
<li><p>æœ¬ç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®</p>
</li>
<li><p>æœ¬ç±»çš„å‹å…ƒå¯ä»¥è®¿é—®</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">S</span>(<span class="type">const</span> S&amp; other) : <span class="built_in">n</span>(other.n) &#123;&#125; <span class="comment">// OK</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">S a, b;</span><br><span class="line"><span class="comment">// b.n = 3; // âŒ é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>[!tip]</p>
<ul>
<li>ä¸åŒºåˆ†â€œæ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡â€</li>
<li>åªè¦æ˜¯åœ¨ <code>S</code> çš„æˆå‘˜å‡½æ•°é‡Œï¼Œå°±èƒ½è®¿é—®ä»»ä½• <code>S</code> å¯¹è±¡çš„ç§æœ‰æˆå‘˜</li>
</ul>
</blockquote>
</li>
</ol>
</li>
</ol>
<blockquote>
<p>[!important]</p>
<ul>
<li>publicï¼šç»™â€œä»»ä½•äººâ€ç”¨</li>
<li>protectedï¼šç»™â€œå­ç±»â€ç”¨</li>
<li>privateï¼šç»™â€œè‡ªå·±â€ç”¨</li>
</ul>
</blockquote>
<p>ä¸åŒç±»å‹æœ‰ç€ä¸åŒçš„é»˜è®¤è®¿é—®æƒé™çš„ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>é»˜è®¤æˆå‘˜è®¿é—®</th>
<th>é»˜è®¤ç»§æ‰¿æ–¹å¼</th>
</tr>
</thead>
<tbody><tr>
<td><code>class</code></td>
<td><code>private</code></td>
<td><code>private</code></td>
</tr>
<tr>
<td><code>struct</code></td>
<td><code>public</code></td>
<td><code>public</code></td>
</tr>
<tr>
<td><code>union</code></td>
<td><code>public</code></td>
<td>â€”</td>
</tr>
</tbody></table>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x; <span class="comment">// private</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> y; <span class="comment">// public</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<p>åœ¨ç»§æ‰¿æ—¶ï¼Œè®¿é—®è¯´æ˜ç¬¦ä¹Ÿä¼šé™åˆ¶è®¿é—®æƒé™</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">protected</span> Base &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">private</span> Base &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„è®¿é—®è¯´æ˜ç¬¦ä¸»è¦æ§åˆ¶çš„æ˜¯<strong>åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­â€œå˜æˆä»€ä¹ˆæƒé™â€</strong>ï¼Œâš ï¸ <strong>å®ƒä¸å½±å“åŸºç±»å†…éƒ¨çš„è®¿é—®è§„åˆ™</strong></p>
<p>å‡è®¾ <code>Base</code> ä¸­æœ‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:    <span class="type">int</span> pub;</span><br><span class="line"><span class="keyword">protected</span>: <span class="type">int</span> pro;</span><br><span class="line"><span class="keyword">private</span>:   <span class="type">int</span> pri;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆåœ¨ç»§æ‰¿æ—¶ï¼š</p>
<table>
<thead>
<tr>
<th>ç»§æ‰¿æ–¹å¼</th>
<th><code>pub</code> åœ¨ Derived ä¸­</th>
<th><code>pro</code> åœ¨ Derived ä¸­</th>
<th><code>pri</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>public</code></td>
<td>public</td>
<td>protected</td>
<td>ä¸å¯è®¿é—®</td>
</tr>
<tr>
<td><code>protected</code></td>
<td>protected</td>
<td>protected</td>
<td>ä¸å¯è®¿é—®</td>
</tr>
<tr>
<td><code>private</code></td>
<td>private</td>
<td>private</td>
<td>ä¸å¯è®¿é—®</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>é“å¾‹</strong>ï¼šâ— <strong>åŸºç±»çš„ private æˆå‘˜ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸èƒ½è¢«æ´¾ç”Ÿç±»è®¿é—®</strong></p>
</blockquote>
<blockquote>
<p>[!tip]</p>
<p>ä¸ºä»€ä¹ˆè¦æœ‰ protected &#x2F; private ç»§æ‰¿ï¼Ÿ</p>
<p><strong>private ç»§æ‰¿è¡¨ç¤ºä¸€ç§â€œå®ç°å¤ç”¨ï¼ˆis-implemented-in-terms-ofï¼‰å…³ç³»â€ï¼Œè€Œä¸æ˜¯â€œç±»å‹å…³ç³»ï¼ˆis-aï¼‰â€ã€‚</strong></p>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li><p><code>public</code> ç»§æ‰¿ï¼š<strong>è¯­ä¹‰ä¸Šçš„â€œæ˜¯ä¸€ä¸ªâ€</strong></p>
<ul>
<li><p><strong>â€œDerived æ˜¯ä¸€ç§ Baseâ€</strong></p>
</li>
<li><p>æ”¯æŒå¤šæ€</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(Animal&amp; a)</span></span>;</span><br><span class="line"></span><br><span class="line">Dog d;</span><br><span class="line"><span class="built_in">foo</span>(d); <span class="comment">// OKï¼ˆå¤šæ€ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ»¡è¶³â€œis-aâ€å…³ç³»</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line">      </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™æ„å‘³ç€ï¼š</p>
<ol>
<li><strong>Dog æ˜¯ä¸€ç§ Animal</strong></li>
<li><strong>ä»»ä½•éœ€è¦ Animal çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ç”¨ Dog</strong></li>
</ol>
<blockquote>
<p>[!note]</p>
<p>æ´¾ç”Ÿç±»å¯¹è±¡å¯ä»¥å½“ä½œåŸºç±»å¯¹è±¡ä½¿ç”¨</p>
</blockquote>
</li>
</ul>
</li>
<li><p><code>private</code> ç»§æ‰¿ï¼š<strong>å®ç°ä¸Šçš„â€œç”¨ä¸€ä¸‹â€</strong></p>
<ul>
<li><p><strong>â€œDerived ç”¨åˆ°äº† Base çš„å®ç°ï¼Œä½†ä¸æ˜¯ Baseâ€</strong></p>
<p>çœ‹åŒæ ·çš„ä»£ç ï¼Œæ¢æˆ privateï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">private</span> Animal &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å‘ç”Ÿäº†<strong>ä¸‰ä¸ªæ ¹æœ¬å˜åŒ–</strong>ã€‚</p>
<ol>
<li><p>å¯¹å¤–ï¼šDog ä¸å†æ˜¯ Animal</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dog d;</span><br><span class="line"><span class="comment">// Animal* p = &amp;d; // âŒ ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p><strong>å¤–éƒ¨ä»£ç æ ¹æœ¬ä¸çŸ¥é“ Dog ç»§æ‰¿äº† Animal</strong>(â€œåŸºç±»æ¥å£ä¸ä¼šæš´éœ²ç»™å¤–éƒ¨â€)</p>
</li>
<li><p>å¯¹å†…ï¼šDog ä»ç„¶å¯ä»¥ä½¿ç”¨ Animal çš„å®ç°</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">private</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">bark</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">speak</span>(); <span class="comment">// OKï¼šAnimal çš„ public / protected æˆå‘˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li>Dog <strong>å†…éƒ¨å¯ä»¥å¤ç”¨ Animal çš„ä»£ç </strong></li>
<li>ä½† <strong>Dog çš„ä½¿ç”¨è€…çœ‹ä¸åˆ° Animal çš„ä»»ä½•æ¥å£</strong></li>
</ul>
</li>
<li><p>è¯­ä¹‰å˜åŒ–</p>
<p>ç°åœ¨çš„å…³ç³»æ˜¯ï¼š</p>
<ul>
<li><strong>Dog ä¸æ˜¯ Animal</strong></li>
<li><em>Dog åªæ˜¯â€œç”¨ Animal çš„åŠŸèƒ½å®ç°è‡ªå·±â€</em>*</li>
</ul>
<p>è¿™å°±ä¸æ˜¯ is-aï¼Œè€Œæ˜¯<strong>is-implemented-in-terms-of</strong></p>
</li>
</ol>
</li>
<li><p>åƒâ€œç»„åˆçš„æ›¿ä»£æ–¹æ¡ˆâ€</p>
</li>
<li><p>åŸºç±»æ¥å£ä¸ä¼šæš´éœ²ç»™å¤–éƒ¨</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<p>å¤šç»§æ‰¿æ—¶ï¼Œå–â€œæƒé™æœ€é«˜çš„è·¯å¾„â€</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> : <span class="keyword">private</span> <span class="keyword">virtual</span> W &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span>  <span class="keyword">virtual</span> W &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> A, <span class="keyword">public</span> B</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        W::<span class="built_in">f</span>(); <span class="comment">// OKï¼ˆé€šè¿‡ Bï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="ç‰¹æ®Šæˆå‘˜å‡½æ•°"><a href="#ç‰¹æ®Šæˆå‘˜å‡½æ•°" class="headerlink" title="ç‰¹æ®Šæˆå‘˜å‡½æ•°"></a>ç‰¹æ®Šæˆå‘˜å‡½æ•°</h2><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æ„é€ å‡½æ•°æ˜¯**â€œè´Ÿè´£åˆå§‹åŒ–å¯¹è±¡çŠ¶æ€â€çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ã€‚**å®ƒçš„èŒè´£åªæœ‰ä¸€ä¸ªï¼š<strong>æŠŠå¯¹è±¡ä»â€œä¸€å—åŸå§‹å†…å­˜â€å˜æˆâ€œä¸€ä¸ªåˆæ³•å¯ç”¨çš„å¯¹è±¡â€ã€‚</strong></p>
<p>æ„é€ å‡½æ•°çš„åŸºæœ¬ç‰¹å¾ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>åå­—</td>
<td>å’Œç±»åç›¸åŒ</td>
</tr>
<tr>
<td>è¿”å›ç±»å‹</td>
<td><strong>æ²¡æœ‰</strong></td>
</tr>
<tr>
<td>æ˜¯å¦èƒ½ç›´æ¥è°ƒç”¨</td>
<td>âŒ ä¸èƒ½</td>
</tr>
<tr>
<td>è°ƒç”¨æ—¶æœº</td>
<td>å¯¹è±¡åˆå§‹åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨</td>
</tr>
<tr>
<td>æ˜¯å¦é™æ€</td>
<td>âŒ ä¸èƒ½æ˜¯ static</td>
</tr>
</tbody></table>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">S</span>();      <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">S</span>(<span class="type">int</span> x); <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ„é€ å‡½æ•°æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>é»˜è®¤æ„é€ å‡½æ•°</td>
<td><code>S()</code></td>
</tr>
<tr>
<td>è½¬æ¢æ„é€ å‡½æ•°</td>
<td><code>S(int)</code>ï¼ˆé explicitï¼‰</td>
</tr>
<tr>
<td>æ‹·è´æ„é€ å‡½æ•°</td>
<td><code>S(const S&amp;)</code></td>
</tr>
<tr>
<td>ç§»åŠ¨æ„é€ å‡½æ•°</td>
<td><code>S(S&amp;&amp;)</code></td>
</tr>
<tr>
<td>constexpr æ„é€ </td>
<td>å¯ç”¨äºå¸¸é‡è¡¨è¾¾å¼</td>
</tr>
<tr>
<td>explicit æ„é€ </td>
<td>ç¦æ­¢éšå¼è½¬æ¢</td>
</tr>
</tbody></table>
<p>æ„é€ å‡½æ•°åšäº†ä¸¤ä»¶äº‹ï¼Œå½“ä½ å†™ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">S</span>(<span class="type">int</span> x)</span><br><span class="line">&#123;</span><br><span class="line">    n = x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œ<strong>çœŸå®å‘ç”Ÿçš„æ˜¯ï¼š</strong></p>
<ol>
<li><strong>å…ˆåˆå§‹åŒ–æˆå‘˜</strong></li>
<li><strong>å†æ‰§è¡Œæ„é€ å‡½æ•°ä½“</strong></li>
</ol>
<p>âš ï¸ æˆå‘˜çš„åˆå§‹åŒ–<strong>ä¸åœ¨å‡½æ•°ä½“é‡Œå‘ç”Ÿ</strong>ã€‚</p>
<p>æ„é€ å‡½æ•°æœ‰ä»¥ä¸‹å‡ æ¡é“å¾‹;</p>
<ol>
<li>æˆå‘˜åˆå§‹åŒ–å‘ç”Ÿåœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰</li>
<li>const &#x2F; å¼•ç”¨ &#x2F; åŸºç±»å¿…é¡»ç”¨åˆå§‹åŒ–åˆ—è¡¨</li>
<li>åˆå§‹åŒ–é¡ºåºåªçœ‹â€œå£°æ˜é¡ºåºâ€</li>
<li>åˆå§‹åŒ–åˆ—è¡¨é¡ºåºâ‰ åˆå§‹åŒ–é¡ºåº</li>
<li>é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨ä¼šè¢«åˆå§‹åŒ–åˆ—è¡¨è¦†ç›–</li>
<li>å§”æ‰˜æ„é€ æ˜¯æ¶ˆé™¤é‡å¤åˆå§‹åŒ–çš„æ­£ç¡®æ–¹å¼</li>
</ol>
<h4 id="æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨"><a href="#æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨" class="headerlink" title="æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨"></a>æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</h4><p>æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨<strong>æ˜¯â€œæŒ‡å®šå­å¯¹è±¡å¦‚ä½•è¢«åˆå§‹åŒ–â€çš„å”¯ä¸€æ­£ç¡®ä½ç½®ã€‚</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">S</span>(<span class="type">int</span> x) : <span class="built_in">n</span>(x) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒè´Ÿè´£åˆå§‹åŒ–ï¼š</p>
<ul>
<li>ç›´æ¥åŸºç±»</li>
<li>è™šåŸºç±»</li>
<li>éé™æ€æ•°æ®æˆå‘˜</li>
</ul>
<blockquote>
<p>[!tip] </p>
<p>ä¸ºä»€ä¹ˆä¸èƒ½åªåœ¨å‡½æ•°ä½“é‡Œèµ‹å€¼ï¼Ÿ</p>
<p>å› ä¸ºæœ‰äº›æˆå‘˜ï¼šâŒ <strong>æ ¹æœ¬ä¸èƒ½å…ˆé»˜è®¤æ„é€ å†èµ‹å€¼</strong></p>
<p>å¿…é¡»ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„æˆå‘˜ç±»å‹</p>
<table>
<thead>
<tr>
<th>æˆå‘˜ç±»å‹</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td><code>const</code> æˆå‘˜</td>
<td>ä¸èƒ½èµ‹å€¼</td>
</tr>
<tr>
<td>å¼•ç”¨æˆå‘˜</td>
<td>å¿…é¡»åœ¨åˆå§‹åŒ–æ—¶ç»‘å®š</td>
</tr>
<tr>
<td>æ— é»˜è®¤æ„é€ å‡½æ•°çš„ç±»æˆå‘˜</td>
<td>æ— æ³•é»˜è®¤æ„é€ </td>
</tr>
<tr>
<td>åŸºç±»</td>
<td>å¿…é¡»å…ˆæ„é€ </td>
</tr>
</tbody></table>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span>&amp; r;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">A</span>(<span class="type">int</span>&amp; v) : <span class="built_in">x</span>(<span class="number">10</span>), <span class="built_in">r</span>(v) &#123;&#125; <span class="comment">// å¿…é¡»</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</blockquote>
<pre><code class="highlight mermaid">flowchart TD
    A[å¼€å§‹ï¼šè¯·æ±‚åˆ›å»ºå¯¹è±¡] --&gt; B[åˆ†é…å¯¹è±¡æ‰€éœ€å†…å­˜]
    B --&gt; C[è¿›å…¥æœ€æ´¾ç”Ÿç±»æ„é€ è¿‡ç¨‹]

    C --&gt; D&#123;æ˜¯å¦æœ‰è™šåŸºç±»?&#125;
    D --&gt;|æ˜¯| E[åˆå§‹åŒ–æ‰€æœ‰è™šåŸºç±»&lt;br&gt;æ·±åº¦ä¼˜å…ˆã€ä»å·¦åˆ°å³]
    D --&gt;|å¦| F

    E --&gt; F[åˆå§‹åŒ–ç›´æ¥åŸºç±»&lt;br&gt;æŒ‰ç»§æ‰¿åˆ—è¡¨é¡ºåº]

    F --&gt; G[åˆå§‹åŒ–éé™æ€æ•°æ®æˆå‘˜&lt;br&gt;æŒ‰å£°æ˜é¡ºåº]

    G --&gt; H[æ‰§è¡Œæ„é€ å‡½æ•°ä½“]

    H --&gt; I[å¯¹è±¡æ„é€ å®Œæˆ&lt;br&gt;å¯¹è±¡å¤„äºå¯ç”¨çŠ¶æ€]
</code></pre>

<p>æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨çš„è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Constructor</span>(...)</span><br><span class="line">    : <span class="built_in">member</span>(expr)</span><br><span class="line">    , <span class="built_in">base</span>(expr)</span><br><span class="line">    , member&#123;expr&#125;</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šçš„ä¸‰ç§å½¢å¼çš„å«ä¹‰åˆ†åˆ«ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>å½¢å¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>member(expr)</code></td>
<td>ç›´æ¥åˆå§‹åŒ–</td>
</tr>
<tr>
<td><code>member&#123;expr&#125;</code></td>
<td>åˆ—è¡¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰</td>
</tr>
<tr>
<td><code>Base(expr)</code></td>
<td>åˆå§‹åŒ–åŸºç±»</td>
</tr>
</tbody></table>
<ol>
<li><p>åˆå§‹åŒ–åŸºç±»</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">Derived</span>() : <span class="built_in">Base</span>(<span class="number">123</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸å†™ï¼š</p>
<ul>
<li><strong>ç›´æ¥åŸºç±»</strong>ï¼šé»˜è®¤åˆå§‹åŒ–</li>
<li>ä¸æ˜¯ <code>Base()</code> çš„æ„æ€ï¼Œè€Œæ˜¯ <em>default-init</em></li>
</ul>
</li>
<li><p>ç›´æ¥åˆå§‹åŒ–</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BasicTypes</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">float</span> y;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">BasicTypes</span>() : <span class="built_in">x</span>(<span class="number">0</span>), <span class="built_in">y</span>(<span class="number">3.14f</span>) &#123;&#125;  <span class="comment">// ç›´æ¥èµ‹å€¼</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å…è®¸éšå¼ &#x2F; çª„åŒ–è½¬æ¢ï¼ŒæŒ‰æ™®é€šæ„é€ å‡½æ•°è§„åˆ™åŒ¹é…</p>
</li>
<li><p>åˆ—è¡¨åˆå§‹åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class BasicTypes &#123;</span><br><span class="line">    int x;</span><br><span class="line">    float y;</span><br><span class="line">public:</span><br><span class="line">    BasicTypes() : x&#123;0&#125;, y&#123;3.14f&#125; &#123;&#125;  // ç›´æ¥èµ‹å€¼</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç¦æ­¢çª„åŒ–è½¬æ¢ï¼Œä¼˜å…ˆåŒ¹é… <code>initializer_list</code>ï¼Œå¯è¿›è¡Œèšåˆå’Œå€¼åˆå§‹åŒ–</p>
</li>
</ol>
<p>æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸€èˆ¬æ¨è<code>&#123;&#125;</code>ã€‚</p>
<pre><code class="highlight mermaid">flowchart TB
    A[æ„é€ å‡½æ•°è¢«é€‰ä¸­] --&gt; B[è§£ææˆå‘˜åˆå§‹åŒ–åˆ—è¡¨]

    B --&gt; C[åˆå§‹åŒ–åŸºç±»]
    C --&gt; D[åˆå§‹åŒ–æˆå‘˜å˜é‡]

    D --&gt; E[è¿›å…¥æ„é€ å‡½æ•°ä½“]
    E --&gt; F[å…è®¸è°ƒç”¨æˆå‘˜å‡½æ•°]
    F --&gt; G[æ„é€ å®Œæˆ]
</code></pre>

<h4 id="åˆå§‹åŒ–é¡ºåº"><a href="#åˆå§‹åŒ–é¡ºåº" class="headerlink" title="åˆå§‹åŒ–é¡ºåº"></a>åˆå§‹åŒ–é¡ºåº</h4><p>â— çœŸå®åˆå§‹åŒ–é¡ºåºï¼ˆä¸åˆ—è¡¨é¡ºåºæ— å…³ï¼‰ï¼Œ<strong>æ°¸è¿œéµå¾ªä¸‹é¢é¡ºåºï¼š</strong></p>
<ol>
<li><strong>è™šåŸºç±»</strong>ï¼ˆæœ€æ´¾ç”Ÿç±»æ—¶ï¼‰</li>
<li><strong>ç›´æ¥åŸºç±»</strong>ï¼ˆæŒ‰ç»§æ‰¿åˆ—è¡¨é¡ºåºï¼‰</li>
<li><strong>æˆå‘˜å˜é‡</strong>ï¼ˆæŒ‰å£°æ˜é¡ºåºï¼‰</li>
<li><strong>æ„é€ å‡½æ•°ä½“</strong></li>
</ol>
<pre><code class="highlight mermaid">flowchart TD
    A[æœ€æ´¾ç”Ÿç±»æ„é€ å¼€å§‹] --&gt; B[è™šåŸºç±»åˆå§‹åŒ–&lt;br&gt;ä»…æœ€æ´¾ç”Ÿç±»è´Ÿè´£]
    B --&gt; C[ç›´æ¥åŸºç±»åˆå§‹åŒ–&lt;br&gt;æŒ‰ç»§æ‰¿åˆ—è¡¨é¡ºåº]
    C --&gt; D[æˆå‘˜å˜é‡åˆå§‹åŒ–&lt;br&gt;æŒ‰ç±»ä¸­å£°æ˜é¡ºåº]
    D --&gt; E[æ„é€ å‡½æ•°ä½“æ‰§è¡Œ]
</code></pre>



<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">X</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">int</span> b;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">X</span>() : <span class="built_in">b</span>(<span class="number">1</span>), <span class="built_in">a</span>(b) &#123;&#125; <span class="comment">// âŒ a å…ˆåˆå§‹åŒ–</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>çœŸå®é¡ºåºï¼š</p>
<ol>
<li><code>a</code> åˆå§‹åŒ–ï¼ˆä½¿ç”¨æœªå®šä¹‰çš„ bï¼‰</li>
<li><code>b</code> åˆå§‹åŒ–</li>
</ol>
<p>ğŸ‘‰ <strong>åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºä¸ä¼šæ”¹å˜åˆå§‹åŒ–é¡ºåº</strong></p>
<p>æ­£ç¡®å†™æ³•ï¼ˆå·¥ç¨‹è§„åˆ™ï¼‰ï¼š<strong>åˆå§‹åŒ–åˆ—è¡¨é¡ºåº &#x3D; æˆå‘˜å£°æ˜é¡ºåº</strong></p>
<pre><code class="highlight mermaid">flowchart LR
    A[ç±»ä¸­å£°æ˜é¡ºåº:&lt;br&gt;int a;&lt;br&gt;int b;]
    B[åˆå§‹åŒ–åˆ—è¡¨é¡ºåº:&lt;br&gt;bï¼ˆ1ï¼‰, aï¼ˆbï¼‰]

    A --&gt; C[å…ˆåˆå§‹åŒ– a]
    C --&gt; D[a ä½¿ç”¨ b çš„å€¼&lt;br&gt;âŒ æœªå®šä¹‰]
    D --&gt; E[å†åˆå§‹åŒ– b]

    B -.ä¸å½±å“.-&gt; C
</code></pre>



<h4 id="å§”æ‰˜æ„é€ å‡½æ•°"><a href="#å§”æ‰˜æ„é€ å‡½æ•°" class="headerlink" title="å§”æ‰˜æ„é€ å‡½æ•°"></a>å§”æ‰˜æ„é€ å‡½æ•°</h4><p>å§”æ‰˜æ„é€ å‡½æ•°æ˜¯<strong>ä¸€ä¸ªæ„é€ å‡½æ•°è°ƒç”¨åŒä¸€ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ å‡½æ•°</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">char</span> x, <span class="type">int</span> y) &#123;&#125;</span><br><span class="line">    <span class="built_in">Foo</span>(<span class="type">int</span> y) : <span class="built_in">Foo</span>(<span class="string">&#x27;a&#x27;</span>, y) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å§”æ‰˜æ„é€ å‡½æ•°çš„è§„åˆ™ä¸ºï¼š</p>
<ul>
<li>åˆå§‹åŒ–åˆ—è¡¨ <strong>åªèƒ½æœ‰ä¸€ä¸ªæˆå‘˜</strong></li>
<li>ä¸èƒ½é€’å½’</li>
<li>ç›®æ ‡æ„é€ å‡½æ•°å…ˆæ‰§è¡Œ</li>
</ul>
<pre><code class="highlight mermaid">flowchart TD
    A[è°ƒç”¨å§”æ‰˜æ„é€ å‡½æ•°] --&gt; B[è¿›å…¥ç›®æ ‡æ„é€ å‡½æ•°]
    B --&gt; C[å®ŒæˆåŸºç±»åˆå§‹åŒ–]
    C --&gt; D[å®Œæˆæˆå‘˜åˆå§‹åŒ–]
    D --&gt; E[æ‰§è¡Œç›®æ ‡æ„é€ å‡½æ•°ä½“]
    E --&gt; F[è¿”å›å§”æ‰˜æ„é€ å‡½æ•°]
    F --&gt; G[æ‰§è¡Œå§”æ‰˜æ„é€ å‡½æ•°ä½“]
    G --&gt; H[æ„é€ å®Œæˆ]
</code></pre>









<h3 id="ææ„å‡½æ•°"><a href="#ææ„å‡½æ•°" class="headerlink" title="ææ„å‡½æ•°"></a>ææ„å‡½æ•°</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ææ„å‡½æ•°<strong>æ˜¯å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„â€œæ”¶å°¾é˜¶æ®µâ€ï¼Œè´Ÿè´£æ’¤é”€æ„é€ é˜¶æ®µå»ºç«‹çš„ä¸€åˆ‡è¯­ä¹‰ä¸èµ„æºã€‚<strong>å®ƒä¸æ˜¯â€œé‡Šæ”¾å†…å­˜â€çš„å‡½æ•°ï¼Œè€Œæ˜¯</strong>é‡Šæ”¾å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº</strong>ï¼ˆRAIIï¼‰ã€‚</p>
<p>ææ„å‡½æ•°åœ¨<strong>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸ</strong>æ—¶è¢«éšå¼è°ƒç”¨ï¼ŒåŒ…æ‹¬ï¼š</p>
<table>
<thead>
<tr>
<th>å­˜å‚¨æœŸ</th>
<th>ææ„æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td>é™æ€å­˜å‚¨æœŸ</td>
<td>ç¨‹åºç»“æŸ</td>
</tr>
<tr>
<td>çº¿ç¨‹å±€éƒ¨å­˜å‚¨æœŸ</td>
<td>çº¿ç¨‹ç»“æŸ</td>
</tr>
<tr>
<td>è‡ªåŠ¨å­˜å‚¨æœŸ</td>
<td>ä½œç”¨åŸŸç»“æŸ</td>
</tr>
<tr>
<td>åŠ¨æ€å­˜å‚¨æœŸ</td>
<td><code>delete</code></td>
</tr>
<tr>
<td>ä¸´æ—¶å¯¹è±¡</td>
<td>å®Œæ•´è¡¨è¾¾å¼ç»“æŸ</td>
</tr>
<tr>
<td>å¼‚å¸¸å±•å¼€</td>
<td>æ ˆå›æº¯è¿‡ç¨‹ä¸­</td>
</tr>
</tbody></table>
<p>ğŸ“Œ <strong>ææ„ â‰  delete</strong>ï¼Œ<code>delete</code> &#x3D; è°ƒç”¨ææ„å‡½æ•° + é‡Šæ”¾å†…å­˜</p>
<p>ææ„å‡½æ•°çš„è¯­æ³•è§„åˆ™ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~<span class="built_in">T</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ²¡æœ‰è¿”å›å€¼</strong></li>
<li><strong>å‚æ•°åˆ—è¡¨å¿…é¡»ä¸ºç©º</strong></li>
<li>ä¸èƒ½æ˜¯åç¨‹</li>
<li>å¯ <code>virtual</code></li>
<li>å¯ <code>= default</code> &#x2F; <code>= delete</code></li>
<li><strong>å¯ä»¥é‡è½½ï¼ˆå‡†ææ„å‡½æ•°ï¼‰</strong></li>
</ul>
<h4 id="ææ„å‡½æ•°ç±»å‹"><a href="#ææ„å‡½æ•°ç±»å‹" class="headerlink" title="ææ„å‡½æ•°ç±»å‹"></a>ææ„å‡½æ•°ç±»å‹</h4><h5 id="å‡†ææ„å‡½æ•°"><a href="#å‡†ææ„å‡½æ•°" class="headerlink" title="å‡†ææ„å‡½æ•°"></a>å‡†ææ„å‡½æ•°</h5><p>C++20 ä¸­å…è®¸<strong>å¤šä¸ªææ„å‡½æ•°å£°æ˜</strong>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    ~<span class="built_in">A</span>() <span class="keyword">requires</span> std::is_integral_v&lt;T&gt;;</span><br><span class="line">    ~<span class="built_in">A</span>() <span class="keyword">requires</span> std::is_pointer_v&lt;T&gt;;</span><br><span class="line">    ~<span class="built_in">A</span>();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç±»ä¸­<strong>å¯ä»¥æœ‰å¤šä¸ªå‡†ææ„å‡½æ•°</strong></li>
<li><strong>æœ€ç»ˆåªèƒ½æœ‰ä¸€ä¸ªè¢«é€‰ä¸ºçœŸæ­£çš„ææ„å‡½æ•°</strong></li>
<li>åœ¨ç±»å®šä¹‰ç»“æŸæ—¶ï¼Œå¯¹ <strong>ç©ºå‚æ•°åˆ—è¡¨çš„å‡†ææ„å‡½æ•°åšé‡è½½å†³è®®</strong></li>
<li><strong>é€‰ä¸­çš„é‚£ä¸ªå°±æ˜¯ææ„å‡½æ•°</strong></li>
</ul>
<p>ğŸ“Œ <strong>ææ„å‡½æ•°é€‰æ‹©ä¸å‘ç”Ÿ ODR ä½¿ç”¨</strong><br>â†’ å³ä½¿æ˜¯ <code>= delete</code> ä¹Ÿèƒ½è¢«â€œé€‰ä¸­â€ï¼Œä½†ä¸€æ—¦çœŸæ­£è°ƒç”¨å°±éè‰¯æ„</p>
<h5 id="éšå¼ææ„å‡½æ•°"><a href="#éšå¼ææ„å‡½æ•°" class="headerlink" title="éšå¼ææ„å‡½æ•°"></a>éšå¼ææ„å‡½æ•°</h5><p>å¦‚æœä½  <strong>æ²¡æœ‰å£°æ˜ä»»ä½•ææ„å‡½æ•°</strong>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~<span class="built_in">S</span>() <span class="keyword">noexcept</span>;</span><br></pre></td></tr></table></figure>

<p>éšå¼ææ„å‡½æ•°æœ‰ä»¥ä¸‹å…³é”®æ€§è´¨ï¼š</p>
<ul>
<li><code>public</code></li>
<li><code>inline</code></li>
<li><strong>é€šå¸¸æ˜¯ <code>noexcept(true)</code></strong></li>
<li>å‡½æ•°ä½“ä¸ºç©º</li>
<li>ä¼š<strong>é€’å½’è°ƒç”¨æˆå‘˜å’ŒåŸºç±»çš„ææ„å‡½æ•°</strong></li>
</ul>
<h5 id="å¹³å‡¡ææ„å‡½æ•°"><a href="#å¹³å‡¡ææ„å‡½æ•°" class="headerlink" title="å¹³å‡¡ææ„å‡½æ•°"></a>å¹³å‡¡ææ„å‡½æ•°</h5><p>å¹³å‡¡ææ„å‡½æ•°çš„æ¡ä»¶ä¸ºï¼š</p>
<ul>
<li>éç”¨æˆ·æä¾›ï¼ˆä½ æ²¡å†™ï¼‰</li>
<li>éè™š</li>
<li>æ‰€æœ‰æˆå‘˜ &#x2F; åŸºç±»ææ„å‡½æ•°å¹³å‡¡</li>
</ul>
<p>å®ƒè¡¨ç¤º</p>
<ul>
<li>ä»€ä¹ˆéƒ½ä¸åš</li>
<li><strong>å¯¹è±¡é”€æ¯ &#x3D; ç›´æ¥é‡Šæ”¾å†…å­˜</strong></li>
<li>POD ç±»å‹éƒ½æ˜¯å¹³å‡¡å¯é”€æ¯çš„</li>
</ul>
<p>ğŸ“Œ <strong>è¿™æ˜¯ STL èƒ½é«˜æ•ˆ <code>memcpy</code> &#x2F; <code>realloc</code> çš„åŸºç¡€</strong></p>
<h5 id="è™šææ„å‡½æ•°"><a href="#è™šææ„å‡½æ•°" class="headerlink" title="è™šææ„å‡½æ•°"></a>è™šææ„å‡½æ•°</h5><p>è™šææ„å‡½æ•°æ˜¯é¢å‘å¯¹è±¡çš„ç”Ÿæ­»çº¿</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base* p = <span class="keyword">new</span> Derived;</span><br><span class="line"><span class="keyword">delete</span> p; <span class="comment">// âŒ UBï¼Œé™¤é Base::~Base æ˜¯ virtual</span></span><br></pre></td></tr></table></figure>

<p>è®¾è®¡å‡†åˆ™ä¸ºï¼š</p>
<ul>
<li><strong>ä¸€ä¸ªç±»å¦‚æœå¯èƒ½è¢«å½“ä½œåŸºç±»é€šè¿‡æŒ‡é’ˆåˆ é™¤ï¼š</strong><ul>
<li>ææ„å‡½æ•° <strong>public + virtual</strong></li>
</ul>
</li>
<li><strong>å¦‚æœä¸å…è®¸å¤šæ€åˆ é™¤ï¼š</strong><ul>
<li>ææ„å‡½æ•° <strong>protected + non-virtual</strong></li>
</ul>
</li>
</ul>
<h5 id="çº¯è™šææ„å‡½æ•°"><a href="#çº¯è™šææ„å‡½æ•°" class="headerlink" title="çº¯è™šææ„å‡½æ•°"></a>çº¯è™šææ„å‡½æ•°</h5><p>çº¯è™šææ„å‡½æ•°æ˜¯æŠ½è±¡ç±»æŠ€å·§</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Base</span>() = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Base::~<span class="built_in">Base</span>() &#123;&#125; <span class="comment">// å¿…é¡»æœ‰å®šä¹‰</span></span><br></pre></td></tr></table></figure>

<p>åŸå› æ˜¯<strong>æ´¾ç”Ÿç±»ææ„æ—¶ï¼Œä¸€å®šä¼šè°ƒç”¨åŸºç±»ææ„å‡½æ•°</strong></p>
<h5 id="åˆ é™¤ææ„å‡½æ•°"><a href="#åˆ é™¤ææ„å‡½æ•°" class="headerlink" title="åˆ é™¤ææ„å‡½æ•°"></a>åˆ é™¤ææ„å‡½æ•°</h5><p>ææ„å‡½æ•°ä¼šè¢«éšå¼å®šä¹‰ä¸º <code>= delete</code>ï¼Œå¦‚æœï¼š</p>
<ul>
<li>æˆå‘˜æˆ–åŸºç±»çš„ææ„å‡½æ•°ä¸å¯è®¿é—®æˆ–è¢«åˆ é™¤</li>
<li>è”åˆä½“æˆå‘˜è§„åˆ™ä¸æ»¡è¶³</li>
<li>è™šææ„å‡½æ•°å¯¹åº”çš„ <code>operator delete</code> ä¸å¯è®¿é—® &#x2F; æ­§ä¹‰</li>
</ul>
<p>ğŸ“Œ <strong>ä¸€å¥è¯</strong>ï¼š<strong>ä½ ä¸èƒ½é”€æ¯ä¸€ä¸ªâ€œä¸èƒ½è¢«å®‰å…¨é”€æ¯çš„å¯¹è±¡â€</strong></p>
<h4 id="ææ„é¡ºåº"><a href="#ææ„é¡ºåº" class="headerlink" title="ææ„é¡ºåº"></a>ææ„é¡ºåº</h4><p>ææ„é¡ºåº &#x3D; æ„é€ çš„ä¸¥æ ¼é€†åº</p>
<ol>
<li>ææ„å‡½æ•°ä½“</li>
<li>æˆå‘˜ï¼ˆå£°æ˜çš„é€†åºï¼‰</li>
<li>éè™šåŸºç±»ï¼ˆæ„é€ çš„é€†åºï¼‰</li>
<li>è™šåŸºç±»ï¼ˆæœ€ç»ˆæ´¾ç”Ÿç±»è´Ÿè´£ï¼‰</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">VB</span> &#123; ~<span class="built_in">VB</span>(); &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">B1</span> : <span class="keyword">virtual</span> VB&#123; ~<span class="built_in">B1</span>(); &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">B2</span> : <span class="keyword">virtual</span> VB&#123; ~<span class="built_in">B2</span>(); &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">M1</span> &#123; ~<span class="built_in">M1</span>(); &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">M2</span> &#123; ~<span class="built_in">M2</span>(); &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">D</span> : <span class="keyword">public</span> B1, <span class="keyword">public</span> B2 &#123;</span><br><span class="line">    M1 m1;</span><br><span class="line">    M2 m2;</span><br><span class="line">    ~<span class="built_in">D</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‡è®¾ï¼š</p>
<ul>
<li><code>VB</code> æ˜¯è™šåŸºç±»</li>
<li><code>D</code> æ˜¯<strong>æœ€æ´¾ç”Ÿç±»</strong></li>
</ul>
<p>å½“ <code>D</code> å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œ<strong>çœŸå®æ‰§è¡Œé¡ºåºæ˜¯ï¼š</strong></p>
<ol>
<li>æ‰§è¡Œ <code>~D()</code> å‡½æ•°ä½“</li>
<li>ææ„ <strong>éé™æ€æˆå‘˜</strong>ï¼ˆæŒ‰<strong>å£°æ˜é¡ºåºçš„é€†åº</strong>ï¼‰</li>
<li>ææ„ <strong>ç›´æ¥éè™šåŸºç±»</strong>ï¼ˆæŒ‰<strong>ç»§æ‰¿é¡ºåºçš„é€†åº</strong>ï¼‰</li>
<li>ææ„ <strong>è™šåŸºç±»</strong>ï¼ˆä»…æœ€æ´¾ç”Ÿç±»è´Ÿè´£ï¼‰</li>
</ol>
<pre><code class="highlight mermaid">sequenceDiagram
    participant Obj as D å¯¹è±¡
    participant DtorD as ~D()
    participant M2 as ~M2()
    participant M1 as ~M1()
    participant B2 as ~B2()
    participant B1 as ~B1()
    participant VB as ~VB()

    Obj -&gt;&gt; DtorD: è°ƒç”¨ ~D() å‡½æ•°ä½“
    DtorD -&gt;&gt; M2: ææ„æˆå‘˜ m2
    M2 -&gt;&gt; M1: ææ„æˆå‘˜ m1
    M1 -&gt;&gt; B2: ææ„åŸºç±» B2
    B2 -&gt;&gt; B1: ææ„åŸºç±» B1
    B1 -&gt;&gt; VB: ææ„è™šåŸºç±» VB
</code></pre>

<blockquote>
<ul>
<li>ææ„å‡½æ•° &#x3D; ç”Ÿå‘½å‘¨æœŸç»“æŸé’©å­</li>
<li>æ„é€  â†’ ææ„æ˜¯ä¸¥æ ¼é…å¯¹çš„</li>
<li>ææ„é¡ºåº &#x3D; æ„é€ é€†åº</li>
<li>å¤šæ€åˆ é™¤ â‡’ virtual ææ„</li>
<li>ææ„å‡½æ•°ä¸åº”æŠ›å¼‚å¸¸</li>
<li>å¹³å‡¡ææ„ &#x3D; é›¶æˆæœ¬æŠ½è±¡</li>
</ul>
</blockquote>
<h3 id="è™šå‡½æ•°"><a href="#è™šå‡½æ•°" class="headerlink" title="è™šå‡½æ•°"></a>è™šå‡½æ•°</h3><p><code>virtual</code> **çš„å”¯ä¸€ç›®çš„æ˜¯ï¼šè®©â€œé€šè¿‡åŸºç±»æŒ‡é’ˆ&#x2F;å¼•ç”¨è°ƒç”¨æˆå‘˜å‡½æ•°â€æ—¶ï¼Œæ ¹æ®â€œå¯¹è±¡çš„çœŸå®åŠ¨æ€ç±»å‹â€å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°å®ç°ã€‚**è¿™å°±æ˜¯ <strong>åŠ¨æ€åˆ†æ´¾ï¼ˆdynamic dispatchï¼‰</strong>ã€‚</p>
<p>ä¸‹é¢å¯ä»¥çœ‹ä¸€ä¸ªæˆå‘˜å˜é‡å®šä¹‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Base* p = <span class="keyword">new</span> Derived;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡ŒåŒæ—¶å­˜åœ¨ä¸¤ç§â€œç±»å‹â€ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é™æ€ç±»å‹</strong></td>
<td>ç¼–è¯‘å™¨çœ‹åˆ°çš„ç±»å‹ï¼š<code>Base*</code></td>
</tr>
<tr>
<td><strong>åŠ¨æ€ç±»å‹</strong></td>
<td>è¿è¡Œæ—¶å¯¹è±¡çš„çœŸå®ç±»å‹ï¼š<code>Derived</code></td>
</tr>
</tbody></table>
<p>é‚£ä¹ˆè™šå‡½æ•°å’Œéè™šå‡½æ•°çš„åŒºåˆ«åœ¨äºï¼š</p>
<ol>
<li>éè™šå‡½æ•°<ul>
<li><strong>åªçœ‹é™æ€ç±»å‹</strong></li>
<li>ç¼–è¯‘æœŸå†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</li>
</ul>
</li>
<li>è™šå‡½æ•°<ul>
<li><strong>çœ‹åŠ¨æ€ç±»å‹</strong></li>
<li>è¿è¡ŒæœŸå†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</li>
</ul>
</li>
</ol>
<p>å¿…é¡» <strong>åŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶</strong>ï¼Œæ‰ä¼šäº§ç”Ÿè™šè°ƒç”¨ï¼š</p>
<ol>
<li>å‡½æ•°æ˜¯ <code>virtual</code></li>
<li>é€šè¿‡ <strong>åŸºç±»æŒ‡é’ˆæˆ–åŸºç±»å¼•ç”¨</strong> è°ƒç”¨</li>
<li>æ²¡æœ‰ä½¿ç”¨ä½œç”¨åŸŸé™å®šï¼ˆ<code>Base::f()</code>ï¼‰</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Base&amp; r = derived;</span><br><span class="line">r.<span class="built_in">f</span>();          <span class="comment">// è™šè°ƒç”¨</span></span><br><span class="line">r.Base::<span class="built_in">f</span>();    <span class="comment">// éè™šè°ƒç”¨ï¼ˆå¼ºåˆ¶é™æ€ç»‘å®šï¼‰</span></span><br></pre></td></tr></table></figure>

<h4 id="çº¯è™šå‡½æ•°"><a href="#çº¯è™šå‡½æ•°" class="headerlink" title="çº¯è™šå‡½æ•°"></a>çº¯è™šå‡½æ•°</h4><p>ä¸€ä¸ª<strong>çº¯è™šå‡½æ•°</strong>æ˜¯æŒ‡ï¼š<strong>åœ¨è™šå‡½æ•°å£°æ˜ä¸­ï¼Œä½¿ç”¨çº¯è¯´æ˜ç¬¦ <code>= 0</code> çš„è™šå‡½æ•°</strong></p>
<p>å½¢å¼ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è™šå‡½æ•°å£°æ˜ç¬¦ [<span class="keyword">override</span> / <span class="keyword">final</span>] = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ <code>= 0</code>ï¼š</p>
<ul>
<li>ä¸æ˜¯èµ‹å€¼</li>
<li>ä¸æ˜¯é»˜è®¤å€¼</li>
<li>æ˜¯<strong>è¯­æ³•å…³é”®å­—çº§åˆ«çš„â€œçº¯è¯´æ˜ç¬¦ï¼ˆpure-specifierï¼‰â€</strong></li>
</ul>
<blockquote>
<p>[!note] </p>
<p>çº¯è¯´æ˜ç¬¦çš„è¯­æ³•ä½ç½®</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span>;                <span class="comment">// OK</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">override</span> </span>= <span class="number">0</span>;       <span class="comment">// OK</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span> <span class="keyword">override</span>;       <span class="comment">// âŒ éæ³•</span></span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”ï¼š</p>
<ul>
<li>âŒ <strong>ä¸èƒ½</strong>å‡ºç°åœ¨å‡½æ•°å®šä¹‰ä¸­</li>
<li>âŒ <strong>ä¸èƒ½</strong>å‡ºç°åœ¨å‹å…ƒå‡½æ•°å£°æ˜ä¸­</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span> &#123;&#125;  <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure></blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šçº¯è™šå‡½æ•° â‰  æ²¡æœ‰å®ç°</p>
<blockquote>
<p><strong>çº¯è™šå‡½æ•°å¯ä»¥æœ‰å®šä¹‰</strong></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">A::f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;A::f\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼š</p>
<ul>
<li>è¯¥å‡½æ•° <strong>ä»ç„¶æ˜¯çº¯è™šçš„</strong></li>
<li>è¯¥ç±» <strong>ä»ç„¶æ˜¯æŠ½è±¡ç±»</strong></li>
<li>ä¸èƒ½é€šè¿‡è™šè°ƒç”¨æ¥è°ƒç”¨å®ƒ</li>
</ul>
<p>é‚£ä¹ˆçº¯è™šå‡½æ•°çš„å®šä¹‰æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<p>ç”¨é€”åªæœ‰ä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>ä¾›æ´¾ç”Ÿç±»æ˜¾å¼è°ƒç”¨ï¼ˆéè™šè°ƒç”¨ï¼‰</strong></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">B</span> : A &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        A::<span class="built_in">f</span>(); <span class="comment">// åˆæ³•ï¼Œéè™šè°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="åå˜è¿”å›ç±»å‹"><a href="#åå˜è¿”å›ç±»å‹" class="headerlink" title="åå˜è¿”å›ç±»å‹"></a>åå˜è¿”å›ç±»å‹</h4><p><strong>åå˜è¿”å›ç±»å‹</strong>æ˜¯æŒ‡ï¼šå½“æ´¾ç”Ÿç±»æˆå‘˜å‡½æ•°<strong>é‡å†™</strong>åŸºç±»çš„è™šå‡½æ•°æ—¶ï¼Œ<strong>å…è®¸è¿”å›ä¸€ä¸ªâ€œæ¯”åŸºç±»è¿”å›ç±»å‹æ›´å…·ä½“â€çš„ç±»å‹</strong>ï¼Œå‰ææ˜¯è¯¥è¿”å›ç±»å‹ä¸åŸºç±»è¿”å›ç±»å‹å­˜åœ¨<strong>åˆæ³•çš„ç»§æ‰¿å…³ç³»</strong>ã€‚è¿™æ˜¯ <strong>è™šå‡½æ•°é‡å†™è§„åˆ™çš„ä¸€ä¸ªä¾‹å¤–</strong>ã€‚</p>
<p>å¦‚æœæ²¡æœ‰åå˜è¿”å›ç±»å‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Base* <span class="title">clone</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base &#123;</span><br><span class="line">    <span class="function">Derived* <span class="title">clone</span><span class="params">()</span> <span class="type">const</span></span>; <span class="comment">// å¦‚æœä¸å…è®¸åå˜ï¼Œè¿™æ˜¯éæ³•çš„</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½ å°†è¢«è¿«å†™æˆï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Base* <span class="title">clone</span><span class="params">()</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>è°ƒç”¨è€…<strong>å¤±å»æ´¾ç”Ÿç±»çš„ç±»å‹ä¿¡æ¯</strong></li>
<li>å¿…é¡»æ‰‹åŠ¨ <code>static_cast</code> &#x2F; <code>dynamic_cast</code></li>
<li>æ¥å£è¡¨è¾¾èƒ½åŠ›ä¸‹é™</li>
</ul>
<p><strong>åå˜è¿”å›ç±»å‹çš„ç›®çš„</strong>ï¼šåœ¨ä¿æŒå¤šæ€è¯­ä¹‰æ­£ç¡®çš„å‰æä¸‹ï¼Œè®©æ´¾ç”Ÿç±»æ¥å£æ›´â€œç²¾ç¡®â€ã€‚</p>
<p>åå˜è¿”å›ç±»å‹çš„æ­£å¼è§„åˆ™ï¼ˆå¿…é¡»å…¨éƒ¨æ»¡è¶³ï¼‰ä¸ºï¼š</p>
<p>å‡è®¾ï¼š<code>Base::f()</code> è¢« <code>Derived::f()</code> é‡å†™ï¼Œé‚£ä¹ˆè¿”å›ç±»å‹ <strong>å¯ä»¥ä¸åŒ</strong>ï¼Œä½†å¿…é¡»æ»¡è¶³ï¼š</p>
<ol>
<li><p>å¿…é¡»æ˜¯æŒ‡é’ˆæˆ–å¼•ç”¨</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Base*        âœ”</span><br><span class="line">Derived*     âœ”</span><br><span class="line">Base&amp;        âœ”</span><br><span class="line">Derived&amp;     âœ”</span><br><span class="line"></span><br><span class="line">Base         âœ˜</span><br><span class="line">Derived      âœ˜</span><br></pre></td></tr></table></figure>

<p><strong>å€¼è¿”å›ä¸å…è®¸åå˜</strong></p>
</li>
<li><p>è¿”å›çš„æ´¾ç”Ÿç±»ç±»å‹å¿…é¡»ç»§æ‰¿è‡ªåŸºç±»è¿”å›ç±»å‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">B</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">D</span> : B &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> B* <span class="title">f</span><span class="params">()</span></span>;   <span class="comment">// åŸºç±»</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> D* <span class="title">f</span><span class="params">()</span></span>;   <span class="comment">// æ´¾ç”Ÿç±» âœ”</span></span><br></pre></td></tr></table></figure>

<p>åè¿‡æ¥ä¸è¡Œã€‚</p>
</li>
<li><p>cv é™å®šä¸èƒ½â€œå˜æ¾â€</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Base*              â†’ Derived*              âœ”</span><br><span class="line"><span class="type">const</span> Base*        â†’ Derived*              âœ˜</span><br><span class="line"><span class="type">const</span> Base*        â†’ <span class="type">const</span> Derived*        âœ”</span><br></pre></td></tr></table></figure>

<p><strong>æ´¾ç”Ÿè¿”å›ç±»å‹çš„ cv é™å®š â‰¤ åŸºç±»</strong></p>
</li>
<li><p>è¿”å›ç±»å‹ä¸­çš„ç±»å¿…é¡»æ˜¯å®Œæ•´ç±»å‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>; <span class="comment">// ä¸å®Œæ•´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Base* <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base &#123;</span><br><span class="line">    <span class="function">A* <span class="title">f</span><span class="params">()</span></span>; <span class="comment">// âŒ A ä¸å®Œæ•´</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p><strong>åå˜åªå½±å“â€œå‡½æ•°çš„å®ç°è€…â€ï¼Œ<br>ä¸å½±å“â€œè°ƒç”¨ç‚¹çš„é™æ€ç±»å‹â€ã€‚</strong></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base* p = <span class="keyword">new</span> Derived;</span><br><span class="line">Base* r = p-&gt;<span class="built_in">clone</span>();   <span class="comment">// æ°¸è¿œæ˜¯ Base*</span></span><br></pre></td></tr></table></figure>

<p>å³ä½¿ <code>Derived::clone()</code> è¿”å› <code>Derived*</code>ï¼š</p>
<ul>
<li><strong>è°ƒç”¨è¡¨è¾¾å¼çš„ç±»å‹ä»æ˜¯ <code>Base *</code></strong></li>
<li>åªæ˜¯å†…éƒ¨è¿”å›å€¼è¢« <strong>éšå¼å‘ä¸Šè½¬æ¢</strong></li>
</ul>
<p>å¦‚æœä½ å†™ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Derived d;</span><br><span class="line">Derived* r = d.<span class="built_in">clone</span>(); <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºæ­¤æ—¶ï¼š</p>
<ul>
<li>é™æ€ç±»å‹æ˜¯ <code>Derived</code></li>
<li>è°ƒç”¨çš„æ˜¯ <code>Derived::clone</code></li>
</ul>
<p>ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Base* <span class="title">clone</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Base</span>(*<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base &#123;</span><br><span class="line">    <span class="function">Derived* <span class="title">clone</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Derived</span>(*<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¡Œä¸ºåˆ†æ</p>
<table>
<thead>
<tr>
<th>è°ƒç”¨æ–¹å¼</th>
<th>è¿”å›ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>Base* p; p-&gt;clone()</code></td>
<td><code>Base*</code></td>
</tr>
<tr>
<td><code>Derived d; d.clone()</code></td>
<td><code>Derived*</code></td>
</tr>
</tbody></table>
<blockquote>
<p>[!tip]</p>
<p> ä¸ºä»€ä¹ˆâ€œåªèƒ½æ˜¯æŒ‡é’ˆ&#x2F;å¼•ç”¨â€ï¼Ÿ</p>
<p>æ ¹æœ¬åŸå› ï¼š</p>
<ul>
<li><strong>å€¼è¿”å›æ¶‰åŠå¯¹è±¡åˆ‡ç‰‡ï¼ˆobject slicingï¼‰</strong></li>
<li>è™šè°ƒç”¨æ— æ³•åœ¨è°ƒç”¨ç‚¹æ”¹å˜å¯¹è±¡å¤§å°</li>
<li>ABI æ— æ³•å®‰å…¨æ”¯æŒ</li>
</ul>
<p>æ‰€ä»¥ï¼šåå˜è¿”å›ç±»å‹åœ¨è®¾è®¡ä¸Šè¢«é™åˆ¶ä¸º<strong>ä¸å½±å“å¯¹è±¡å¸ƒå±€å’Œè°ƒç”¨çº¦å®šçš„å½¢å¼</strong></p>
</blockquote>
<blockquote>
<p>[!caution]</p>
<p>å¸¸è§è¯¯åŒºï¼š</p>
<ol>
<li><p>è¯¯åŒº 1ï¼šåå˜å¯ä»¥ç”¨äºæ™®é€šå‡½æ•°</p>
<p>âŒ ä¸è¡Œ<br>âœ” åªé€‚ç”¨äº <strong>è™šå‡½æ•°çš„é‡å†™</strong></p>
</li>
<li><p>è¯¯åŒº 2ï¼šè¿”å›ç±»å‹åªè¦èƒ½éšå¼è½¬æ¢å°±è¡Œ</p>
<p>âŒ ä¸è¡Œ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">B</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> A* <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> B* <span class="title">f</span><span class="params">()</span></span>; <span class="comment">// å³ä½¿å¯è½¬æ¢ï¼Œä¹Ÿä¸åå˜</span></span><br></pre></td></tr></table></figure>

<p>å¿…é¡»æ˜¯ <strong>ç»§æ‰¿å…³ç³»</strong>ã€‚</p>
</li>
<li><p>è¯¯åŒº 3ï¼šå¯ä»¥å¤šçº§æŒ‡é’ˆ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Base**  â†’ Derived**  âŒ</span><br></pre></td></tr></table></figure>

<p>æ ‡å‡†æ˜ç¡®ç¦æ­¢ã€‚</p>
</li>
</ol>
</blockquote>
<h4 id="è™šææ„å‡½æ•°-1"><a href="#è™šææ„å‡½æ•°-1" class="headerlink" title="è™šææ„å‡½æ•°"></a>è™šææ„å‡½æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base* p = <span class="keyword">new</span> Derived;</span><br><span class="line"><span class="keyword">delete</span> p;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ <code>Base::~Base()</code> <strong>ä¸æ˜¯ virtual</strong>ï¼š</p>
<ul>
<li>åªè°ƒç”¨ <code>Base</code> ææ„</li>
<li><code>Derived</code> ææ„ä¸æ‰§è¡Œ</li>
<li><strong>æœªå®šä¹‰è¡Œä¸º</strong></li>
</ul>
<p>è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Base</span>() = <span class="keyword">default</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¯·ç‰¢è®°</p>
<blockquote>
<p><strong>åªè¦ä¸€ä¸ªç±»â€œå¯èƒ½è¢«å½“ä½œåŸºç±»ä½¿ç”¨â€ï¼Œ<br>ææ„å‡½æ•°å¿…é¡»æ˜¯ virtual</strong></p>
</blockquote>
<p>åœ¨æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä¸­ï¼š</p>
<blockquote>
<p><strong>å¯¹è±¡åªè¢«è§†ä¸ºâ€œå½“å‰æ­£åœ¨æ„é€ &#x2F;ææ„çš„é‚£ä¸€å±‚â€</strong></p>
</blockquote>
<p>æ›´æ´¾ç”Ÿçš„éƒ¨åˆ† <strong>å°šä¸å­˜åœ¨ &#x2F; å·²ä¸å­˜åœ¨</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="built_in">Base</span>() &#123; <span class="built_in">f</span>(); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ„é€  <code>Derived</code> æ—¶ï¼š</p>
<ol>
<li>å…ˆæ„é€  <code>Base</code></li>
<li>æ­¤æ—¶ <code>Derived</code> ä¸å­˜åœ¨</li>
<li><code>Base()</code> ä¸­çš„ <code>f()</code> è°ƒç”¨çš„æ˜¯ <code>Base::f()</code></li>
</ol>
<p>è¿™æ˜¯ <strong>è¯­è¨€è®¾è®¡çš„å¿…ç„¶ç»“æœ</strong>ï¼Œä¸æ˜¯ bugã€‚</p>
<blockquote>
<p><strong>åœ¨æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä¸­ï¼Œå¯¹çº¯è™šå‡½æ•°è¿›è¡Œè™šè°ƒç”¨æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰</strong></p>
</blockquote>
<p>æ— è®ºè¯¥çº¯è™šå‡½æ•°æ˜¯å¦æœ‰å®šä¹‰ã€‚</p>
<p>åœ¨æ„é€  &#x2F; ææ„æœŸé—´ï¼š</p>
<ul>
<li>å¯¹è±¡çš„<strong>åŠ¨æ€ç±»å‹æ­£åœ¨å˜åŒ–</strong></li>
<li>vptr æŒ‡å‘çš„è™šè¡¨å¯èƒ½æ˜¯ï¼š<ul>
<li>åŸºç±»çš„</li>
<li>ä¸­é—´ç±»çš„</li>
</ul>
</li>
<li><strong>æ´¾ç”Ÿéƒ¨åˆ†å°šæœªæ„é€  &#x2F; å·²ç»ææ„</strong></li>
</ul>
<p>å› æ­¤ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Abstract</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Abstract</span>() &#123;</span><br><span class="line">        <span class="built_in">f</span>();  <span class="comment">// âŒ UBï¼šè™šè°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>åˆæ³•çš„åšæ³•æ˜¯ï¼š</p>
<ol>
<li><p>éè™šè°ƒç”¨æ˜¯å…è®¸çš„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Abstract::<span class="built_in">f</span>(); <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>éçº¯è™šå‡½æ•°çš„è™šè°ƒç”¨æ˜¯å…è®¸çš„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">g</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Abstract</span>() &#123;</span><br><span class="line">    <span class="built_in">g</span>(); <span class="comment">// OKï¼Œè°ƒç”¨ Abstract::g()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>çº¯è™šææ„å‡½æ•°æ˜¯åˆæ³•çš„,ä½†ï¼š<strong>å¿…é¡»æä¾›å®šä¹‰</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">A</span>() = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åŸå› ï¼š</p>
<ul>
<li>ææ„å‡½æ•°<strong>ä¸€å®šä¼šè¢«è°ƒç”¨</strong></li>
<li>æ´¾ç”Ÿç±»ææ„æ—¶ï¼ŒåŸºç±»ææ„å¿…ç„¶æ‰§è¡Œ</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A::~<span class="built_in">A</span>() &#123;&#125;  <span class="comment">// å¿…é¡»å­˜åœ¨</span></span><br></pre></td></tr></table></figure>

<p>å¦åˆ™ï¼š<strong>é“¾æ¥é”™è¯¯</strong></p>
</li>
</ol>
<p>çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Abstract</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Concrete</span> : Abstract &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;&#125;   <span class="comment">// f çš„æœ€ç»ˆè¦†ç›–å™¨æ˜¯éçº¯</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Abstract2</span> : Concrete &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">override</span> </span>= <span class="number">0</span>; <span class="comment">// å†æ¬¡å˜æˆçº¯è™š</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç»“è®ºï¼š</p>
<table>
<thead>
<tr>
<th>ç±»</th>
<th>æ˜¯å¦æŠ½è±¡</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td>Abstract</td>
<td>æ˜¯</td>
<td>f æ˜¯çº¯è™š</td>
</tr>
<tr>
<td>Concrete</td>
<td>å¦</td>
<td>f è¢«æœ€ç»ˆå®ç°</td>
</tr>
<tr>
<td>Abstract2</td>
<td>æ˜¯</td>
<td>f çš„æœ€ç»ˆè¦†ç›–å™¨åˆæ˜¯çº¯è™š</td>
</tr>
</tbody></table>
<hr>
<h4 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h4><blockquote>
<p><strong>å¦‚æœä¸€ä¸ªç±»å®šä¹‰æˆ–ç»§æ‰¿äº†è‡³å°‘ä¸€ä¸ªâ€œæœ€ç»ˆè¦†ç›–å™¨ï¼ˆfinal overriderï¼‰ä¸ºçº¯è™šå‡½æ•°â€çš„è™šå‡½æ•°ï¼Œåˆ™è¯¥ç±»æ˜¯æŠ½è±¡ç±»ã€‚</strong></p>
</blockquote>
<p>å…³é”®ç‚¹åœ¨ <strong>â€œæœ€ç»ˆè¦†ç›–å™¨â€</strong>ï¼Œè€Œä¸æ˜¯â€œæœ‰æ²¡æœ‰å†™ <code>= 0</code>â€ã€‚</p>
<p>æŠ½è±¡ç±» <strong>ä¸èƒ½</strong>ï¼š</p>
<ul>
<li>åˆ›å»ºå¯¹è±¡</li>
<li>ä½œä¸ºéé™æ€æ•°æ®æˆå‘˜çš„ç±»å‹</li>
<li>ä½œä¸ºå‡½æ•°å‚æ•°ç±»å‹</li>
<li>ä½œä¸ºå‡½æ•°è¿”å›å€¼ç±»å‹</li>
<li>ä½œä¸ºæ˜¾å¼ç±»å‹è½¬æ¢ç›®æ ‡</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Abstract a;        <span class="comment">// âŒ</span></span><br><span class="line"><span class="function">Abstract <span class="title">func</span><span class="params">()</span></span>;   <span class="comment">// âŒ</span></span><br></pre></td></tr></table></figure>

<p>ä½† <strong>å¯ä»¥</strong>ï¼š</p>
<ul>
<li>å£°æ˜æŒ‡é’ˆå’Œå¼•ç”¨</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Abstract* p;   <span class="comment">// OK</span></span><br><span class="line">Abstract&amp; r;   <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>



<h3 id="é‡å†™å‡½æ•°"><a href="#é‡å†™å‡½æ•°" class="headerlink" title="é‡å†™å‡½æ•°"></a>é‡å†™å‡½æ•°</h3><p>ä»€ä¹ˆå«â€œé‡å†™ï¼ˆoverrideï¼‰â€</p>
<p>å½“æ´¾ç”Ÿç±»ä¸­å‡ºç°ä¸€ä¸ªå‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼š</p>
<ul>
<li>å‡½æ•°åç›¸åŒ</li>
<li>å‚æ•°åˆ—è¡¨å®Œå…¨ç›¸åŒ</li>
<li>cv &#x2F; ref é™å®šç¬¦ç›¸åŒ</li>
</ul>
<p>é‚£ä¹ˆï¼š</p>
<blockquote>
<p>æ´¾ç”Ÿç±»å‡½æ•° <strong>é‡å†™ï¼ˆoverrideï¼‰</strong> äº†åŸºç±»è™šå‡½æ•°<br>å¹¶ä¸” <strong>è‡ªåŠ¨ä¹Ÿæ˜¯ virtual</strong></p>
</blockquote>
<p>å³ä½¿ä½ <strong>ä¸å†™ <code>virtual</code></strong>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;  <span class="comment">// ä»ç„¶æ˜¯ virtual</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="5-override-ä¸æ˜¯è¯­ä¹‰ï¼Œè€Œæ˜¯â€œç¼–è¯‘æœŸæ ¡éªŒå·¥å…·â€"><a href="#5-override-ä¸æ˜¯è¯­ä¹‰ï¼Œè€Œæ˜¯â€œç¼–è¯‘æœŸæ ¡éªŒå·¥å…·â€" class="headerlink" title="5. override ä¸æ˜¯è¯­ä¹‰ï¼Œè€Œæ˜¯â€œç¼–è¯‘æœŸæ ¡éªŒå·¥å…·â€"></a>5. <code>override</code> ä¸æ˜¯è¯­ä¹‰ï¼Œè€Œæ˜¯â€œç¼–è¯‘æœŸæ ¡éªŒå·¥å…·â€</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br></pre></td></tr></table></figure>

<p>ä½œç”¨åªæœ‰ä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>å¼ºåˆ¶ç¼–è¯‘å™¨æ£€æŸ¥ï¼š<br>ä½ æ˜¯ä¸æ˜¯â€œçœŸçš„é‡å†™äº†æŸä¸ªè™šå‡½æ•°â€</strong></p>
</blockquote>
<p>å¦‚æœæ²¡æœ‰é‡å†™æˆåŠŸ â†’ <strong>ç›´æ¥ç¼–è¯‘é”™è¯¯</strong></p>
<h3 id="å·¥ç¨‹å‡†åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰"><a href="#å·¥ç¨‹å‡†åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰" class="headerlink" title="å·¥ç¨‹å‡†åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰"></a>å·¥ç¨‹å‡†åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰</h3><blockquote>
<p><strong>æ´¾ç”Ÿç±»é‡å†™è™šå‡½æ•°ï¼Œå¿…é¡»å†™ <code>override</code></strong></p>
</blockquote>
<hr>
<h1 id="6-éšè—ï¼ˆhidingï¼‰-vs-é‡å†™ï¼ˆoverrideï¼‰"><a href="#6-éšè—ï¼ˆhidingï¼‰-vs-é‡å†™ï¼ˆoverrideï¼‰" class="headerlink" title="6. éšè—ï¼ˆhidingï¼‰ vs é‡å†™ï¼ˆoverrideï¼‰"></a>6. éšè—ï¼ˆhidingï¼‰ vs é‡å†™ï¼ˆoverrideï¼‰</h1><p>è¿™æ˜¯ C++ ä¸­<strong>éå¸¸å®¹æ˜“è¸©å‘</strong>çš„ç‚¹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Derived</span> : Base &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span>)</span></span>;   <span class="comment">// âŒ æ²¡æœ‰é‡å†™ï¼Œåªæ˜¯éšè—</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<ul>
<li><code>Derived::f(int)</code> <strong>éšè—äº†</strong> <code>Base::f</code></li>
<li>ä½† <strong>æ²¡æœ‰é‡å†™</strong></li>
<li>å¤šæ€å¤±è´¥</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base* p = <span class="keyword">new</span> Derived;</span><br><span class="line">p-&gt;<span class="built_in">f</span>();   <span class="comment">// è°ƒç”¨ Base::f()</span></span><br></pre></td></tr></table></figure>

<h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><blockquote>
<p><strong>å‚æ•°ä¸åŒ â‰  é‡å†™<br>åªä¼šå‘ç”Ÿåå­—éšè—</strong></p>
</blockquote>
<hr>
<h1 id="7-æœ€ç»ˆé‡å†™è€…ï¼ˆfinal-overriderï¼‰"><a href="#7-æœ€ç»ˆé‡å†™è€…ï¼ˆfinal-overriderï¼‰" class="headerlink" title="7. æœ€ç»ˆé‡å†™è€…ï¼ˆfinal overriderï¼‰"></a>7. æœ€ç»ˆé‡å†™è€…ï¼ˆfinal overriderï¼‰</h1><p>åœ¨ä¸€æ¡ç»§æ‰¿é“¾ä¸Šï¼š</p>
<ul>
<li>å¯¹æ¯ä¸ªè™šå‡½æ•°</li>
<li>åœ¨æ¯ä¸ªå¯¹è±¡ä¸­</li>
<li><strong>æ°å¥½åªèƒ½æœ‰ä¸€ä¸ªâ€œæœ€ç»ˆå®ç°â€</strong></li>
</ul>
<p>è¿™å« <strong>final overrider</strong>ã€‚</p>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸­å‡ºç°ä¸¤ä¸ªæœ€ç»ˆé‡å†™è€… â†’ <strong>ç¨‹åºä¸åˆæ³•</strong></p>
<p>è¿™æ˜¯å¤šé‡ç»§æ‰¿ä¸­è™šåŸºç±»è§„åˆ™å­˜åœ¨çš„æ ¹æœ¬åŸå› ä¹‹ä¸€ã€‚</p>
<h2 id="friend"><a href="#friend" class="headerlink" title="friend"></a>friend</h2><p><code>friend</code><strong>ä¸æ˜¯æˆå‘˜å…³ç³»ï¼Œè€Œæ˜¯â€œè¶Šæƒè®¿é—®è®¸å¯â€ã€‚</strong></p>
<ul>
<li>friend <strong>ä¸æ”¹å˜ä½œç”¨åŸŸ</strong></li>
<li>friend <strong>ä¸å¼•å…¥ç»§æ‰¿</strong></li>
<li>friend <strong>ä¸å»ºç«‹æ‰€æœ‰æƒ</strong></li>
<li>friend <strong>åªæ”¹å˜è®¿é—®æ§åˆ¶</strong></li>
</ul>
<p>å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š<strong>â€œæˆ‘ä¿¡ä»»ä½ ï¼Œä½ å¯ä»¥ç¿»æˆ‘æŠ½å±‰ï¼Œä½†ä½ ä¸æ˜¯æˆ‘å®¶çš„äººã€‚â€</strong></p>
<p>å‡è®¾æœ‰ä¸€ä¸ªäººï¼š<strong>ç±» A</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A æœ‰ä¸€ä¸ªä¿é™©ç®±ï¼ˆprivate æˆå‘˜ï¼‰</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„å­¦ä¹ å¯ä»¥çŸ¥é“ï¼š</p>
<ul>
<li>åªæœ‰ <strong>A è‡ªå·±</strong> èƒ½æ‰“å¼€ä¿é™©ç®±</li>
<li>åˆ«äºº <strong>ä¸ç®¡æ˜¯è°</strong> éƒ½ä¸è¡Œ</li>
</ul>
<p>friend <strong>å°±æ˜¯ï¼šA ä¸»åŠ¨è¯´ â€”â€”â€œæˆ‘å…è®¸ä½ æ‰“å¼€æˆ‘çš„ä¿é™©ç®±ã€‚â€</strong></p>
<ul>
<li>ä¸æ˜¯æ³•å¾‹å¼ºåˆ¶çš„</li>
<li>ä¸æ˜¯å› ä¸ºäº²æˆš</li>
<li>ä¸æ˜¯å› ä¸ºç»§æ‰¿</li>
</ul>
<p>è€Œæ˜¯ <strong>A è‡ªå·±ç‚¹åå…è®¸çš„</strong></p>
<p>friend ä¸æ˜¯â€œå˜æˆè‡ªå·±äººâ€</p>
<ul>
<li>é”™è¯¯ç†è§£ï¼ˆâŒï¼‰ï¼šfriend åï¼Œå¯¹æ–¹å°±â€œå˜æˆç±»çš„ä¸€éƒ¨åˆ†â€</li>
<li>æ­£ç¡®ç†è§£ï¼ˆâœ…ï¼‰ï¼š<strong>friend åªæ˜¯â€œè¢«å…è®¸å·çœ‹â€</strong>ï¼Œå¯¹æ–¹ä¾ç„¶æ˜¯ <strong>å¤–äºº</strong></li>
</ul>
<h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>å‹å…ƒå£°æ˜å‡ºç°åœ¨<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/class">ç±»ä½“</a>ä¸­ï¼Œå¹¶æˆäºˆå‡½æ•°æˆ–å…¶ä»–ç±»è®¿é—®è¯¥ç±»ï¼ˆå…¶ä¸­å‹å…ƒå£°æ˜å‡ºç°ï¼‰çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜çš„æƒé™ã€‚</p>
<p>å£°æ˜çš„è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> function-declaration;</span><br><span class="line"><span class="keyword">friend</span> function-definition;</span><br><span class="line"><span class="keyword">friend</span> elaborated-type-specifier;</span><br><span class="line"><span class="keyword">friend</span> simple-type-specifier;</span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">typename</span>-specifier;</span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">friend</span>-type-specifier-list;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>å‚æ•°å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><em>function-declaration</em></td>
<td>ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/function">å‡½æ•°å£°æ˜</a></td>
</tr>
<tr>
<td><em>function-definition</em></td>
<td>ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/function#Function_definition">å‡½æ•°å®šä¹‰</a></td>
</tr>
<tr>
<td><em>elaborated-type-specifier</em></td>
<td>ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/elaborated_type_specifier">è¯¦è¿°ç±»å‹è¯´æ˜ç¬¦</a></td>
</tr>
<tr>
<td><em>simple-type-specifier</em></td>
<td>ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/declarations#Specifiers">ç®€å•ç±»å‹è¯´æ˜ç¬¦</a></td>
</tr>
<tr>
<td><em>typename-specifier</em></td>
<td>å…³é”®å­—typenameåè·Ÿä¸€ä¸ªé™å®šæ ‡è¯†ç¬¦æˆ–é™å®š<a target="_blank" rel="noopener" href="https://cppreference.cn/w/cpp/language/templates#Template_identifiers">ç®€å•æ¨¡æ¿æ ‡è¯†ç¬¦</a></td>
</tr>
<tr>
<td><em>friend-type-specifier-list</em></td>
<td>ä¸€ä¸ªéç©ºçš„é€—å·åˆ†éš”çš„<em>simple-type-specifier</em>ã€<em>elaborated-type-specifier</em>å’Œ<em>typename-specifier</em>åˆ—è¡¨ï¼Œæ¯ä¸ªè¯´æ˜ç¬¦åé¢å¯ä»¥è·Ÿçœç•¥å·ï¼ˆ<code>...</code>ï¼‰</td>
</tr>
</tbody></table>
<h3 id="å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»"><a href="#å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»" class="headerlink" title="å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»"></a>å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»</h3><p>friend å£°æ˜ä¸ä¼šå£°æ˜æˆå‘˜ï¼š</p>
<p>æ¯”å¦‚ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Y</span> &#123;</span><br><span class="line">    <span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream&amp;, <span class="type">const</span> Y&amp;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>â— <strong>operator&lt;&lt; ä¸æ˜¯ Y çš„æˆå‘˜å‡½æ•°</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Y y;</span><br><span class="line">y.<span class="keyword">operator</span>&lt;&lt;(...); <span class="comment">// âŒ ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®è°ƒç”¨æ–¹å¼ä»ç„¶æ˜¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">operator</span>&lt;&lt;(std::cout, y); <span class="comment">// æˆ– std::cout &lt;&lt; y;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>friend åªæ˜¯ <strong>æˆäºˆè®¿é—®æƒé™</strong></p>
<p>âŒ ä¸æŠŠå‡½æ•°â€œå¡è¿›ç±»é‡Œâ€</p>
</blockquote>
<ol>
<li><p>friend å‡½æ•° â€”â€” ç²¾å‡†æˆæƒï¼Œâœ… æ¨èä½¿ç”¨</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">f</span><span class="params">(A&amp;)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>åªæœ‰ <code>f</code> èƒ½è®¿é—® <code>A::x</code></li>
<li>å…¶ä»–å‡½æ•°ä»ç„¶ä¸è¡Œ</li>
<li><strong>æœ€å°æƒé™åŸåˆ™</strong></li>
</ul>
</li>
<li><p>friend ç±» â€”â€” å…¨æƒæˆæƒï¼Œâš  æƒé™å¾ˆå¤§ï¼Œæ…ç”¨</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>B</code> çš„ <strong>æ‰€æœ‰æˆå‘˜</strong></li>
<li><code>B</code> çš„ <strong>åµŒå¥—ç±»</strong></li>
<li>éƒ½å¯ä»¥è®¿é—® <code>A</code> çš„ private&#x2F;protected</li>
</ul>
</li>
</ol>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ol>
<li><p>friend å’Œç»§æ‰¿å®Œå…¨æ— å…³</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> B &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(A&amp; a)</span> </span>&#123;</span><br><span class="line">        a.x; <span class="comment">// âŒ ä¸å¯è®¿é—®</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>operator&lt;&lt; å‡ ä¹æ€»æ˜¯ friend</p>
</li>
</ol>
<p>   å› ä¸ºå®ƒåŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><strong>é€»è¾‘ä¸Šæ˜¯å¤–éƒ¨æ“ä½œ</strong></li>
<li><strong>éœ€è¦è®¿é—® private æˆå‘˜</strong></li>
<li><strong>å·¦æ“ä½œæ•°ä¸æ˜¯ç±»æœ¬èº«</strong></li>
</ol>
   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::cout &lt;&lt; obj;</span><br></pre></td></tr></table></figure>

<ul>
<li>å·¦è¾¹æ˜¯ <code>std::cout</code></li>
<li>ä¸æ˜¯ <code>obj</code></li>
<li>æ‰€ä»¥ <strong>ä¸å¯èƒ½æ˜¯ obj çš„æˆå‘˜å‡½æ•°</strong></li>
</ul>
<p>   ä½†æ˜¯ï¼š</p>
<ul>
<li>å®ƒåˆéœ€è¦è¯»å– <code>obj</code> çš„ç§æœ‰æ•°æ®</li>
<li>é‚£æ€ä¹ˆåŠï¼Ÿ</li>
</ul>
<p>   ç­”æ¡ˆå°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>å…è®¸å®ƒå·çœ‹ï¼ˆfriendï¼‰</strong></p>
</blockquote>
   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">friend</span> std::ostream&amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream&amp;, <span class="type">const</span> A&amp;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>   è¿™æ˜¯ <strong>friend æœ€æ­£å½“ã€æœ€å¸¸è§çš„ç”¨é€”</strong></p>
<ol start="3">
<li><p>æ¨¡æ¿ friend è§£å†³çš„æ˜¯â€œä¸€å¯¹å¤šæˆæƒâ€çš„é—®é¢˜</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> U&gt;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å«ä¹‰æ˜¯ï¼š</p>
<blockquote>
<p><strong>æ‰€æœ‰ B éƒ½æ˜¯ A çš„å‹å…ƒ</strong></p>
</blockquote>
</li>
</ol>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p>åœ¨ C++ ä¸­ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ª<strong>éšå¼å¯¹è±¡å‚æ•°ï¼ˆimplicit object parameterï¼‰</strong>ï¼Œå…¶å€¼ä¸º<strong>å½“å‰æ­£åœ¨è°ƒç”¨è¯¥éé™æ€æˆå‘˜å‡½æ•°çš„å¯¹è±¡åœ°å€</strong>ã€‚</p>
<p>å½¢å¼åŒ–åœ°è¯´ï¼š</p>
<blockquote>
<p>åœ¨éé™æ€æˆå‘˜å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code> æŒ‡å‘è¯¥æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡å®ä¾‹ã€‚</p>
</blockquote>
<p>ç¼–è¯‘å™¨åœ¨è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œä¼š<strong>éšå¼åœ°</strong>å°†å¯¹è±¡åœ°å€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="built_in">f</span>(arg);</span><br></pre></td></tr></table></figure>

<p>ç­‰ä»·äºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">f</span>(&amp;obj, arg);</span><br></pre></td></tr></table></figure>

<p><code>this</code> çš„ç±»å‹è§„åˆ™ä¸ºï¼š</p>
<ol>
<li><p>ä¸€èˆ¬æˆå‘˜å‡½æ•°</p>
<p>å¯¹äºç±» <code>X</code> çš„é <code>const</code> æˆå‘˜å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">X</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>f()</code> å†…éƒ¨ï¼šthis çš„ç±»å‹ä¸ºï¼š<code>X*</code></p>
</li>
<li><p><code>const</code> æˆå‘˜å‡½æ•°</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">X</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>f() const</code> å†…éƒ¨ï¼šthis çš„ç±»å‹ä¸ºï¼š<code>const X*</code></p>
<p>å› æ­¤ï¼Œ<code>const</code> æˆå‘˜å‡½æ•°ä¸­ä¸èƒ½ä¿®æ”¹å¯¹è±¡çš„é <code>mutable</code> æˆå‘˜ï¼Œè¿™æ˜¯<strong>ç±»å‹ç³»ç»Ÿå±‚é¢çš„çº¦æŸ</strong>ã€‚</p>
</li>
<li><p>æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°</p>
<p>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°<strong>ä¸èƒ½è¢« cv ä¿®é¥°</strong>ï¼Œå› æ­¤åœ¨å…¶ä¸­ï¼šthis çš„ç±»å‹æ’ä¸ºï¼š<code>X*</code></p>
<p>å³ä½¿æ­£åœ¨æ„é€ æˆ–ææ„çš„æ˜¯ <code>const X</code> å¯¹è±¡ï¼Œè¯¥é™åˆ¶åœ¨æ„é€ &#x2F;ææ„é˜¶æ®µå¹¶ä¸ç”Ÿæ•ˆã€‚</p>
</li>
</ol>
<blockquote>
<p>[!tip]</p>
<p><code>this</code> çš„ä½œç”¨åŸŸä¸ä½¿ç”¨é™åˆ¶:</p>
<ol>
<li><p>ä»…å­˜åœ¨äºéšå¼å¯¹è±¡æˆå‘˜å‡½æ•°ç›¸å…³çš„ä¸Šä¸‹æ–‡</p>
<p><code>this</code> åªèƒ½å‡ºç°åœ¨ä»¥ä¸‹è¯­å¢ƒä¸­ï¼š</p>
<ul>
<li>éé™æ€æˆå‘˜å‡½æ•°ä½“</li>
<li>æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</li>
<li>é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨</li>
<li>æˆå‘˜å‡½æ•°å£°æ˜ä¸­çš„è¿”å›ç±»å‹ã€å¼‚å¸¸è¯´æ˜</li>
<li>lambda æ•è·åˆ—è¡¨</li>
</ul>
<p><strong>ä¸èƒ½åœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>é™æ€æˆå‘˜å‡½æ•°</li>
<li>è‡ªç”±å‡½æ•°</li>
<li>ç±»ä½œç”¨åŸŸä¸­ï¼ˆéåˆå§‹åŒ–ä¸Šä¸‹æ–‡ï¼‰</li>
</ul>
</li>
<li><p><code>this</code> åªä¸æœ€å†…å±‚å°é—­ç±»å…³è”</p>
<p>å³ä½¿åœ¨åµŒå¥—ç±»å‹æˆ–å±€éƒ¨ç±»ä¸­ï¼Œ<code>this</code> <strong>ä¸ä¼šè‡ªåŠ¨æŒ‡å‘å¤–å±‚ç±»å¯¹è±¡</strong>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">Inner</span> &#123;</span><br><span class="line">            <span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>; <span class="comment">// æŒ‡å‘ Innerï¼Œè€Œä¸æ˜¯ Outer</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<p>[!note]</p>
<p><code>this</code>æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼š</p>
<ol>
<li><p>åç§°é®è”½ï¼ˆname hidingï¼‰</p>
<p>å½“æˆå‘˜åè¢«å‡½æ•°å‚æ•°æˆ–å±€éƒ¨å˜é‡é®è”½æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ <code>this-&gt;</code> æ˜ç¡®è®¿é—®æˆå‘˜ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">X</span> &#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨¡æ¿ä¸­çš„ä¾èµ–åé—®é¢˜ï¼ˆtwo-phase lookupï¼‰</p>
<p>åœ¨ç±»æ¨¡æ¿ä¸­ï¼Œå¦‚æœæˆå‘˜æ¥è‡ª<strong>ä¾èµ–åŸºç±»</strong>ï¼Œç¼–è¯‘å™¨åœ¨ç¬¬ä¸€é˜¶æ®µæŸ¥æ‰¾æ—¶æ— æ³•ç¡®å®šå…¶å­˜åœ¨ï¼Œå¿…é¡»æ˜¾å¼ä½¿ç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>-&gt;member;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯è¯­ä¹‰è§„åˆ™ï¼Œè€Œéç¼–ç é£æ ¼é—®é¢˜ã€‚</p>
</li>
</ol>
</blockquote>
<blockquote>
<p>[!important] </p>
<p>æ„é€ æœŸé—´å¯¹å¯¹è±¡çš„è®¿é—®è§„åˆ™:åœ¨å¯¹è±¡æ„é€ æœŸé—´ï¼Œ<strong>åªæœ‰é€šè¿‡ <code>this</code> æŒ‡é’ˆè·å¾—çš„å¯¹è±¡å­å¯¹è±¡è®¿é—®æ˜¯å¯é çš„</strong>ã€‚</p>
<p>ä»¥ä¸‹ä»£ç æ˜¯æœªå®šä¹‰&#x2F;æœªæŒ‡å®šè¡Œä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> D d;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">D</span> &#123;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    <span class="built_in">D</span>(<span class="type">int</span> x) : <span class="built_in">a</span>(x), <span class="built_in">b</span>(d.a) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åŸå› åœ¨äºï¼š</p>
<ul>
<li><code>d.a</code> å¹¶éé€šè¿‡ <code>this</code> è®¿é—®</li>
<li>å¯¹è±¡å°šæœªå®Œæˆæ„é€ </li>
</ul>
<p><strong>è§„èŒƒæ€§åŸåˆ™ï¼š</strong></p>
<blockquote>
<p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œé¿å…é€šè¿‡é™¤ <code>this</code> ä»¥å¤–çš„é€”å¾„è®¿é—®å½“å‰å¯¹è±¡ã€‚</p>
</blockquote>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://youshouldtrustme.github.io">ryf</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://youshouldtrustme.github.io/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C++/">https://youshouldtrustme.github.io/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C++/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://youshouldtrustme.github.io" target="_blank">ğŸ­â€‹ä½ è¦ä¿¡æˆ‘å•Šã®åšå®¢â€‹</a>ï¼</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/RandomCoverImage/random_12.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Asm/" title="Asm"><img class="cover" src="https://www.ruanyifeng.com/blogimg/asset/2018/bg2018012206.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">Asm</div></div><div class="info-2"><div class="info-item-1">å‚è€ƒé“¾æ¥æ±‡ç¼–è¯­è¨€å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— æ±‡ç¼–è¯­è¨€ æ•™ç¨‹ | å‚è€ƒæ‰‹å†Œ (cankaoshouce.com) Guide to x86 Assembly GCC-Inline-Assembly-HOWTO â€” GCC-Inline-Assembly-HOWTO è¯‘ï¼šGCCå†…è”æ±‡ç¼–å…¥é—¨ - ç®€ä¹¦ (jianshu.com) Arm A-profile A32&#x2F;T32 Instruction Set Architecture åŸºç¡€çŸ¥è¯†å¼•è¨€æˆ‘ä»¬çŸ¥é“ï¼ŒCPU åªè´Ÿè´£è®¡ç®—ï¼Œæœ¬èº«ä¸å…·å¤‡æ™ºèƒ½ã€‚ä½ è¾“å…¥ä¸€æ¡æŒ‡ä»¤ï¼ˆinstructionï¼‰ï¼Œå®ƒå°±è¿è¡Œä¸€æ¬¡ï¼Œç„¶ååœä¸‹æ¥ï¼Œç­‰å¾…ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚ è¿™äº›æŒ‡ä»¤éƒ½æ˜¯äºŒè¿›åˆ¶çš„ï¼Œç§°ä¸ºæ“ä½œç ï¼ˆopcodeï¼‰ï¼Œæ¯”å¦‚åŠ æ³•æŒ‡ä»¤å°±æ˜¯00000011ã€‚ç¼–è¯‘å™¨çš„ä½œç”¨ï¼Œå°±æ˜¯å°†é«˜çº§è¯­è¨€å†™å¥½çš„ç¨‹åºï¼Œç¿»è¯‘æˆä¸€æ¡æ¡æ“ä½œç ã€‚ å¯¹äºäººç±»æ¥è¯´ï¼ŒäºŒè¿›åˆ¶ç¨‹åºæ˜¯ä¸å¯è¯»çš„ï¼Œæ ¹æœ¬çœ‹ä¸å‡ºæ¥æœºå™¨å¹²äº†ä»€ä¹ˆã€‚ä¸ºäº†è§£å†³å¯è¯»æ€§çš„é—®é¢˜ï¼Œä»¥åŠå¶å°”çš„ç¼–è¾‘éœ€æ±‚ï¼Œå°±è¯ç”Ÿäº†æ±‡ç¼–è¯­è¨€ã€‚ æ±‡ç¼–è¯­è¨€æ˜¯äºŒè¿›åˆ¶æŒ‡ä»¤çš„æ–‡æœ¬å½¢å¼ï¼Œä¸æŒ‡ä»¤æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚æ¯”å¦‚ï¼ŒåŠ æ³•æŒ‡ä»¤00000011å†™æˆæ±‡ç¼–è¯­è¨€å°±æ˜¯ ADDã€‚åªè¦è¿˜åŸæˆäºŒè¿›åˆ¶ï¼Œæ±‡ç¼–è¯­è¨€...</div></div></div></a><a class="pagination-related" href="/2026/01/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Batch/" title="Batch"><img class="cover" src="/img/RandomCoverImage/random_5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">Batch</div></div><div class="info-2"><div class="info-item-1">æ‰¹å¤„ç†åŸºç¡€æ³¨é‡Š REM æˆ– :: ç”¨äºæ·»åŠ æ³¨é‡Šã€‚æ³¨é‡Šä¸ä¼šè¢«æ‰§è¡Œã€‚ 12REM è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š:: è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ³¨é‡Š  æ˜¾ç¤ºæ–‡æœ¬ echo æ˜¾ç¤ºæ–‡æœ¬ã€‚@echo off å¯ä»¥å…³é—­å›æ˜¾ï¼ˆå³å…³é—­å‘½ä»¤æœ¬èº«çš„æ˜¾ç¤ºï¼‰ï¼Œä½†ä¿ç•™è¾“å‡ºã€‚ 123echo Hello, World!@echo offecho è¿™è¡Œä»£ç åªæ˜¾ç¤ºè¾“å‡ºï¼Œä¸æ˜¾ç¤ºå‘½ä»¤æœ¬èº«  å˜é‡ set ç”¨äºå®šä¹‰å˜é‡ï¼Œ%variable% ç”¨äºè®¿é—®å˜é‡å€¼ã€‚ 12set myVar=Helloecho %myVar% World!  set /p ä»ç”¨æˆ·è¾“å…¥ä¸­è·å–å˜é‡å€¼ã€‚ 12set /p userInput=Please enter your name: echo Hello, %userInput%!  æ¡ä»¶è¯­å¥ if ç”¨äºæ‰§è¡Œæ¡ä»¶æ£€æŸ¥ï¼Œå¯ä»¥ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒã€æ•°å€¼æ¯”è¾ƒå’Œæ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥ã€‚ 12if &quot;%myVar%&quot;==&quot;Hello&quot; echo It is Hello!if exist &quot;file.txt&quot; echo File exists!   /iï¼šå¿½ç•¥å¤§å°å†™ã€‚   æ¯”è¾ƒæ“ä½œç¬¦ï¼š  å­—ç¬¦...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ryf</div><div class="author-info-description">åµŒå…¥å¼èœé¸Ÿ</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">86</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/youShouldTrustMe"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">1.</span> <span class="toc-text">å‚è€ƒé“¾æ¥</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">æ•°æ®ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vector"><span class="toc-number">2.1.</span> <span class="toc-text">vector</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.1.1.</span> <span class="toc-text">å¢åŠ æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hash-map"><span class="toc-number">2.2.</span> <span class="toc-text">hash map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">å¼•å…¥å¤´æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">2.2.2.</span> <span class="toc-text">åŸºæœ¬ç”¨æ³•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OOP"><span class="toc-number">3.1.</span> <span class="toc-text">OOP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E"><span class="toc-number">3.2.</span> <span class="toc-text">å£°æ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.1.</span> <span class="toc-text">å£°æ˜è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%91%98%E8%A7%84%E8%8C%83"><span class="toc-number">3.2.2.</span> <span class="toc-text">æˆå‘˜è§„èŒƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%90%91%E5%A3%B0%E6%98%8E"><span class="toc-number">3.2.3.</span> <span class="toc-text">å‰å‘å£°æ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E7%B1%BB"><span class="toc-number">3.2.4.</span> <span class="toc-text">å±€éƒ¨ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%90%E5%91%98"><span class="toc-number">3.3.</span> <span class="toc-text">æˆå‘˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E9%9D%99%E6%80%81%E6%95%B0%E6%8D%AE%E6%88%90%E5%91%98"><span class="toc-number">3.3.1.</span> <span class="toc-text">éé™æ€æ•°æ®æˆå‘˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E-1"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">å£°æ˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">æˆå‘˜åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%B3%95"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">ç”¨æ³•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">3.3.2.</span> <span class="toc-text">éé™æ€æˆå‘˜å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="toc-number">3.3.3.</span> <span class="toc-text">é™æ€æˆå‘˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%AF%B4%E6%98%8E%E7%AC%A6"><span class="toc-number">3.4.</span> <span class="toc-text">è®¿é—®è¯´æ˜ç¬¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.</span> <span class="toc-text">ç‰¹æ®Šæˆå‘˜å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.1.</span> <span class="toc-text">æ„é€ å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">3.5.1.1.</span> <span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8"><span class="toc-number">3.5.1.2.</span> <span class="toc-text">æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.5.1.3.</span> <span class="toc-text">åˆå§‹åŒ–é¡ºåº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A7%94%E6%89%98%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.1.4.</span> <span class="toc-text">å§”æ‰˜æ„é€ å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.</span> <span class="toc-text">ææ„å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">3.5.2.1.</span> <span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.5.2.2.</span> <span class="toc-text">ææ„å‡½æ•°ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%86%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.2.1.</span> <span class="toc-text">å‡†ææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.2.2.</span> <span class="toc-text">éšå¼ææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B3%E5%87%A1%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.2.3.</span> <span class="toc-text">å¹³å‡¡ææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.2.4.</span> <span class="toc-text">è™šææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%AF%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.2.5.</span> <span class="toc-text">çº¯è™šææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.2.2.6.</span> <span class="toc-text">åˆ é™¤ææ„å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.5.2.3.</span> <span class="toc-text">ææ„é¡ºåº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.3.</span> <span class="toc-text">è™šå‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.3.1.</span> <span class="toc-text">çº¯è™šå‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E5%8F%98%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.5.3.2.</span> <span class="toc-text">åå˜è¿”å›ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0-1"><span class="toc-number">3.5.3.3.</span> <span class="toc-text">è™šææ„å‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">3.5.3.4.</span> <span class="toc-text">æŠ½è±¡ç±»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%86%99%E5%87%BD%E6%95%B0"><span class="toc-number">3.5.4.</span> <span class="toc-text">é‡å†™å‡½æ•°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-override-%E4%B8%8D%E6%98%AF%E8%AF%AD%E4%B9%89%EF%BC%8C%E8%80%8C%E6%98%AF%E2%80%9C%E7%BC%96%E8%AF%91%E6%9C%9F%E6%A0%A1%E9%AA%8C%E5%B7%A5%E5%85%B7%E2%80%9D"><span class="toc-number">4.</span> <span class="toc-text">5. override ä¸æ˜¯è¯­ä¹‰ï¼Œè€Œæ˜¯â€œç¼–è¯‘æœŸæ ¡éªŒå·¥å…·â€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E7%A8%8B%E5%87%86%E5%88%99%EF%BC%88%E9%9D%9E%E5%B8%B8%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-number">4.0.1.</span> <span class="toc-text">å·¥ç¨‹å‡†åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E9%9A%90%E8%97%8F%EF%BC%88hiding%EF%BC%89-vs-%E9%87%8D%E5%86%99%EF%BC%88override%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">6. éšè—ï¼ˆhidingï¼‰ vs é‡å†™ï¼ˆoverrideï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">5.0.1.</span> <span class="toc-text">ç»“è®º</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E6%9C%80%E7%BB%88%E9%87%8D%E5%86%99%E8%80%85%EF%BC%88final-overrider%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">7. æœ€ç»ˆé‡å†™è€…ï¼ˆfinal overriderï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#friend"><span class="toc-number">6.1.</span> <span class="toc-text">friend</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">6.1.1.</span> <span class="toc-text">è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8B%E5%85%83%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%8B%E5%85%83%E7%B1%BB"><span class="toc-number">6.1.2.</span> <span class="toc-text">å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">6.1.3.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this"><span class="toc-number">6.2.</span> <span class="toc-text">this</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/QAC/" title="QAC"><img src="/img/RandomCoverImage/random_12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="QAC"/></a><div class="content"><a class="title" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/QAC/" title="QAC">QAC</a><time datetime="2026-01-21T02:07:02.616Z" title="å‘è¡¨äº 2026-01-21 02:07:02">2026-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Qt/" title="Qt"><img src="/img/RandomCoverImage/random_5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qt"/></a><div class="content"><a class="title" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Qt/" title="Qt">Qt</a><time datetime="2026-01-21T02:07:02.616Z" title="å‘è¡¨äº 2026-01-21 02:07:02">2026-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Tessy/" title="Tessy"><img src="/img/RandomCoverImage/random_9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Tessy"/></a><div class="content"><a class="title" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Tessy/" title="Tessy">Tessy</a><time datetime="2026-01-21T02:07:02.616Z" title="å‘è¡¨äº 2026-01-21 02:07:02">2026-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Vim/" title="Vim"><img src="/img/RandomCoverImage/random_16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vim"/></a><div class="content"><a class="title" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Vim/" title="Vim">Vim</a><time datetime="2026-01-21T02:07:02.616Z" title="å‘è¡¨äº 2026-01-21 02:07:02">2026-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Vscode/" title="Vscode"><img src="/img/RandomCoverImage/random_2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vscode"/></a><div class="content"><a class="title" href="/2026/01/21/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/Vscode/" title="Vscode">Vscode</a><time datetime="2026-01-21T02:07:02.616Z" title="å‘è¡¨äº 2026-01-21 02:07:02">2026-01-21</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2024 - 2026 By ryf</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async src="//at.alicdn.com/t/c/font_5020701_ump6lop7tzm.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://youshouldtrustme.github.io/categories/åµŒå…¥å¼/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ åµŒå…¥å¼ (25)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youshouldtrustme.github.io/categories/åŸºç¡€çŸ¥è¯†/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¼ åŸºç¡€çŸ¥è¯† (13)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youshouldtrustme.github.io/categories/ç¼–ç¨‹è¯­è¨€/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ ç¼–ç¨‹è¯­è¨€ (18)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://youshouldtrustme.github.io/categories/è½¯ä»¶åŠå·¥å…·/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŸ è½¯ä»¶åŠå·¥å…·çš„ä½¿ç”¨ (20)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://youshouldtrustme.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/UDS/" alt=""><img width="48" height="48" src="https://gitee.com/you-trust-me/pictures/raw/master/Images/image-20251125085207933.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-21</span><a class="blog-slider__title" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/UDS/" alt="">UDS</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/UDS/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/SPI/" alt=""><img width="48" height="48" src="https://gitlab.com/18355291538/picture/-/raw/main/pictures/2024/09/14_13_52_58_202409141352788.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-21</span><a class="blog-slider__title" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/SPI/" alt="">SPI</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/SPI/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/IIC/" alt=""><img width="48" height="48" src="https://gitlab.com/18355291538/picture/-/raw/main/pictures/2024/09/13_13_59_26_202409131359673.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-21</span><a class="blog-slider__title" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/IIC/" alt="">IIC</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/IIC/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/CAN/" alt=""><img width="48" height="48" src="https://gitee.com/you-trust-me/pictures/raw/master/Images/image-20251125132704192.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-21</span><a class="blog-slider__title" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/CAN/" alt="">CAN</a><div class="blog-slider__text">å†æ€ä¹ˆçœ‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæè¿°å®ƒçš„å•¦ï¼</div><a class="blog-slider__button" href="2026/01/21/åµŒå…¥å¼/é€šä¿¡åè®®/CAN/" alt="">è¯¦æƒ…   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>
---
title: 软件基础

date: 2025-03-01
lastmod: 2025-03-01
tags:
- 基础知识
---



# 参考链接

[这些嵌入式知识助 你秋招，也助你进阶 (qq.com)](https://mp.weixin.qq.com/s/reQv2l8EBYWu1P0nDd73QA)

# AUTOSAR架构

AUTOSAR（Automotive Open System Architecture）是一个用于开发汽车电子系统的软件架构标准。它通过标准化的架构提高了软件的可重用性和可移植性，减少了开发时间和成本。以下是AUTOSAR架构的详细描述：

### AUTOSAR架构概述

AUTOSAR架构由多个层次组成，包括应用软件层（Application Layer）、运行时环境（Runtime Environment, RTE）和基础软件层（Basic Software, BSW）。这些层次共同工作，提供完整的汽车电子系统解决方案。

### AUTOSAR层次结构

1. **Application Layer（应用层，ASW）**
   - 包含所有的应用程序组件，这些组件定义了具体的功能，如传感器数据处理、控制算法等。
   - 应用组件通过接口与RTE进行通信，而不是直接与硬件交互。

2. **Runtime Environment (RTE)（运行时环境）**
   - 作为应用层和基础软件层之间的抽象层，提供标准化的接口。
   - 管理应用组件之间以及应用组件与基础软件之间的通信。
   - 确保组件的独立性，使得应用软件能够在不同的硬件平台上运行。

3. **Basic Software (BSW)（基础软件层）**
   - 包含所有的基础服务和驱动程序，为应用软件提供硬件无关的标准化服务。
   - **BSW**进一步划分为四个主要部分：
     - **Microcontroller Abstraction Layer (MCAL)（微控制器抽象层）**：提供对微控制器和外设的抽象接口。
     - **ECU Abstraction Layer（ECU抽象层）**：实现ECU级别的硬件抽象，提供对外围设备的访问。
     - **Service Layer（服务层）**：提供系统服务，如操作系统、存储管理、诊断服务等。
     - **Complex Device Drivers（复杂设备驱动）**：处理复杂的硬件设备，不适合通过MCAL和ECU抽象层实现。

### AUTOSAR架构图示

```
---------------------------------
|        Application Layer      |
|          (ASW)                |
---------------------------------
|     Runtime Environment (RTE)  |
---------------------------------
|          Basic Software        |
|             (BSW)              |
|  - Microcontroller Abstraction |
|    Layer (MCAL)                |
|  - ECU Abstraction Layer       |
|  - Services Layer              |
|  - Complex Device Drivers      |
---------------------------------
|        Hardware Layer          |
---------------------------------
```

### 主要特点和优势

1. **模块化**：AUTOSAR架构将系统分成多个独立的模块，允许并行开发和测试。
2. **可重用性**：标准化的接口和组件设计提高了代码的可重用性，减少了重复开发的工作量。
3. **可移植性**：应用层组件通过RTE与硬件层交互，使得应用软件可以在不同的硬件平台上运行。
4. **可扩展性**：灵活的架构设计允许添加新功能和扩展现有功能，而不需要对整个系统进行重大修改。
5. **标准化**：提供了统一的标准和规范，简化了不同供应商和开发团队之间的协作。

### 应用案例

AUTOSAR广泛应用于现代汽车电子系统的开发，如发动机控制单元（ECU）、车身控制模块（BCM）、高级驾驶辅助系统（ADAS）等。通过采用AUTOSAR架构，汽车制造商和供应商能够更高效地开发高质量的软件系统，并应对不断变化的市场需求和技术挑战。

# BSP

在嵌入式系统开发中，BSP 的全称是 **"Board Support Package"**（板级支持包）。BSP 是一个用于特定硬件平台的软件包，提供对硬件的抽象层，使操作系统和应用软件能够在特定的硬件平台上运行。BSP 通常包含以下内容：

1. **引导加载程序（Bootloader）**：负责系统启动和初始化硬件，加载操作系统内核。
2. **硬件抽象层（HAL, Hardware Abstraction Layer）**：提供对硬件的抽象接口，屏蔽底层硬件的差异。
3. **驱动程序（Device Drivers）**：为硬件外设（如串口、网络接口、存储设备等）提供驱动程序。
4. **板级初始化代码（Board Initialization Code）**：负责板级硬件的初始化配置。
5. **操作系统集成**：将操作系统与特定硬件平台集成的必要配置和补丁。

### BSP 的作用

- **硬件抽象**：BSP 将硬件平台的细节封装起来，使操作系统和应用软件不必直接操作硬件，提高软件的可移植性。
- **硬件初始化**：在系统启动时对硬件进行初始化配置，为操作系统和应用软件提供一个稳定的运行环境。
- **设备驱动**：提供对硬件设备的访问接口，使得应用程序能够通过标准化接口访问硬件。

### BSP 的典型目录结构

一个典型的 BSP 目录结构可能如下所示：

```
bsp/
├── bootloader/
│   ├── src/
│   └── include/
├── hal/
│   ├── src/
│   └── include/
├── drivers/
│   ├── uart/
│   │   ├── uart.c
│   │   └── uart.h
│   ├── spi/
│   │   ├── spi.c
│   │   └── spi.h
│   ├── i2c/
│   │   ├── i2c.c
│   │   └── i2c.h
│   └── ...
├── board_init/
│   ├── src/
│   │   ├── board_init.c
│   └── include/
│       └── board_init.h
├── os/
│   ├── patches/
│   ├── config/
│   └── scripts/
└── doc/
    └── bsp_documentation.md
```

### 示例说明

- **bootloader/**：存放引导加载程序的源码和头文件。
- **hal/**：存放硬件抽象层的源码和头文件。
- **drivers/**：存放各种硬件外设的驱动程序，如 UART、SPI、I2C 等。
- **board_init/**：存放板级初始化代码。
- **os/**：存放操作系统集成相关的配置、补丁和脚本。
- **doc/**：存放BSP的相关文档。

### 使用 BSP 的步骤

1. **引导加载程序开发**：编写引导加载程序，初始化硬件并加载操作系统内核。
2. **硬件抽象层实现**：编写硬件抽象层代码，提供对硬件的标准化接口。
3. **驱动程序开发**：编写各种外设的驱动程序，确保所有硬件设备都能被正确访问和控制。
4. **板级初始化**：编写板级初始化代码，配置板级资源和外设。
5. **操作系统集成**：将操作系统内核与BSP集成，进行必要的配置和调试。
6. **测试与验证**：对整个系统进行测试，验证硬件和软件的正确性和稳定性。

通过BSP，可以大大简化嵌入式系统开发的过程，提高开发效率和软件的可移植性。如果有任何具体问题或需要进一步的帮助，请随时告知！

# ECU

ECU最初指的是Engine Control Unit，即引擎控制单元，特指电喷引擎的电子控制系统。但是随着汽车电子的迅速发展，ECU的定义也发生了巨大的变化，现在大多数指Electronic Control Unit，即电子控制单元（有时也被简称为电控单元），泛指汽车上所有电子控制系统，可以是转向ECU，也可以是调速ECU、空调ECU等。

一个ECU主要由硬件和软件两大部分组成。硬件主要负责采集输入信号、输出控制信号、通信接口控制等。软件主要是基于嵌入式系统对输入信号进行运算，并将运算结果转换为控制信号输出。随着嵌入式开发技术的快速发展和汽车电子自动化程度越来越高，ECU的硬件软件架构越来越复杂，功能也越来越强大。

## 硬件架构

简单来说，ECU硬件架构主要由微处理器（Microcontroller Unit, MCU）和外围电路组成。ECU的核心部件主要是MCU，根据ECU不同的功能需求，可以选用不同型号的MCU。随着微电子技术的高速发展，MCU的运算能力越来越强大，功能也越来越复杂。过去微处理器多数是8位和16位，现在主流芯片都是16位或32位，甚至64位的。而汽车电子级的MCU比消费类电子的MCU有着更高的可靠性和安全性要求。  在ECU的硬件架构中，MCU是“心脏”，但也仍然需要其他处理模块和外围电路组成整个“躯干”。  

![image-20240704153631772](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2024/07/4_15_36_31_202407041536929.png)

## 软件架构

同样地，对于软件架构，不同的ECU，功能复杂程度不一样，软件系统需要处理的信号、算法差异也很大。复杂ECU的系统如车载导航，需要使用Linux/Android等操作系统来处理很多复杂任务.

![image-20240704153823651](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2024/07/4_15_38_23_202407041538749.png)

## ECU的主要功能和种类

1. **发动机控制单元（Engine Control Unit）**：
    - 管理发动机的运行，包括燃油喷射、点火时刻、空燃比和排放控制等。
    - 提高发动机效率，优化燃油经济性并减少排放。

2. **变速器控制单元（Transmission Control Unit）**：
    - 控制自动变速器的换档过程，确保平稳和高效的换档。
    - 优化变速器的性能和耐久性。

3. **车身控制模块（Body Control Module, BCM）**：
    - 管理车身电子设备，如照明系统、车窗、电动门锁和空调系统等。
    - 增加车辆的舒适性和安全性。

4. **防抱死制动系统控制单元（ABS Control Unit）**：
    - 监控车轮速度并控制制动压力，防止车轮在紧急制动时抱死。
    - 提高车辆在紧急制动时的稳定性和可控性。

5. **气囊控制单元（Airbag Control Unit）**：
    - 监控碰撞传感器并在碰撞发生时触发气囊系统。
    - 提高乘员在碰撞中的安全性。

6. **信息娱乐系统控制单元（Infotainment Control Unit）**：
    - 管理车辆的信息娱乐系统，包括音频、导航和通信功能。
    - 提供驾驶员和乘客的娱乐和导航服务。

## ECU的工作原理

1. **数据采集**：
    - 通过传感器（如温度传感器、速度传感器、压力传感器等）采集车辆的运行数据。

2. **数据处理**：
    - ECU内部的微处理器根据预定的算法和程序处理传感器数据，做出相应的决策。

3. **执行控制**：
    - ECU通过执行器（如喷油器、点火线圈、电动机等）实施控制指令，管理车辆的各个子系统。

## ECU的重要性

- **提高性能**：优化车辆的运行参数，提高发动机效率和车辆性能。
- **降低排放**：通过精确控制燃烧过程，减少尾气排放。
- **增强安全性**：管理安全系统（如ABS、气囊等），提高车辆的安全性。
- **增加舒适性**：控制车身功能和信息娱乐系统，提升驾乘体验。

ECU是现代汽车技术的核心，随着汽车电子化和智能化的发展，ECU的功能和复杂性也在不断增加。

# ASSIC码表

| Bin(二进制)  | Oct(八进制) | Dec(十进制) | Hex(十六进制) |            缩写/字符            |   解释   |
| :-------: | :------: | :------: | :-------: | :-------------------------: | :----: |
| 0000 0000 |    00    |    0     |   0x00    |          NUL(null)          |  空字符   |
| 0000 0001 |    01    |    1     |   0x01    |   SOH(start of headline)    |  标题开始  |
| 0000 0010 |    02    |    2     |   0x02    |     STX (start of text)     |  正文开始  |
| 0000 0011 |    03    |    3     |   0x03    |      ETX (end of text)      |  正文结束  |
| 0000 0100 |    04    |    4     |   0x04    |  EOT (end of transmission)  |  传输结束  |
| 0000 0101 |    05    |    5     |   0x05    |        ENQ (enquiry)        |   请求   |
| 0000 0110 |    06    |    6     |   0x06    |      ACK (acknowledge)      |  收到通知  |
| 0000 0111 |    07    |    7     |   0x07    |         BEL (bell)          |   响铃   |
| 0000 1000 |   010    |    8     |   0x08    |       BS (backspace)        |   退格   |
| 0000 1001 |   011    |    9     |   0x09    |     HT (horizontal tab)     | 水平制表符  |
| 0000 1010 |   012    |    10    |   0x0A    | LF (NL line feed, new line) |  换行键   |
| 0000 1011 |   013    |    11    |   0x0B    |      VT (vertical tab)      | 垂直制表符  |
| 0000 1100 |   014    |    12    |   0x0C    | FF (NP form feed, new page) |  换页键   |
| 0000 1101 |   015    |    13    |   0x0D    |    CR (carriage return)     |  回车键   |
| 0000 1110 |   016    |    14    |   0x0E    |       SO (shift out)        |  不用切换  |
| 0000 1111 |   017    |    15    |   0x0F    |        SI (shift in)        |  启用切换  |
| 0001 0000 |   020    |    16    |   0x10    |   DLE (data link escape)    | 数据链路转义 |
| 0001 0001 |   021    |    17    |   0x11    |   DC1 (device control 1)    | 设备控制1  |
| 0001 0010 |   022    |    18    |   0x12    |   DC2 (device control 2)    | 设备控制2  |
| 0001 0011 |   023    |    19    |   0x13    |   DC3 (device control 3)    | 设备控制3  |
| 0001 0100 |   024    |    20    |   0x14    |   DC4 (device control 4)    | 设备控制4  |
| 0001 0101 |   025    |    21    |   0x15    | NAK (negative acknowledge)  |  拒绝接收  |
| 0001 0110 |   026    |    22    |   0x16    |   SYN (synchronous idle)    |  同步空闲  |
| 0001 0111 |   027    |    23    |   0x17    |  ETB (end of trans. block)  | 结束传输块  |
| 0001 1000 |   030    |    24    |   0x18    |        CAN (cancel)         |   取消   |
| 0001 1001 |   031    |    25    |   0x19    |     EM (end of medium)      |  媒介结束  |
| 0001 1010 |   032    |    26    |   0x1A    |      SUB (substitute)       |   代替   |
| 0001 1011 |   033    |    27    |   0x1B    |        ESC (escape)         | 换码(溢出) |
| 0001 1100 |   034    |    28    |   0x1C    |     FS (file separator)     | 文件分隔符  |
| 0001 1101 |   035    |    29    |   0x1D    |    GS (group separator)     |  分组符   |
| 0001 1110 |   036    |    30    |   0x1E    |    RS (record separator)    | 记录分隔符  |
| 0001 1111 |   037    |    31    |   0x1F    |     US (unit separator)     | 单元分隔符  |
| 0010 0000 |   040    |    32    |   0x20    |           (space)           |   空格   |
| 0010 0001 |   041    |    33    |   0x21    |              !              |   叹号   |
| 0010 0010 |   042    |    34    |   0x22    |              "              |  双引号   |
| 0010 0011 |   043    |    35    |   0x23    |              #              |   井号   |
| 0010 0100 |   044    |    36    |   0x24    |              $              |  美元符   |
| 0010 0101 |   045    |    37    |   0x25    |              %              |  百分号   |
| 0010 0110 |   046    |    38    |   0x26    |              &              |   和号   |
| 0010 0111 |   047    |    39    |   0x27    |              '              |  闭单引号  |
| 0010 1000 |   050    |    40    |   0x28    |              (              |  开括号   |
| 0010 1001 |   051    |    41    |   0x29    |              )              |  闭括号   |
| 0010 1010 |   052    |    42    |   0x2A    |              *              |   星号   |
| 0010 1011 |   053    |    43    |   0x2B    |              +              |   加号   |
| 0010 1100 |   054    |    44    |   0x2C    |              ,              |   逗号   |
| 0010 1101 |   055    |    45    |   0x2D    |              -              | 减号/破折号 |
| 0010 1110 |   056    |    46    |   0x2E    |              .              |   句号   |
| 0010 1111 |   057    |    47    |   0x2F    |              /              |   斜杠   |
| 0011 0000 |   060    |    48    |   0x30    |              0              |  字符0   |
| 0011 0001 |   061    |    49    |   0x31    |              1              |  字符1   |
| 0011 0010 |   062    |    50    |   0x32    |              2              |  字符2   |
| 0011 0011 |   063    |    51    |   0x33    |              3              |  字符3   |
| 0011 0100 |   064    |    52    |   0x34    |              4              |  字符4   |
| 0011 0101 |   065    |    53    |   0x35    |              5              |  字符5   |
| 0011 0110 |   066    |    54    |   0x36    |              6              |  字符6   |
| 0011 0111 |   067    |    55    |   0x37    |              7              |  字符7   |
| 0011 1000 |   070    |    56    |   0x38    |              8              |  字符8   |
| 0011 1001 |   071    |    57    |   0x39    |              9              |  字符9   |
| 0011 1010 |   072    |    58    |   0x3A    |              :              |   冒号   |
| 0011 1011 |   073    |    59    |   0x3B    |              ;              |   分号   |
| 0011 1100 |   074    |    60    |   0x3C    |              <              |   小于   |
| 0011 1101 |   075    |    61    |   0x3D    |              =              |   等号   |
| 0011 1110 |   076    |    62    |   0x3E    |              >              |   大于   |
| 0011 1111 |   077    |    63    |   0x3F    |              ?              |   问号   |
| 0100 0000 |   0100   |    64    |   0x40    |              @              | 电子邮件符号 |
| 0100 0001 |   0101   |    65    |   0x41    |              A              | 大写字母A  |
| 0100 0010 |   0102   |    66    |   0x42    |              B              | 大写字母B  |
| 0100 0011 |   0103   |    67    |   0x43    |              C              | 大写字母C  |
| 0100 0100 |   0104   |    68    |   0x44    |              D              | 大写字母D  |
| 0100 0101 |   0105   |    69    |   0x45    |              E              | 大写字母E  |
| 0100 0110 |   0106   |    70    |   0x46    |              F              | 大写字母F  |
| 0100 0111 |   0107   |    71    |   0x47    |              G              | 大写字母G  |
| 0100 1000 |   0110   |    72    |   0x48    |              H              | 大写字母H  |
| 0100 1001 |   0111   |    73    |   0x49    |              I              | 大写字母I  |
| 01001010  |   0112   |    74    |   0x4A    |              J              | 大写字母J  |
| 0100 1011 |   0113   |    75    |   0x4B    |              K              | 大写字母K  |
| 0100 1100 |   0114   |    76    |   0x4C    |              L              | 大写字母L  |
| 0100 1101 |   0115   |    77    |   0x4D    |              M              | 大写字母M  |
| 0100 1110 |   0116   |    78    |   0x4E    |              N              | 大写字母N  |
| 0100 1111 |   0117   |    79    |   0x4F    |              O              | 大写字母O  |
| 0101 0000 |   0120   |    80    |   0x50    |              P              | 大写字母P  |
| 0101 0001 |   0121   |    81    |   0x51    |              Q              | 大写字母Q  |
| 0101 0010 |   0122   |    82    |   0x52    |              R              | 大写字母R  |
| 0101 0011 |   0123   |    83    |   0x53    |              S              | 大写字母S  |
| 0101 0100 |   0124   |    84    |   0x54    |              T              | 大写字母T  |
| 0101 0101 |   0125   |    85    |   0x55    |              U              | 大写字母U  |
| 0101 0110 |   0126   |    86    |   0x56    |              V              | 大写字母V  |
| 0101 0111 |   0127   |    87    |   0x57    |              W              | 大写字母W  |
| 0101 1000 |   0130   |    88    |   0x58    |              X              | 大写字母X  |
| 0101 1001 |   0131   |    89    |   0x59    |              Y              | 大写字母Y  |
| 0101 1010 |   0132   |    90    |   0x5A    |              Z              | 大写字母Z  |
| 0101 1011 |   0133   |    91    |   0x5B    |              [              |  开方括号  |
| 0101 1100 |   0134   |    92    |   0x5C    |              \              |  反斜杠   |
| 0101 1101 |   0135   |    93    |   0x5D    |              ]              |  闭方括号  |
| 0101 1110 |   0136   |    94    |   0x5E    |              ^              |  脱字符   |
| 0101 1111 |   0137   |    95    |   0x5F    |              _              |  下划线   |
| 0110 0000 |   0140   |    96    |   0x60    |              `              |  开单引号  |
| 0110 0001 |   0141   |    97    |   0x61    |              a              | 小写字母a  |
| 0110 0010 |   0142   |    98    |   0x62    |              b              | 小写字母b  |
| 0110 0011 |   0143   |    99    |   0x63    |              c              | 小写字母c  |
| 0110 0100 |   0144   |   100    |   0x64    |              d              | 小写字母d  |
| 0110 0101 |   0145   |   101    |   0x65    |              e              | 小写字母e  |
| 0110 0110 |   0146   |   102    |   0x66    |              f              | 小写字母f  |
| 0110 0111 |   0147   |   103    |   0x67    |              g              | 小写字母g  |
| 0110 1000 |   0150   |   104    |   0x68    |              h              | 小写字母h  |
| 0110 1001 |   0151   |   105    |   0x69    |              i              | 小写字母i  |
| 0110 1010 |   0152   |   106    |   0x6A    |              j              | 小写字母j  |
| 0110 1011 |   0153   |   107    |   0x6B    |              k              | 小写字母k  |
| 0110 1100 |   0154   |   108    |   0x6C    |              l              | 小写字母l  |
| 0110 1101 |   0155   |   109    |   0x6D    |              m              | 小写字母m  |
| 0110 1110 |   0156   |   110    |   0x6E    |              n              | 小写字母n  |
| 0110 1111 |   0157   |   111    |   0x6F    |              o              | 小写字母o  |
| 0111 0000 |   0160   |   112    |   0x70    |              p              | 小写字母p  |
| 0111 0001 |   0161   |   113    |   0x71    |              q              | 小写字母q  |
| 0111 0010 |   0162   |   114    |   0x72    |              r              | 小写字母r  |
| 0111 0011 |   0163   |   115    |   0x73    |              s              | 小写字母s  |
| 0111 0100 |   0164   |   116    |   0x74    |              t              | 小写字母t  |
| 0111 0101 |   0165   |   117    |   0x75    |              u              | 小写字母u  |
| 0111 0110 |   0166   |   118    |   0x76    |              v              | 小写字母v  |
| 0111 0111 |   0167   |   119    |   0x77    |              w              | 小写字母w  |
| 0111 1000 |   0170   |   120    |   0x78    |              x              | 小写字母x  |
| 0111 1001 |   0171   |   121    |   0x79    |              y              | 小写字母y  |
| 0111 1010 |   0172   |   122    |   0x7A    |              z              | 小写字母z  |
| 0111 1011 |   0173   |   123    |   0x7B    |              {              |  开花括号  |
| 0111 1100 |   0174   |   124    |   0x7C    |             \|              |   垂线   |
| 0111 1101 |   0175   |   125    |   0x7D    |              }              |  闭花括号  |
| 0111 1110 |   0176   |   126    |   0x7E    |              ~              |  波浪号   |
| 0111 1111 |   0177   |   127    |   0x7F    |        DEL (delete)         |   删除   |








































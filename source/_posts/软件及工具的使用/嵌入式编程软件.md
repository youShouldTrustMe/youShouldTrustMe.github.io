---
title: 嵌入式编程软件

categories: 
  - 软件及工具
---





# 参考链接

[CubeMX+VSCode+Ozone的STM32开发工作流（三）利用Ozone进行可视化调试和代码分析_ozone jlink-CSDN博客](https://blog.csdn.net/NeoZng/article/details/127980949)

[一、搭建Eclipse gcc mcu开发环境_ecplice 配置mcu-CSDN博客](https://blog.csdn.net/cuzhao_1798/article/details/126044552)

[深入理解工具链-基于Eclipse的嵌入式IDE快速入门_eclipse ide-CSDN博客](https://blog.csdn.net/lone5moon/article/details/120093848)

[Ozone使用介绍-基础功能 - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!](https://www.armbbs.cn/forum.php?mod=viewthread&tid=95855&highlight=Ozone)

[Eclipse汉化教程（官方汉化包，傻瓜式操作，附带中英文快捷切换方式以及常见问题解决方案）-CSDN博客](https://blog.csdn.net/qq_43736451/article/details/116240449)

# Eclipse

更为详细的使用教程可以参考[深入理解工具链-基于Eclipse的嵌入式IDE快速入门_eclipse ide-CSDN博客](https://blog.csdn.net/lone5moon/article/details/120093848)

## 所需文件

首先安装eclipse，从[Eclipse IDE for Embedded C/C++ Developers Eclipse Packages](https://www.eclipse.org/downloads/packages/release/2025-03/r/eclipse-ide-embedded-cc-developers)下载压缩包，解压即可，找到Eclipse双击即可打开。使用eclipse就需要使用交叉编译器，从[Downloads | GNU Arm Embedded Toolchain Downloads – Arm Developer](https://developer.arm.com/downloads/-/gnu-rm)上下载gcc-arm-none-eabi编译器，该编译器用于嵌入式gcc编译。最后要从[Releases | xPack Windows Build Tools](https://xpack-dev-tools.github.io/windows-build-tools-xpack/docs/releases/)上下载build工具包，以上是全部工具包。

> [!note]
>
> 还需要厂商的芯片包，需要结合自己的工程去下载。

## 环境配置

在搭建Eclipse之前需要先了解工程架构：

- 工作空间
  - .metadata文件夹：用于eclipse识别是否是eclipse的文件夹
  - 项目文件夹
    - .setting文件夹：用于保存项目的相关配置
    - 项目架构文件夹：ASW、BSW等自己的工程架构
    - .cproject
    - .project

为了减少工作量，我们可以給eclipse配置全局环境变量。打开`Tool Bar`中的`Preference`，配置全局变量，点击MCU选项卡：

1. 配置编译器的地址

   ![配置编译器地址](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_47_12_202503281547505.png)

2. 配置build工具地址：在之前下载的build工具就用在这

   ![配置build工具地址](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_48_12_202503281548938.png)

3. 配置JLink工具地址（可选）：如果使用Ozone，就不需要配置这个选项

   ![配置JLink工具地址](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_49_25_202503281549476.png)

4. 配置MCU芯片包地址：这一步需要下载芯片厂商的相关文件

   ![配置芯片包地址](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_52_50_202503281552596.png)

   该包是以下的文件结构：

   ```
   ├─.cache
   └─Keil
       ├─FM33A0XXEV_DFP
       │  └─0.0.4
       │      ├─Device
       │      │  ├─Include
       │      │  ├─IncludeIAR
       │      │  └─Source
       │      │      ├─ARM
       │      │      ├─GCC
       │      │      └─IAR
       │      ├─Flash
       │      └─SVD
       ├─FM33L0XX_DFP
       │  └─0.1.4
       │      ├─Device
       │      │  ├─Include
       │      │  └─Source
       │      │      └─GCC
       │      │          └─linker
       │      ├─Drivers
       │      ├─Flash
       │      └─SVD
       ├─FM33LC0XX_DFP
       │  └─3.0.1
       │      ├─Device
       │      │  ├─Include
       │      │  └─Source
       │      │      └─GCC
       │      │          └─linker
       │      ├─Flash
       │      │  └─备份
       │      └─SVD
       └─FM33LG0XX_DFP
           └─2.0.0
               ├─Device
               │  ├─Include
               │  └─Source
               │      └─GCC
               │          └─linker
               ├─Flash
               └─SVD
               
               
   ```

   > [!tip]
   >
   > 注意，该目录下有.repos.xml文件，如果有这个文件，说明你的路径选择的是对的

## 新建工程

双击打开eclipse时，需要选择一个路径作为工作空间。工作空间是你要建的项目的根路径，之后的引入头文件路径或者链接脚本等等需要路径的地方都是使用的该路径。

进入之后新建一个工程，依次点击*==file>new>C/C++ project==*

1. 选择工程类型

   ![Eclipse工程类型](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_33_55_202503281533077.png)

2. 配置项目类型、工具链及工程名，可以通过`Location`来选择将该项目建在哪，但是需要注意的是你将项目建在哪，你的项目文件应该在这个项目文件夹下，

   ![项目类型及工具链](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_35_36_202503281535248.png)

3. 配置需要部署的模式，debug是调试模式，release是发布模式。

   ![部署模式](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_38_3_202503281538172.png)

4. 配置工具链的位置

   ![配置工具链](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_38_58_202503281538599.png)

   > [!tip] 
   >
   > 一般来说，在安装好gcc之后会自动设置为环境变量，在安装的时候可以注意一下是否勾选了增加环境变量的选项。

此时在左侧栏已经可以看到相关文件了，如下图。如果想要往工程里加文件，只需要直接在文件系统中工程下增加文件，然后按`F5`刷新即可更新，Eclipse是直接读取文件系统中的文件，和IAR和Keil不一样，不需要增加源文件。

![image-20250328154000917](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_15_40_0_202503281540980.png)

## 工程配置

接下来需要按照自己的项目进行配置，在你的项目上右键，依次点击*==Properties>C/C++ Build>Settings==*

1. 配置目标处理器、指令集、大小端等。

   ![配置处理器](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_4_9_202503281604579.png)

2. 配置优化等级

   ![配置优化等级](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_5_7_202503281605927.png)

3. 配置调试等级

   ![配置调试等级](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_7_37_202503281607978.png)

4. 下面就要开始配置工程所需要的文件了，在配置这些之前如果了解Makefile会能更快的配置。

   ![配置工程文件](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_9_27_202503281609286.png)

   上图配置项依次是

   - 汇编参数配置项
   - 编译参数配置项
   - 链接参数配置项
   - 映像参数配置项
   - 打印参数配置项

5. 增加宏定义，使用`-D`命令，在右侧添加需要使用的宏

   ![增加宏定义](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_16_49_202503281616815.png)

   > [!tip]
   >
   > 实际上是使用了Make file来组织的，所以感兴趣可以看看makefile的语法。

6. 增加头文件路径

   ![增加头文件路径](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_18_31_202503281618069.png)

   > [!note]
   >
   > 注意：在设计到选择文件路径的时候都要使用WorkSpace，这样才能方便移植。

7. 增加链接脚本

   ![增加链接脚本](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_24_36_202503281624957.png)

8. 增加库

   ![增加库](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_29_24_202503281629284.png)

   > [!note]
   >
   > 注意：使用gcc时，库文件是以a结尾的，上面的图片中的库文件名为`libfr800x_stack.a`，在`-l`后只能输入文字，输入的文字需要将前缀`lib`和后缀`a`给去掉，在下面的`-L`中需要加上库文件的搜索目录

9. 改变工具链，在这里可以改变命令，如Archive、C compile、Build Command等

   ![改变工具链](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_33_32_202503281633832.png)

10. 选择芯片

    ![选择芯片](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_35_12_202503281635222.png)

    > [!important]
    >
    > 如果这里不显示芯片，需要按照以下步骤检查：
    >
    > 1. 检查设置全局环境变量的CMSIS路径设置是否正确
    > 2. 关闭eclipse，然后找到eclipse的安装路径
    > 3. 在该路径下打开cmd
    > 4. 执行`eclipse.exe -clean`即可找到
    >
    >    

11. 当然，也可以即生成hex文件和bin文件，在Build step中写入以下命令，两条指令之间用`；`分开（下图中我忘了加了）。

    ```sh
    arm-none-eabi-objcopy -O binary "${ProjName}.elf" "${ProjName}.bin"
    arm-none-eabi-objcopy -O ihex "${ProjName}.elf" "${ProjName}.hex"
    ```

    ![构建hex和bin文件](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_9_58_27_202503310958778.png)

    当然，你可以自己选择在build之前或之后执行什么命令。

12. 如果想要将`printf`函数重定向，需要按照以下图片来配置

    ![配置printf函数](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_10_5_17_202503311005312.png)

    然后将printf函数重定向串口

    ```c
    int _write(int fd, char *pBuffer, int size)
    {
        /*这里要写串口发送函数*/
        return size;
    }
    ```

> [!warning]
>
> 注意：以上步骤均需要按照需求来配，请不要参照图片配置‼‼‼‼‼‼‼‼



## 调试

1. 在调试之前需要先进行调试配置：

   ![调试配置路径](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_39_28_202503281639286.png)

2. 根据调试工具选择使用哪个进行调试，我这里使用的是JLink，双击会新增一个配置

   ![调试配置](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_40_26_202503281640360.png)

3. 配置需要调试的文件：注意，这里需要使用elf文件

   ![选择调试的文件](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_42_47_202503281642626.png)

4. 配置JLink，以下页面用来配置

   ![配置JLink](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_44_7_202503281644177.png)

5. 增加调试用的SVD文件

   ![增加SVD文件](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/28_16_51_34_202503281651434.png)

## 插件配置

Eclipse也提供了丰富的插件，依次点击*==Help>Eclipse Marketplace==*

![插件配置页面](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_10_12_58_202503311012805.png)

# Ozone

从[Ozone – The Performance Analyzer](https://www.segger.com/products/development-tools/ozone-j-link-debugger/)上下载Ozone。下载完成之后安装（正常安装，没有需要注意的地方，所以这里不再赘述）。

> [!tip]
>
> 一定要注意jlink和Ozone的版本要匹配，不然会报错，可以使用jlink7.22b和Ozone3.24‼‼‼‼‼‼‼

## 新建工程

依次点击*==File>New>New Project Wizard==*

![新建工程](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_9_31_15_202503310931161.png)

1. 在Device中选择芯片类型，这里调用的是JLink的，所以需要安装JFlash

   > [!important]
   >
   > 如果要新增一个芯片，首先按照芯片的手册来配置JFlash即可。配置好之后，OZone不会自动更新，需要找到JFLash的安装路径，双击`JLinkDLLUpdater.exe`的软件，然后会弹出页面，选中Ozone设备，然后更新。注意，这里如果Ozone和JLink的版本不匹配的话，OZone就打不开了，所以一定要注意版本是否兼容。当你运行`JLinkDLLUpdater.exe`软件的时候，可以看见框内的OZone的版本，在上面的一行字是JFlash的版本，如果一致就可以更新，要是不一致就不能更新。
   >
   > ![JLink更新包](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_9_36_25_202503310936813.png)

2. Register Set选择内核版本。

3. 外设文件是由单片机的DFP文件生成，到芯片的文件包里找到SVD文件。

配置连接选项，这里和JFlash一样配置即可。

![JLink配置](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_9_43_23_202503310943826.png)

配置完成之后，选择需要调试的文件，注意，这里要使用elf文件，如果没有elf文件，也可以选择使用axf文件。

![elf文件选择](https://gitlab.com/18355291538/picture/-/raw/main/pictures/2025/03/31_9_46_0_202503310946418.png)

## 详细使用

请参考[Ozone使用介绍-基础功能 - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!](https://www.armbbs.cn/forum.php?mod=viewthread&tid=95855&highlight=Ozone)











































































